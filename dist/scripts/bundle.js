config.$inject=["$routeProvider","$locationProvider"];var ahNuts=angular.module("cne",["ngRoute","firebase","ngSanitize"]);function customersController(e,t,o,s,n,r,l){var c=this;c.customerList=l(firebase.database().ref().child("customers")),c.customerSalesDays=[],c.selectedCustomer={seasons:{2018:{id:2018}}},c.testList=["a","b","c"],c.state={selected:{customer:{$index:"",$id:""}}},t.info("in the customers controller"),c.selectCustomer=function(e){c.state.selected.customer.$index=e,c.state.selected.customer.$id=c.customerList[e].$id,c.selectedCustomer=r(firebase.database().ref().child("customers").child(c.customerList[e].$id)),c.customerSalesDays=s.compile.customer_sales_days(c.state.selected.customer.$id)},c.updateCustomer=function(){c.selectedCustomer.$save().then(function(e){console.log("updated record successfully")}).catch(function(e){console.log("error updating record",e)})},c.changeRecord=function(e){c.state.selected.customer.$index;switch({prev:0,next:1}[e]){case 0:c.selectCustomer(c.state.selected.customer.$index-1);break;case 1:c.selectCustomer(c.state.selected.customer.$index+1)}},c.generate_bulk_salesdays=function(){console.log("generating bulk salesdays",c.selectedCustomer.sales_days)}}function landingController(e,t){t.info("in the landing controller")}function loginController(e,t,o){var s=this;s.credentials={username:"",password:""},s.active={username:!1,password:!1},s.submitCreds=function(e,t){console.log("submitCreds clicked"),o.authUser.email(e,t).then(function(e){console.log("was success",e)}).catch(function(e){console.log("Error:",e)})},t.info("in the login controller")}function salesDaysController(t,e,o,s,n,r,l){var i=this;i.salesdaysList=s(firebase.database().ref().child("sales_days")),i.selectedRecord={id:"2039752"},i.testCustomers=["Beaverton","Orenco"],i.testSeasons=["2018","2017"],i.testTimes=["9:00 AM","9:15 AM","9:30 AM","9:45 AM"],i.scheduling_params={customer:"",customer_id:"",season:"",bookend_dates:{first:"",last:""},repeats:"",event_days:{Mon:!1,Tue:!1,Wed:!1,Thu:!1,Fri:!1,Sat:!1,Sun:!1},same_day_load_in_out:!0,schedule:{load_in:"",load_out:"",open:"",close:"",sales_start:"",sales_end:""}},i.tempIterations=[],i.tempTimes={load_in:"",load_out:"",open:"",close:"",sales_start:"",sales_end:""},e.info("in the sales days controller"),i.updateRecord=function(e){console.log("got this id",e)},i.addSalesDay=function(){i.salesdaysList.$add({date:(new Date).toISOString(),schedule:{load_in:{datetime:"",sales_day_id:""},load_out:{datetime:"",sales_day_id:""},open:"",close:"",sales_start:"",sales_end:""},customer:"",season:{name:"",frequency:"",instance:0,total:0}}).then(function(e){console.log(e.key),i.selectedRecord=n(firebase.database().ref().child("sales_days").child(e.key)),console.log(i.selectedRecord)}).catch(function(e){console.log("error",e)})},i.generateSalesDays=function(){var e;(e=i.scheduling_params,new Promise(function(t,o){l.sales_days.compile_batch(e).then(function(e){t(e)}).catch(function(e){o(e)})})).then(function(e){console.log("successfully built",e),i.tempIterations=e,t.$apply()}).catch(function(e){console.log(e)})},i.foramtTime=function(e){console.log("formatting time",e);var t=new Date,o=t.getFullYear(),s=t.getMonth(),n=t.getDate(),r=i.tempTimes[e].split(":"),l=r[1].split(" "),c=parseInt(r[0]),a=l[0];"PM"==l[1]&&(c+=12).toString(),s<10&&(s="0"+s),n<10&&(n="0"+n),c<10&&(c="0"+c),i.scheduling_params.schedule[e]=o+"-"+s+"-"+n+"T"+c+":"+a+":00-07:00"},i.saveSalesDays=function(){i.tempIterations.forEach(function(e){i.salesdaysList.$add(e).then(function(e){var t=e.key;console.log(t)})})}}function customerList(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/customer-list.directive.htm",replace:!0,scope:{},link:t,controller:o,controllerAs:"vm",bindToController:!0};function t(e,t,o,s){}function o(e,t){console.log("in costomer List controller")}return o.$inject=["$scope","$log"],e}function customerSalesDays(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/customer-sales-days.directive.htm",replace:!0,scope:{salesdaysList:"="},link:t,controller:o,controllerAs:"vm",bindToController:!0};function t(e,t,o,s){}function o(e,t){console.log("in the customerSalesDaysController")}return o.$inject=["$scope","$log"],e}function loginPassword(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/login-password.directive.htm",replace:!0,scope:{password:"=",active:"="},link:t,controller:o,controllerAs:"vm",bindToController:!0};function t(e,t,o,s){}function o(e,t){}return o.$inject=["$scope","$log"],e}function loginUsername(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/login-username.directive.htm",replace:!0,scope:{username:"=",active:"="},link:t,controller:o,controllerAs:"vm",bindToController:!0};function t(e,t,o,s){}function o(e,t){}return o.$inject=["$scope","$log"],e}function salesDayTxs(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/sales-day-transactions.directive.htm",replace:!0,scope:{txsList:"="},link:t,controller:o,controllerAs:"vm",bindToController:!0};function t(e,t,o,s){}function o(e,t){console.log("in the salesDayTxsController")}return o.$inject=["$scope","$log"],e}function dataService(s){return{sales_days:{compile_batch:function(e){return new Promise(function(t,o){s({method:"POST",url:"/api/sales_days/compile_new_sales_days_batch",headers:{"Content-Type":"application/json"},data:e}).then(function(e){t(e.data)},function(e){o(e)})})}}}}function firebaseService(e,t,o){return{get:{customer_list:function(){return new Promise(function(e,t){e(["one","two","three"])})}},authUser:{email:function(e,o){return console.log("authenticating user"),new Promise(function(t,s){firebase.auth().signInWithEmailAndPassword(e,o).then(function(e){t(e)}).catch(function(e){var t=e.code,o=e.message;s({code:t,message:o})})})}},compile:{customer_sales_days:function(e){}},test:function(){return"good test from FB Service"}}}function config(e,t){t.hashPrefix(""),e.when("/",{templateUrl:"views/landingPage.htm",controller:"landingController",controllerAs:"vm"}).when("/customers",{templateUrl:"views/customersPage.htm",controller:"customersController",controllerAs:"vm",resolve:{customerList:customerList}}).when("/salesdays",{templateUrl:"views/salesDaysPage.htm",controller:"salesDaysController",controllerAs:"vm"}).when("/login",{templateUrl:"views/loginPage.htm",controller:"loginController",controllerAs:"vm"}).otherwise({redirectTo:"/"})}function customerList(){return new Promise(function(e,t){e("good test")})}angular.module("cne").controller("customersController",customersController),customersController.$inject=["$scope","$log","customerList","firebaseService","$firebase","$firebaseObject","$firebaseArray"],angular.module("cne").controller("landingController",landingController),landingController.$inject=["$scope","$log"],angular.module("cne").controller("loginController",loginController),loginController.$inject=["$scope","$log","firebaseService"],angular.module("cne").controller("salesDaysController",salesDaysController),salesDaysController.$inject=["$scope","$log","$firebase","$firebaseArray","$firebaseObject","$http","dataService"],angular.module("cne").directive("customerList",customerList),angular.module("cne").directive("customerSalesDays",customerSalesDays),angular.module("cne").directive("loginPassword",loginPassword),angular.module("cne").directive("loginUsername",loginUsername),angular.module("cne").directive("salesDayTxs",salesDayTxs),angular.module("cne").factory("dataService",dataService),dataService.$inject=["$http"],angular.module("cne").factory("firebaseService",firebaseService),firebaseService.$inject=["$firebase","$firebaseObject","$firebaseArray"],angular.module("cne").config(config);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMvd2ViYXBwLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9jdXN0b21lcnMtY29udHJvbGxlci5qcyIsInNjcmlwdHMvY29udHJvbGxlcnMvbGFuZGluZy1jb250cm9sbGVyLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9sb2dpbi1jb250cm9sbGVyLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9zYWxlc2RheXMtY29udHJvbGxlci5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9jdXN0b21lci1saXN0LmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL2N1c3RvbWVyLXNhbGVzLWRheXMuZGlyZWN0aXZlLmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL2xvZ2luLXBhc3N3b3JkLmRpcmVjdGl2ZS5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9sb2dpbi11c2VybmFtZS5kaXJlY3RpdmUuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvc2FsZXMtZGF5LXRyYW5zYWN0aW9ucy5kaXJlY3RpdmUuanMiLCJzY3JpcHRzL2ZhY3Rvcmllcy9kYXRhLnNlcnZpY2UuanMiLCJzY3JpcHRzL2ZhY3Rvcmllcy9maXJlYmFzZS5zZXJ2aWNlLmpzIiwic2NyaXB0cy9yb3V0ZXMvcm91dGVzLWNvbmZpZy5qcyJdLCJuYW1lcyI6WyJhaE51dHMiLCJhbmd1bGFyIiwibW9kdWxlIiwiY3VzdG9tZXJzQ29udHJvbGxlciIsIiRzY29wZSIsIiRsb2ciLCJjdXN0b21lckxpc3QiLCJmaXJlYmFzZVNlcnZpY2UiLCIkZmlyZWJhc2UiLCIkZmlyZWJhc2VPYmplY3QiLCIkZmlyZWJhc2VBcnJheSIsInZtIiwidGhpcyIsImZpcmViYXNlIiwiZGF0YWJhc2UiLCJyZWYiLCJjaGlsZCIsImN1c3RvbWVyU2FsZXNEYXlzIiwic2VsZWN0ZWRDdXN0b21lciIsInNlYXNvbnMiLCIyMDE4IiwiaWQiLCJ0ZXN0TGlzdCIsInN0YXRlIiwic2VsZWN0ZWQiLCJjdXN0b21lciIsIiRpbmRleCIsIiRpZCIsImluZm8iLCJzZWxlY3RDdXN0b21lciIsImluZGV4X2lkIiwiY29tcGlsZSIsImN1c3RvbWVyX3NhbGVzX2RheXMiLCJ1cGRhdGVDdXN0b21lciIsIiRzYXZlIiwidGhlbiIsInMiLCJjb25zb2xlIiwibG9nIiwiY2F0Y2giLCJlIiwiY2hhbmdlUmVjb3JkIiwic2VsZWN0IiwicHJldiIsIm5leHQiLCJnZW5lcmF0ZV9idWxrX3NhbGVzZGF5cyIsInNhbGVzX2RheXMiLCJsYW5kaW5nQ29udHJvbGxlciIsImxvZ2luQ29udHJvbGxlciIsImNyZWRlbnRpYWxzIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImFjdGl2ZSIsInN1Ym1pdENyZWRzIiwicGFzcyIsImF1dGhVc2VyIiwiZW1haWwiLCJzYWxlc0RheXNDb250cm9sbGVyIiwiJGh0dHAiLCJkYXRhU2VydmljZSIsInNhbGVzZGF5c0xpc3QiLCJzZWxlY3RlZFJlY29yZCIsInRlc3RDdXN0b21lcnMiLCJ0ZXN0U2Vhc29ucyIsInRlc3RUaW1lcyIsInNjaGVkdWxpbmdfcGFyYW1zIiwiY3VzdG9tZXJfaWQiLCJzZWFzb24iLCJib29rZW5kX2RhdGVzIiwiZmlyc3QiLCJsYXN0IiwicmVwZWF0cyIsImV2ZW50X2RheXMiLCJNb24iLCJUdWUiLCJXZWQiLCJUaHUiLCJGcmkiLCJTYXQiLCJTdW4iLCJzYW1lX2RheV9sb2FkX2luX291dCIsInNjaGVkdWxlIiwibG9hZF9pbiIsImxvYWRfb3V0Iiwib3BlbiIsImNsb3NlIiwic2FsZXNfc3RhcnQiLCJzYWxlc19lbmQiLCJ0ZW1wSXRlcmF0aW9ucyIsInRlbXBUaW1lcyIsInVwZGF0ZVJlY29yZCIsInJlY29yZF9pZCIsImFkZFNhbGVzRGF5IiwiJGFkZCIsImRhdGUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJkYXRldGltZSIsInNhbGVzX2RheV9pZCIsIm5hbWUiLCJmcmVxdWVuY3kiLCJpbnN0YW5jZSIsInRvdGFsIiwia2V5IiwiZ2VuZXJhdGVTYWxlc0RheXMiLCJwYXJhbXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImNvbXBpbGVfYmF0Y2giLCIkYXBwbHkiLCJmb3JhbXRUaW1lIiwic2VjdGlvbiIsInRvZGF5IiwieWVhciIsImdldEZ1bGxZZWFyIiwibW9udGgiLCJnZXRNb250aCIsImRheSIsImdldERhdGUiLCJ0aW1lU3BsaXQiLCJzcGxpdCIsIm1pblNwbGl0IiwiaG91ciIsInBhcnNlSW50IiwibWludXRlIiwidG9TdHJpbmciLCJzYXZlU2FsZXNEYXlzIiwiZm9yRWFjaCIsImNtZV9pdGVyYXRpb24iLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInRlbXBsYXRlVXJsIiwicmVwbGFjZSIsInNjb3BlIiwibGluayIsImxpbmtGdW5jIiwiY29udHJvbGxlciIsImN1c3RvbWVyTGlzdENvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJiaW5kVG9Db250cm9sbGVyIiwiZWwiLCJhdHRyIiwiY3RybCIsIiRpbmplY3QiLCJjdXN0b21lclNhbGVzRGF5c0NvbnRyb2xsZXIiLCJsb2dpblBhc3N3b3JkIiwibG9naW5QYXNzd29yZENvbnRyb2xsZXIiLCJsb2dpblVzZXJuYW1lIiwibG9naW5Vc2VybmFtZUNvbnRyb2xsZXIiLCJzYWxlc0RheVR4cyIsInR4c0xpc3QiLCJzYWxlc0RheVR4c0NvbnRyb2xsZXIiLCJtZXRob2QiLCJ1cmwiLCJoZWFkZXJzIiwiQ29udGVudC1UeXBlIiwiZGF0YSIsInJlc3BvbnNlIiwiZXJyb3IiLCJnZXQiLCJjdXN0b21lcl9saXN0IiwiYXV0aCIsInNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkIiwiZXJyb3JDb2RlIiwiY29kZSIsImVycm9yTWVzc2FnZSIsIm1lc3NhZ2UiLCJ0ZXN0IiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsImhhc2hQcmVmaXgiLCJ3aGVuIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImZhY3RvcnkiXSwibWFwcGluZ3MiOiJzREFDQSxJQUFBQSxPQUFBQyxRQUFBQyxPQUFBLE1BQUEs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bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIE1PRFVMRVxudmFyIGFoTnV0cyA9IGFuZ3VsYXIubW9kdWxlKCdjbmUnLCBbJ25nUm91dGUnLCAnZmlyZWJhc2UnLCAnbmdTYW5pdGl6ZSddKTtcbiIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdjbmUnKVxuICAgIC5jb250cm9sbGVyKCdjdXN0b21lcnNDb250cm9sbGVyJywgY3VzdG9tZXJzQ29udHJvbGxlcik7XG5cbmN1c3RvbWVyc0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywnJGxvZycsICdjdXN0b21lckxpc3QnLCAnZmlyZWJhc2VTZXJ2aWNlJywgJyRmaXJlYmFzZScsICckZmlyZWJhc2VPYmplY3QnLCAnJGZpcmViYXNlQXJyYXknXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjdXN0b21lcnNDb250cm9sbGVyKCRzY29wZSwgJGxvZywgY3VzdG9tZXJMaXN0LCBmaXJlYmFzZVNlcnZpY2UsICRmaXJlYmFzZSwgJGZpcmViYXNlT2JqZWN0LCAkZmlyZWJhc2VBcnJheSkge1xuXG5cdC8vZGVmaW5lIHZpZXcgbW9kZWwgdmFyaWFibGVcblx0dmFyIHZtID0gdGhpcztcblx0dm0uY3VzdG9tZXJMaXN0ID0gJGZpcmViYXNlQXJyYXkoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZCgnY3VzdG9tZXJzJykpO1xuXHR2bS5jdXN0b21lclNhbGVzRGF5cyA9IFtdO1xuXHR2bS5zZWxlY3RlZEN1c3RvbWVyID0geyBzZWFzb25zOiB7IFwiMjAxOFwiOiB7IGlkOiAyMDE4fSB9IH07XG5cdHZtLnRlc3RMaXN0ID0gWydhJywgJ2InLCAnYyddOyAvLyRmaXJlYmFzZUFycmF5KGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCkuY2hpbGQoJ2N1c3RvbWVycycpLmNoaWxkKCdjdXN0b21lcl9saXN0JykpO1xuXHR2bS5zdGF0ZSA9IHtcblx0XHRzZWxlY3RlZDoge1xuXHRcdFx0Y3VzdG9tZXI6IHtcblx0XHRcdFx0JGluZGV4OiBcIlwiLFxuXHRcdFx0XHQkaWQ6IFwiXCIsXG5cblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0Ly9pZGVudGlmeSB3aGVyZSB3ZSBhcmVcblx0JGxvZy5pbmZvKCdpbiB0aGUgY3VzdG9tZXJzIGNvbnRyb2xsZXInKTtcdC8vVE9ETzogVEFLRSBUSElTIE9VVCBMQVRFUlxuXHRcblxuXHQvKlxuXHQqXHRMT0NBTCBGVU5DVElPTlMgR08gSEVSRVxuXHQqXG5cdCovXG5cblx0Ly9cdExPQUQgQ1VTVE9NRVIgTElTVFxuXHRmdW5jdGlvbiBsb2FkX2N1c3RvbWVyX2xpc3QoKSB7XG5cdFx0XG5cdFx0Ly90cmFjayBzdGFydGluZyBmdW5jdGlvblxuXHRcdC8vY29uc29sZS5sb2coJ2xvYWRpbmcgdGhlIGN1c3RvbWVyIGxpc3QnKTtcblx0XHRcblx0XHQvL2dhdGhlciB0aGUgZGF0YVxuXHRcdGZpcmViYXNlU2VydmljZS5nZXQuY3VzdG9tZXJfbGlzdCgpLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhzKSB7XG5cdFx0XHRcblx0XHRcdC8vY29uc29sZS5sb2coJ2dvdCB0aGlzIHJlc3BvbnMnLCBzKTtcblx0XHRcdFxuXHRcdFx0Ly93aGVuIHRoZSBsaXN0IGhhcyBiZWVuIGxvYWRlZCB1cGRhdGUgdGhlIHZhcmlhYmxlc1xuXHRcdFx0Ly92bS5jdXN0b21lckxpc3QgPSBzO1xuXHRcdFx0dm0uY3VzdG9tZXJMaXN0ID0gJGZpcmViYXNlQXJyYXkoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZCgnY3VzdG9tZXJzJykuY2hpbGQoJ2N1c3RvbWVyX2xpc3QnKSk7XG5cblx0XHRcdC8vcmVmbGVjdCB0aGUgY2hhbmdlc1xuXHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xuXHRcdFx0Ly9pZiB0aGVyZSB3YXMgYW4gZXJyb3IgdGhyb3cgdGhlIGVycm9yXG5cdFx0XHRjb25zb2xlLmxvZygnZXJyb3InKTtcblx0XHR9KTtcblx0fTtcblxuXHQvKlxuXHQqXHRWSUVXIE1PREVMIEZVTkNUSU9OUyBHTyBIRVJFXG5cdCpcblx0Ki9cdFxuXHQvL1x0U0VMRUNUIENMSUNLRUQgQ1VTVE9NRVJcblx0dm0uc2VsZWN0Q3VzdG9tZXIgPSBmdW5jdGlvbihpbmRleF9pZCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZtLnN0YXRlLnNlbGVjdGVkLmN1c3RvbWVyLiRpbmRleCA9IGluZGV4X2lkO1xuXHRcdHZtLnN0YXRlLnNlbGVjdGVkLmN1c3RvbWVyLiRpZCA9IHZtLmN1c3RvbWVyTGlzdFtpbmRleF9pZF0uJGlkO1xuXHRcdHZtLnNlbGVjdGVkQ3VzdG9tZXIgPSAkZmlyZWJhc2VPYmplY3QoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZCgnY3VzdG9tZXJzJykuY2hpbGQodm0uY3VzdG9tZXJMaXN0W2luZGV4X2lkXS4kaWQpKTtcblx0XHR2bS5jdXN0b21lclNhbGVzRGF5cyA9IGZpcmViYXNlU2VydmljZS5jb21waWxlLmN1c3RvbWVyX3NhbGVzX2RheXModm0uc3RhdGUuc2VsZWN0ZWQuY3VzdG9tZXIuJGlkKTtcblx0fTtcblxuXHQvL1x0VVBEQVRFIFRIRSBDVVNUT01FUiBSRUNPUkRcblx0dm0udXBkYXRlQ3VzdG9tZXIgPSBmdW5jdGlvbigpIHtcblx0XHR2bS5zZWxlY3RlZEN1c3RvbWVyLiRzYXZlKCkudGhlbihmdW5jdGlvbiBzdWNjZXMocykge1xuXHRcdFx0Y29uc29sZS5sb2coJ3VwZGF0ZWQgcmVjb3JkIHN1Y2Nlc3NmdWxseScpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdlcnJvciB1cGRhdGluZyByZWNvcmQnLCBlKTtcblx0XHR9KTtcblx0fTtcblxuXHQvL1x0TU9WRSBUTyBUSEUgTkVYVCBDVVNUT01FUlxuXHR2bS5jaGFuZ2VSZWNvcmQgPSBmdW5jdGlvbihzZWxlY3QpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgb3B0biA9IHsgXCJwcmV2XCI6IDAsIFwibmV4dFwiOiAxIH07XG5cdFx0dmFyIGluZGV4X2lkID0gdm0uc3RhdGUuc2VsZWN0ZWQuY3VzdG9tZXIuJGluZGV4O1xuXG5cdFx0Ly9jb25zb2xlLmxvZyhpbmRleF9pZCk7XG5cblx0XHRzd2l0Y2gob3B0bltzZWxlY3RdKSB7XG5cdFx0XHRjYXNlIDA6XG5cdFx0XHRcdC8vY29uc29sZS5sb2coJ3ByZXZpb3VzIHJlY29yZCcpO1xuXHRcdFx0XHR2bS5zZWxlY3RDdXN0b21lcih2bS5zdGF0ZS5zZWxlY3RlZC5jdXN0b21lci4kaW5kZXggLSAxKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDE6XG5cdFx0XHRcdC8vY29uc29sZS5sb2coJ25leHQgcmVjb3JkJyk7XG5cdFx0XHRcdHZtLnNlbGVjdEN1c3RvbWVyKHZtLnN0YXRlLnNlbGVjdGVkLmN1c3RvbWVyLiRpbmRleCArIDEpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fTtcblxuXHQvL1x0R0VORVJBVEUgQlVMSyBTQUxFUyBEQVlTXG5cdHZtLmdlbmVyYXRlX2J1bGtfc2FsZXNkYXlzID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0Y29uc29sZS5sb2coJ2dlbmVyYXRpbmcgYnVsayBzYWxlc2RheXMnLCB2bS5zZWxlY3RlZEN1c3RvbWVyLnNhbGVzX2RheXMpO1xuXHRcdFxuXHR9O1xuXG5cdC8vcnVuIHRoZSB0ZXN0XG5cblx0Ly9vbiBwYWdlIGxvYWRcblx0Ly9sb2FkX2N1c3RvbWVyX2xpc3QoKTtcblxuXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ2NuZScpXG4gICAgLmNvbnRyb2xsZXIoJ2xhbmRpbmdDb250cm9sbGVyJywgbGFuZGluZ0NvbnRyb2xsZXIpO1xuXG5sYW5kaW5nQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCckbG9nJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gbGFuZGluZ0NvbnRyb2xsZXIoJHNjb3BlLCAkbG9nKSB7XG5cblx0Ly9kZWZpbmUgdmlldyBtb2RlbCB2YXJpYWJsZVxuXHR2YXIgdm0gPSB0aGlzO1xuXG5cdCRsb2cuaW5mbygnaW4gdGhlIGxhbmRpbmcgY29udHJvbGxlcicpO1x0Ly9UT0RPOiBUQUtFIFRISVMgT1VUIExBVEVSXG5cblx0Ly9kZWZpbmUgbG9jYWwgZnVuY3Rpb25zXG5cblx0Ly9ydW4gdGhlIHRlc3RcblxuXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ2NuZScpXG4gICAgLmNvbnRyb2xsZXIoJ2xvZ2luQ29udHJvbGxlcicsIGxvZ2luQ29udHJvbGxlcik7XG5cbmxvZ2luQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCckbG9nJywgJ2ZpcmViYXNlU2VydmljZSddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGxvZ2luQ29udHJvbGxlcigkc2NvcGUsICRsb2csIGZpcmViYXNlU2VydmljZSkge1xuXG5cdC8vZGVmaW5lIHZpZXcgbW9kZWwgdmFyaWFibGVcblx0dmFyIHZtID0gdGhpcztcblxuXHQvL2RlZmluZSB2aWV3IG1vZGVsIHZhcmlhYmxlc1xuXHR2bS5jcmVkZW50aWFscyA9IHtcblx0XHR1c2VybmFtZTogXCJcIixcblx0XHRwYXNzd29yZDogXCJcIlxuXHR9O1xuXG5cdHZtLmFjdGl2ZSA9IHtcblx0XHR1c2VybmFtZTogZmFsc2UsXG5cdFx0cGFzc3dvcmQ6IGZhbHNlXG5cdH07XG5cblx0Ly9kZWZpbmUgdmlldyBtb2RlbCBmdW5jdGlvbnNcblx0dm0uc3VibWl0Q3JlZHMgPSBmdW5jdGlvbih1c2VybmFtZSwgcGFzcykge1xuXHRcdFxuXHRcdGNvbnNvbGUubG9nKCdzdWJtaXRDcmVkcyBjbGlja2VkJyk7XG5cdFx0XG5cdFx0Ly9zdWJtaXQgY3JlZGVudGlhbHNcblx0XHRmaXJlYmFzZVNlcnZpY2UuYXV0aFVzZXIuZW1haWwodXNlcm5hbWUsIHBhc3MpLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyAocykge1xuXG5cdFx0XHRjb25zb2xlLmxvZygnd2FzIHN1Y2Nlc3MnLCBzKTtcblxuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblx0XHRcdGNvbnNvbGUubG9nKFwiRXJyb3I6XCIsIGUpO1xuXHRcdH0pO1xuXG5cdH07XG5cblx0JGxvZy5pbmZvKCdpbiB0aGUgbG9naW4gY29udHJvbGxlcicpO1x0Ly9UT0RPOiBUQUtFIFRISVMgT1VUIExBVEVSXG5cblx0Ly9kZWZpbmUgbG9jYWwgZnVuY3Rpb25zXG5cblx0Ly9ydW4gdGhlIHRlc3RcblxuXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ2NuZScpXG4gICAgLmNvbnRyb2xsZXIoJ3NhbGVzRGF5c0NvbnRyb2xsZXInLCBzYWxlc0RheXNDb250cm9sbGVyKTtcblxuc2FsZXNEYXlzQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCckbG9nJywgJyRmaXJlYmFzZScsICckZmlyZWJhc2VBcnJheScsICckZmlyZWJhc2VPYmplY3QnLCAnJGh0dHAnLCAnZGF0YVNlcnZpY2UnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBzYWxlc0RheXNDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJGZpcmViYXNlLCAkZmlyZWJhc2VBcnJheSwgJGZpcmViYXNlT2JqZWN0LCAkaHR0cCwgZGF0YVNlcnZpY2UpIHtcblxuXHQvL2RlZmluZSB2aWV3IG1vZGVsIHZhcmlhYmxlXG5cdHZhciB2bSA9IHRoaXM7XG5cdC8qdmFyIGl0ZXJhdGlvbiA9IHtcblx0XHRkYXRlOiBcIjIwMTgtMDUtMDVUMDY6MDA6MDBaXCIsXG5cdFx0d2tfZGF5OiBcIlNhdFwiLFxuXHRcdGlkOiBcImJlYXZlcnRvbl9mbV8wMDFcIixcblx0XHRzY2hlZHVsZToge1xuXHRcdFx0bG9hZF9pbjogXCJcIixcblx0XHRcdGxvYWRfb3V0OiBcIlwiLFxuXHRcdFx0b3BlbjogXCI4OjAwIEFNXCIsXG5cdFx0XHRjbG9zZTogXCIxOjMwIFBNXCIsXG5cdFx0XHRzYWxlc19zdGFydDogXCJcIixcblx0XHRcdHNhbGVzX2VuZDogXCJcIlxuXHRcdH1cblx0fTsqL1xuXHR2bS5zYWxlc2RheXNMaXN0ID0gJGZpcmViYXNlQXJyYXkoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZCgnc2FsZXNfZGF5cycpKTtcblx0dm0uc2VsZWN0ZWRSZWNvcmQgPSB7IGlkOiBcIjIwMzk3NTJcIiB9O1xuXHR2bS50ZXN0Q3VzdG9tZXJzID0gWyBcIkJlYXZlcnRvblwiLCBcIk9yZW5jb1wiIF07XG5cdHZtLnRlc3RTZWFzb25zID0gWyAnMjAxOCcsICcyMDE3JyBdO1xuXHQvL3ZtLnJlcGVhdHMgPSBbICduZXZlcicsIFwiZXZlcnkgd2Vla1wiLCBcImV2ZXJ5IDIgd2Vla3NcIiwgXCJldmVyeSAzIHdlZWtzXCIsIFwiZXZlcnlfNF93ZWVrc1wiLCBcImV2ZXJ5XzVfd2Vla3NcIiwgXCJldmVyeV82X3dlZWtzXCIsIFwiZXZlcnlfN193ZWVrc1wiLCBcImV2ZXJ5Xzhfd2Vla3NcIiBdO1xuXHR2bS50ZXN0VGltZXMgPSBbICc5OjAwIEFNJywnOToxNSBBTScsJzk6MzAgQU0nLCc5OjQ1IEFNJyAgXTtcblx0dm0uc2NoZWR1bGluZ19wYXJhbXMgPSB7XG5cdFx0Y3VzdG9tZXI6IFwiXCIsXG5cdFx0Y3VzdG9tZXJfaWQ6IFwiXCIsXG5cdFx0c2Vhc29uOiBcIlwiLFxuXHRcdGJvb2tlbmRfZGF0ZXM6IHtcblx0XHRcdGZpcnN0OiBcIlwiLFxuXHRcdFx0bGFzdDogXCJcIlxuXHRcdH0sXG5cdFx0cmVwZWF0czogXCJcIixcblx0XHRldmVudF9kYXlzOiB7XG5cdFx0XHRNb246IGZhbHNlLFxuXHRcdFx0VHVlOiBmYWxzZSxcblx0XHRcdFdlZDogZmFsc2UsXG5cdFx0XHRUaHU6IGZhbHNlLFxuXHRcdFx0RnJpOiBmYWxzZSxcblx0XHRcdFNhdDogZmFsc2UsXG5cdFx0XHRTdW46IGZhbHNlXG5cdFx0fSxcblx0XHRzYW1lX2RheV9sb2FkX2luX291dDogdHJ1ZSxcblx0XHRzY2hlZHVsZToge1xuXHRcdFx0bG9hZF9pbjogXCJcIixcblx0XHRcdGxvYWRfb3V0OiBcIlwiLFxuXHRcdFx0b3BlbjogXCJcIixcblx0XHRcdGNsb3NlOiBcIlwiLFxuXHRcdFx0c2FsZXNfc3RhcnQ6IFwiXCIsXG5cdFx0XHRzYWxlc19lbmQ6IFwiXCJcblx0XHR9XG5cdH07XG5cdHZtLnRlbXBJdGVyYXRpb25zID0gW107XG5cdHZtLnRlbXBUaW1lcyA9IHtcblx0XHRsb2FkX2luOiBcIlwiLFxuXHRcdGxvYWRfb3V0OiBcIlwiLFxuXHRcdG9wZW46IFwiXCIsXG5cdFx0Y2xvc2U6IFwiXCIsXG5cdFx0c2FsZXNfc3RhcnQ6IFwiXCIsXG5cdFx0c2FsZXNfZW5kOiBcIlwiXG5cdH1cblxuXHQvL2lkZW50aWZ5IGNvbnRyb2xsZXJcblx0JGxvZy5pbmZvKCdpbiB0aGUgc2FsZXMgZGF5cyBjb250cm9sbGVyJyk7XHQvL1RPRE86IFRBS0UgVEhJUyBPVVQgTEFURVJcblxuXHQvKlxuXHQqXHRMT0NBTCBGVU5DVElPTlMgR08gSEVSRVxuXHQqXG5cdCovXG5cdGZ1bmN0aW9uIGJ1aWxkX3NhbGVzX2RheXNfYXJyYXkocGFyYW1zKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblxuXHRcdC8vY29uc29sZS5sb2coJ2dvdCB0aGVzZSBwYXJhbXMnLCBzdGFydCwgZW5kKTtcblxuXHRcdC8vcmV0dXJuIGFzeW5jIHdvcmtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2FjY2VzcyBkYXRhIHNlcnZpY2Vcblx0XHRcdGRhdGFTZXJ2aWNlLnNhbGVzX2RheXMuY29tcGlsZV9iYXRjaChwYXJhbXMpLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhzKSB7XG5cdFx0XHRcdC8vY29uc29sZS5sb2coJ3N1Y2Nlc3MnLCBzKTtcblx0XHRcdFx0cmVzb2x2ZShzKTtcblx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblx0XHRcdFx0Ly9jb25zb2xlLmxvZygnZXJyb3InLCBlKTtcblx0XHRcdFx0cmVqZWN0KGUpO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHR9O1xuXG5cblx0Lypcblx0Klx0VklFVyBNT0RFTCBGVU5DVElPTlMgR08gSEVSRVxuXHQqXG5cdCovXG5cdC8vXHRVUERBVEUgUkVDT1JEXG5cdHZtLnVwZGF0ZVJlY29yZCA9IGZ1bmN0aW9uKHJlY29yZF9pZCkge1xuXHRcdGNvbnNvbGUubG9nKCdnb3QgdGhpcyBpZCcsIHJlY29yZF9pZCk7XG5cdFx0Lyp2bS5zYWxlc2RheXNMaXN0LiRzYXZlKHJlY29yZF9pZCkudGhlbihmdW5jdGlvbiBzdWNjZXMocykge1xuXHRcdFx0Y29uc29sZS5sb2coJ3VwZGF0ZWQgcmVjb3JkIHN1Y2Nlc3NmdWxseScpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdlcnJvciB1cGRhdGluZyByZWNvcmQnLCBlKTtcblx0XHR9KTsqL1xuXHR9O1xuXG5cdC8vIEFERCBORVcgU0FMRVMgREFZXG5cdHZtLmFkZFNhbGVzRGF5ID0gZnVuY3Rpb24oKSB7XG5cblx0XHR2bS5zYWxlc2RheXNMaXN0LiRhZGQoe1xuXHRcdFx0ZGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuXHRcdFx0c2NoZWR1bGU6IHtcblx0XHRcdFx0bG9hZF9pbjoge1xuXHRcdFx0XHRcdGRhdGV0aW1lOiBcIlwiLFxuXHRcdFx0XHRcdHNhbGVzX2RheV9pZDogXCJcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRsb2FkX291dDoge1xuXHRcdFx0XHRcdGRhdGV0aW1lOiBcIlwiLFxuXHRcdFx0XHRcdHNhbGVzX2RheV9pZDogXCJcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRvcGVuOiBcIlwiLFxuXHRcdFx0XHRjbG9zZTogXCJcIixcblx0XHRcdFx0c2FsZXNfc3RhcnQ6IFwiXCIsXG5cdFx0XHRcdHNhbGVzX2VuZDogXCJcIlxuXHRcdFx0fSxcblx0XHRcdGN1c3RvbWVyOiBcIlwiLFxuXHRcdFx0c2Vhc29uOiB7XG5cdFx0XHRcdG5hbWU6IFwiXCIsXG5cdFx0XHRcdGZyZXF1ZW5jeTogXCJcIixcblx0XHRcdFx0aW5zdGFuY2U6IDAsXG5cdFx0XHRcdHRvdGFsOiAwXG5cdFx0XHR9XG5cdFx0fSkudGhlbihmdW5jdGlvbiBzdWNjZXNzKHMpIHtcblx0XHRcdC8vc2V0IHRoZSBmaXJlYmFzZSBvYmplY3Rcblx0XHRcdGNvbnNvbGUubG9nKHMua2V5KTtcblx0XHRcdHZtLnNlbGVjdGVkUmVjb3JkID0gJGZpcmViYXNlT2JqZWN0KGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCkuY2hpbGQoJ3NhbGVzX2RheXMnKS5jaGlsZChzLmtleSkpO1xuXHRcdFx0Y29uc29sZS5sb2codm0uc2VsZWN0ZWRSZWNvcmQpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdlcnJvcicsIGUpO1xuXHRcdH0pO1xuXG5cdFx0Lyp2bS5zYWxlc2RheXNMaXN0LnNhdmUoKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3Mocykge1xuXHRcdFx0Y29uc29sZS5sb2coJ3N1Y2Nlc3MnLCBzKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnZXJyb3InLCBlKTtcblx0XHR9KTsqL1xuXG5cdH07XG5cblx0Ly8gR0VORVJBVEUgU0FMRVMgREFZU1xuXHR2bS5nZW5lcmF0ZVNhbGVzRGF5cyA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXG5cdFx0Ly9ub3RpZnkgb2YgbG9jYXRpb25cblx0XHQvL2NvbnNvbGUubG9nKCdnZW5lcmF0aW5nIFNhbGVzIGRheXMnLCB2bS5zY2hlZHVsaW5nX3BhcmFtcyk7XG5cblx0XHRidWlsZF9zYWxlc19kYXlzX2FycmF5KHZtLnNjaGVkdWxpbmdfcGFyYW1zKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3Mocykge1xuXHRcdFx0Y29uc29sZS5sb2coJ3N1Y2Nlc3NmdWxseSBidWlsdCcsIHMpO1xuXHRcdFx0dm0udGVtcEl0ZXJhdGlvbnMgPSBzO1xuXHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblx0XHRcdGNvbnNvbGUubG9nKGUpO1xuXHRcdH0pO1xuXG5cdH07XG5cblx0Ly9cdEZPUk1BVCBUSU1FXG5cdHZtLmZvcmFtdFRpbWUgPSBmdW5jdGlvbihzZWN0aW9uKSB7XG5cdFx0XG5cdFx0Ly9ub3RpZnkgb2YgcHJvZ3Jlc3Ncblx0XHRjb25zb2xlLmxvZygnZm9ybWF0dGluZyB0aW1lJywgc2VjdGlvbik7XG5cblx0XHQvL3NwbGl0IHRpbWVcblx0XHR2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuXHRcdHZhciB5ZWFyID0gdG9kYXkuZ2V0RnVsbFllYXIoKTtcblx0XHR2YXIgbW9udGggPSB0b2RheS5nZXRNb250aCgpO1xuXHRcdHZhciBkYXkgPSB0b2RheS5nZXREYXRlKCk7XG5cdFx0XG5cblx0XHR2YXIgdGltZVNwbGl0ID0gdm0udGVtcFRpbWVzW3NlY3Rpb25dLnNwbGl0KFwiOlwiKTtcblx0XHR2YXIgbWluU3BsaXQgPSB0aW1lU3BsaXRbMV0uc3BsaXQoXCIgXCIpO1xuXHRcdHZhciBob3VyID0gcGFyc2VJbnQodGltZVNwbGl0WzBdKTtcblx0XHR2YXIgbWludXRlID0gbWluU3BsaXRbMF07XG5cdFx0dmFyIHRpbWVEYXkgPSBtaW5TcGxpdFsxXTtcblxuXHRcdC8vZm9ybWF0IGFjY29yZGluZ2x5XG5cdFx0aWYodGltZURheSA9PSBcIlBNXCIpIHsgaG91ciArPSAxMjsgaG91ci50b1N0cmluZygpOyB9XG5cdFx0aWYobW9udGggPCAxMCkgbW9udGggPSBcIjBcIiArIG1vbnRoO1xuXHRcdGlmKGRheSA8IDEwKSBkYXkgPSBcIjBcIiArIGRheTtcblx0XHRpZihob3VyIDwgMTApIGhvdXIgPSBcIjBcIiArIGhvdXI7XG5cdFx0Ly9pZihtaW51dGUgPCAxMCkgbWluID0gXCIwXCIgKyBtaW51dGU7XG5cdFx0XG5cblx0XHQvL2NvbnNvbGUubG9nKHRvZGF5LCAnaG91cicsIGhvdXIsICdtaW51dGUnLCBtaW51dGUsICd0aW1lRGF5JywgdGltZURheSk7XG5cblx0XHQvL3ZtLnNjaGVkdWxpbmdfcGFyYW1zLnNjaGVkdWxlW3NlY3Rpb25dID0gXCIyMDE4LTA1LTA1VDA2OjAwOjAwLTA3OjAwXCJcblx0XHR2bS5zY2hlZHVsaW5nX3BhcmFtcy5zY2hlZHVsZVtzZWN0aW9uXSA9IHllYXIgKyBcIi1cIiArIG1vbnRoICsgXCItXCIgKyAgZGF5ICsgXCJUXCIgKyAgaG91ciArIFwiOlwiICsgbWludXRlICsgXCI6MDAtMDc6MDBcIlxuXHR9O1xuXG5cdC8vIFx0U0FWRSBTQUxFUyBEQVlTXG5cdHZtLnNhdmVTYWxlc0RheXMgPSBmdW5jdGlvbigpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgaW5kZXggPSAwO1xuXG5cdFx0Ly9pdGVyYXRlIHRocm91Z2ggYWxsIHRoZSBzYWxlcyBkYXlzLCBzYXZpbmcgdG8gdGhlIERCXG5cdFx0dm0udGVtcEl0ZXJhdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoY21lX2l0ZXJhdGlvbikge1xuXG5cdFx0XHR2bS5zYWxlc2RheXNMaXN0LiRhZGQoY21lX2l0ZXJhdGlvbikudGhlbihmdW5jdGlvbiAocmVmKSB7XG5cdFx0XHRcdC8vZ2V0IHRoZSBuZXcga2V5XG5cdFx0XHRcdHZhciBpZCA9IHJlZi5rZXk7XG5cblx0XHRcdFx0Ly9zYXZlIGl0IHRvIHRoZSBkYiBvYmplY3Rcblx0XHRcdFx0Y29uc29sZS5sb2coaWQpO1xuXG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdFx0Ly9vbmNlIHRoZXkgaGF2ZSBhbGwgYmVuIHNhdmVkIFxuXG5cdFx0Ly92bS5zYWxlc2RheXNMaXN0LiRhZGQoe25hbWU6ICd0ZXN0J30pO1x0XG5cdH07XG5cblx0Ly9ydW4gdGhlIHRlc3RcblxuXG59IiwiLypcbipcdENVU1RPTUVSIExJU1RcbipcbipcdFRoaXMgbW9kdWxlIGlzIGRlc2lnbmVkIHRvIFxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdjbmUnKVxuXHQuZGlyZWN0aXZlKCdjdXN0b21lckxpc3QnLCBjdXN0b21lckxpc3QpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGN1c3RvbWVyTGlzdCgpIHtcblx0Ly9kZWZpbmUgdGhlIGRpcmVjdGl2ZVxuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiBcIkFFQ01cIixcblx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvY3VzdG9tZXItbGlzdC5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7XG5cdFx0fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBjdXN0b21lckxpc3RDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7fVxuXG5cdGN1c3RvbWVyTGlzdENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnXTtcblx0XG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBjdXN0b21lckxpc3RDb250cm9sbGVyKCRzY29wZSwgJGxvZykge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdGNvbnNvbGUubG9nKCdpbiBjb3N0b21lciBMaXN0IGNvbnRyb2xsZXInKTtcblx0fVxuXG5cdC8vcGFzcyBpdCBiYWNrXG5cdHJldHVybiBkaXJlY3RpdmU7XG59IiwiLypcbipcdFNBTEVTIERBWSBUUkFOU0FDVElPTlNcbipcbipcdFRoaXMgbW9kdWxlIGlzIGRlc2lnbmVkIHRvIFxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdjbmUnKVxuXHQuZGlyZWN0aXZlKCdjdXN0b21lclNhbGVzRGF5cycsIGN1c3RvbWVyU2FsZXNEYXlzKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjdXN0b21lclNhbGVzRGF5cygpIHtcblx0Ly9kZWZpbmUgdGhlIGRpcmVjdGl2ZVxuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiBcIkFFQ01cIixcblx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvY3VzdG9tZXItc2FsZXMtZGF5cy5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7XG5cdFx0XHRzYWxlc2RheXNMaXN0OiBcIj1cIlxuXHRcdH0sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogY3VzdG9tZXJTYWxlc0RheXNDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7fVxuXG5cdGN1c3RvbWVyU2FsZXNEYXlzQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZyddO1xuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gY3VzdG9tZXJTYWxlc0RheXNDb250cm9sbGVyKCRzY29wZSwgJGxvZykge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRjb25zb2xlLmxvZygnaW4gdGhlIGN1c3RvbWVyU2FsZXNEYXlzQ29udHJvbGxlcicpO1xuXHR9XG5cblx0Ly9wYXNzIGl0IGJhY2tcblx0cmV0dXJuIGRpcmVjdGl2ZTtcbn0iLCIvKlxuKlx0RkxBVk9SIE1JWEVSXG4qXG4qXHRUaGlzIG1vZHVsZSBpcyBkZXNpZ25lZCB0byBhbGxvdyBjdXN0b21lcnMgdG8gbWl4IGFuZCBtYXRjaFxuKlx0b3VyIGRlbGljaW91cyBmbGF2b3JzIGFuZCB0byBwaWNrIHRoaWVyIHNpemluZy5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnY25lJylcblx0LmRpcmVjdGl2ZSgnbG9naW5QYXNzd29yZCcsIGxvZ2luUGFzc3dvcmQpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGxvZ2luUGFzc3dvcmQoKSB7XG5cdC8vZGVmaW5lIHRoZSBkaXJlY3RpdmVcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogXCJBRUNNXCIsXG5cdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL2xvZ2luLXBhc3N3b3JkLmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdHBhc3N3b3JkOiBcIj1cIixcblx0XHRcdGFjdGl2ZTogXCI9XCJcblx0XHR9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IGxvZ2luUGFzc3dvcmRDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7fVxuXG5cdGxvZ2luUGFzc3dvcmRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJ107XG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsb2dpblBhc3N3b3JkQ29udHJvbGxlcigkc2NvcGUsICRsb2cpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdH1cblxuXHQvL3Bhc3MgaXQgYmFja1xuXHRyZXR1cm4gZGlyZWN0aXZlO1xufSIsIi8qXG4qXHRGTEFWT1IgTUlYRVJcbipcbipcdFRoaXMgbW9kdWxlIGlzIGRlc2lnbmVkIHRvIGFsbG93IGN1c3RvbWVycyB0byBtaXggYW5kIG1hdGNoXG4qXHRvdXIgZGVsaWNpb3VzIGZsYXZvcnMgYW5kIHRvIHBpY2sgdGhpZXIgc2l6aW5nLlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdjbmUnKVxuXHQuZGlyZWN0aXZlKCdsb2dpblVzZXJuYW1lJywgbG9naW5Vc2VybmFtZSk7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gbG9naW5Vc2VybmFtZSgpIHtcblx0Ly9kZWZpbmUgdGhlIGRpcmVjdGl2ZVxuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiBcIkFFQ01cIixcblx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvbG9naW4tdXNlcm5hbWUuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge1xuXHRcdFx0dXNlcm5hbWU6IFwiPVwiLFxuXHRcdFx0YWN0aXZlOiBcIj1cIlxuXHRcdH0sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogbG9naW5Vc2VybmFtZUNvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHt9XG5cblx0bG9naW5Vc2VybmFtZUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnXTtcblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxvZ2luVXNlcm5hbWVDb250cm9sbGVyKCRzY29wZSwgJGxvZykge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBzZWxmID0gdGhpcztcblx0fVxuXG5cdC8vcGFzcyBpdCBiYWNrXG5cdHJldHVybiBkaXJlY3RpdmU7XG59IiwiLypcbipcdFNBTEVTIERBWSBUUkFOU0FDVElPTlNcbipcbipcdFRoaXMgbW9kdWxlIGlzIGRlc2lnbmVkIHRvIFxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdjbmUnKVxuXHQuZGlyZWN0aXZlKCdzYWxlc0RheVR4cycsIHNhbGVzRGF5VHhzKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBzYWxlc0RheVR4cygpIHtcblx0Ly9kZWZpbmUgdGhlIGRpcmVjdGl2ZVxuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiBcIkFFQ01cIixcblx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvc2FsZXMtZGF5LXRyYW5zYWN0aW9ucy5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7XG5cdFx0XHR0eHNMaXN0OiBcIj1cIlxuXHRcdH0sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogc2FsZXNEYXlUeHNDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7fVxuXG5cdHNhbGVzRGF5VHhzQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZyddO1xuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gc2FsZXNEYXlUeHNDb250cm9sbGVyKCRzY29wZSwgJGxvZykge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRjb25zb2xlLmxvZygnaW4gdGhlIHNhbGVzRGF5VHhzQ29udHJvbGxlcicpO1xuXHR9XG5cblx0Ly9wYXNzIGl0IGJhY2tcblx0cmV0dXJuIGRpcmVjdGl2ZTtcbn0iLCIvKlxuKlx0QkFDS0VORCBEQVRBIFNFUlZJQ0VcbipcbiovXG5cbi8vZGVmaW5lIG1vZHVsZVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ2NuZScpXG4gICAgLmZhY3RvcnkoJ2RhdGFTZXJ2aWNlJywgZGF0YVNlcnZpY2UpO1xuXG4vL2RlcGVuZGVuY3kgaW5qZWN0aW9uc1xuZGF0YVNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnXTtcblxuLy9kZWNsYXJlIHRoZSBzZXJ2aWNlXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGRhdGFTZXJ2aWNlKCRodHRwKSB7XG5cblx0Ly9kZWZpbmUgbWV0aG9kc1xuXHR2YXIgZGF0YVNlcnZpY2UgPSB7XG5cdFx0c2FsZXNfZGF5czoge1xuXHRcdFx0Y29tcGlsZV9iYXRjaDogY29tcGlsZV9uZXdfc2FsZXNfZGF5X2JhdGNoXG5cdFx0fVxuXHR9O1xuXG5cdC8vXHRURVNUIEZVTkNUSU9OXG5cdGZ1bmN0aW9uIGNvbXBpbGVfbmV3X3NhbGVzX2RheV9iYXRjaChwYXJhbXMpIHtcblx0XHRcblx0XHQvL2NvbnNvbGUubG9nKCd0ZXN0aW5nIGRhdGFTZXJ2aWNlJyk7XG5cblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL3RyeSBQT1NUXG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ1BPU1QnLFxuXHRcdFx0XHR1cmw6ICcvYXBpL3NhbGVzX2RheXMvY29tcGlsZV9uZXdfc2FsZXNfZGF5c19iYXRjaCcsXG5cdFx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG5cdFx0XHRcdH0sXHRcblx0XHRcdFx0ZGF0YTogcGFyYW1zXG5cdFx0XHR9KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xuXHRcdFx0XHRcblx0XHRcdFx0cmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0XG5cdFx0XHR9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKGVycm9yKSB7XG5cdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHR9O1xuXG5cdC8vdHVybiB0aGUgbWV0aG9kXG4gICAgcmV0dXJuIGRhdGFTZXJ2aWNlO1x0XG59O1xuXG4iLCIvKlxuKlxuKlxuKi9cblxuLy9kZWZpbmUgbW9kdWxlXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnY25lJylcbiAgICAuZmFjdG9yeSgnZmlyZWJhc2VTZXJ2aWNlJywgZmlyZWJhc2VTZXJ2aWNlKTtcblxuLy9kZXBlbmRlbmN5IGluamVjdGlvbnNcbmZpcmViYXNlU2VydmljZS4kaW5qZWN0ID0gWyckZmlyZWJhc2UnLCAnJGZpcmViYXNlT2JqZWN0JywgJyRmaXJlYmFzZUFycmF5J107XG5cbi8vZGVjbGFyZSB0aGUgc2VydmljZVxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBmaXJlYmFzZVNlcnZpY2UoJGZpcmViYXNlLCAkZmlyZWJhc2VPYmplY3QsICRmaXJlYmFzZUFycmF5KSB7XG5cblx0Ly9kZWZpbmUgbWV0aG9kc1xuXHR2YXIgRkJTZXJ2aWNlID0ge1xuXHRcdGdldDoge1xuXHRcdFx0Y3VzdG9tZXJfbGlzdDogZ2V0X2N1c3RvbWVyX2xpc3Rcblx0XHR9LFxuXHRcdGF1dGhVc2VyOiB7XG5cdFx0XHRlbWFpbDogYXV0aFVzZXJfZW1haWxcblx0XHR9LFxuXHRcdGNvbXBpbGU6IHtcblx0XHRcdGN1c3RvbWVyX3NhbGVzX2RheXM6IGNvbXBpbGVfY3VzdG9tZXJfc2FsZXNfZGF5c1xuXHRcdH0sXG5cdFx0dGVzdDogdGVzdFxuXHR9O1xuXG5cdC8vXHRBVVRIRU5USUNBVEUgVVNFUlxuXHRmdW5jdGlvbiBhdXRoVXNlcl9lbWFpbChlbWFpbCwgcGFzc3dvcmQpIHtcblx0XHRcblx0XHRjb25zb2xlLmxvZygnYXV0aGVudGljYXRpbmcgdXNlcicpXG5cblx0XHQvL3JldHVybiBhc3luYyB3b3JrXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0ZmlyZWJhc2UuYXV0aCgpLnNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCkudGhlbihmdW5jdGlvbiBzdWNlc3Mocykge1xuXG5cdFx0XHRcdHJlc29sdmUocyk7XG5cblx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdC8vIEhhbmRsZSBFcnJvcnMgaGVyZS5cblx0XHRcdFx0dmFyIGVycm9yQ29kZSA9IGVycm9yLmNvZGU7XG5cdFx0XHRcdHZhciBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuXHRcdFx0XHRyZWplY3Qoe2NvZGU6IGVycm9yQ29kZSAsIG1lc3NhZ2U6IGVycm9yTWVzc2FnZX0pO1xuXG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHR9O1xuXG5cdC8vXHRHRVQgQ1VTVE9NRVIgTElTVFxuXHRmdW5jdGlvbiBnZXRfY3VzdG9tZXJfbGlzdCgpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblxuXHRcdC8vY29uc29sZS5sb2coJ2dldHRpbmcgY3VzdG9tZXIgbGlzdCcpO1xuXG5cdFx0Ly9yZXR1cm4gYXN5bmMgd29ya1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgICBcblx0ICAgICAgICAvL3ZhciB0ZXN0ID0gXG5cblx0ICAgICAgICAvL2hpdCB0aGUgc2VydmVyIGZvciB0aGUgXG5cdCAgICAgICAgcmVzb2x2ZShbXCJvbmVcIiwgXCJ0d29cIiwgJ3RocmVlJ10pO1xuXG5cdCAgICB9KTtcblx0fVxuXG5cdC8vXHRDT01QTElMRSBDVVNUT01FUiBTQUxFUyBEQVlTXG5cdGZ1bmN0aW9uIGNvbXBpbGVfY3VzdG9tZXJfc2FsZXNfZGF5cyhjdXN0b21lcl9pZCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFxuXHR9O1x0XG5cblxuXHQvL1x0VEVTVCBGVU5DVElPTlxuXHRmdW5jdGlvbiB0ZXN0KCkgeyByZXR1cm4oJ2dvb2QgdGVzdCBmcm9tIEZCIFNlcnZpY2UnKTsgfTtcblxuXHQvL3R1cm4gdGhlIG1ldGhvZFxuICAgIHJldHVybiBGQlNlcnZpY2U7XHRcbn07XG5cbiIsIi8qXG4qXHRST1VURVMtQ09ORklHXG4qXG4qXHRUaGlzIG1vZHVsZSBzZXRzIHVwIGFsbCB0aGUgcmVxdWlyZWQgYW5ndWxhciByb3V0ZXMgZm9yIHRoaXMgd2ViIGFwcC5cbiovXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnY25lJylcbiAgICAuY29uZmlnKGNvbmZpZyk7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gY29uZmlnKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuXHQkbG9jYXRpb25Qcm92aWRlci5oYXNoUHJlZml4KCcnKTtcbiAgICAkcm91dGVQcm92aWRlclxuXHQvL1BVQkxJQyBST1VURVNcbiAgICAud2hlbignLycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9sYW5kaW5nUGFnZS5odG0nLCAgICAgIC8vJ3ZpZXdzL21haW5QYWdlLmh0bSdcbiAgICAgICAgY29udHJvbGxlcjogJ2xhbmRpbmdDb250cm9sbGVyJywgICAgICAgICAgIC8vJ21haW5Db250cm9sbGVyJ1xuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvY3VzdG9tZXJzJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2N1c3RvbWVyc1BhZ2UuaHRtJywgICAgICAvLyd2aWV3cy9tYWluUGFnZS5odG0nXG4gICAgICAgIGNvbnRyb2xsZXI6ICdjdXN0b21lcnNDb250cm9sbGVyJywgICAgICAgICAgIC8vJ21haW5Db250cm9sbGVyJ1xuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICBjdXN0b21lckxpc3Q6IGN1c3RvbWVyTGlzdFxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL3NhbGVzZGF5cycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9zYWxlc0RheXNQYWdlLmh0bScsICAgICAgLy8ndmlld3MvbWFpblBhZ2UuaHRtJ1xuICAgICAgICBjb250cm9sbGVyOiAnc2FsZXNEYXlzQ29udHJvbGxlcicsICAgICAgICAgICAvLydtYWluQ29udHJvbGxlcidcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAud2hlbignL2xvZ2luJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2xvZ2luUGFnZS5odG0nLCAgICAgIC8vJ3ZpZXdzL21haW5QYWdlLmh0bSdcbiAgICAgICAgY29udHJvbGxlcjogJ2xvZ2luQ29udHJvbGxlcicsICAgICAgICAgICAvLydtYWluQ29udHJvbGxlcidcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcblx0Lm90aGVyd2lzZSh7XG4gICAgICAgIHJlZGlyZWN0VG86ICcvJ1xuICAgIH0pO1xufVxuXG4vKlxuKiAgIFJFUVVJUkVEIEZVTkNUSU9OU1xuKlxuKi9cblxuLy8gIENVU1RPTUVSUyBMSVNUXG5mdW5jdGlvbiBjdXN0b21lckxpc3QoKSB7XG4gICAgXG4gICAgLy9yZXR1cm4gdGhlIHByb21pc2VcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIC8vaGl0IHRoZSBzZXJ2ZXIgZm9yIHRoZSBcbiAgICAgICAgcmVzb2x2ZSgnZ29vZCB0ZXN0Jyk7XG4gICAgfSk7XG5cbn07XG5cbiJdfQ==
