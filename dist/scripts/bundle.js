config.$inject=["$routeProvider","$locationProvider"];var ahNuts=angular.module("cne",["ngRoute","firebase","ngSanitize"]);function aSalesdayController(e,t,s,o){var n="sales_days/"+s.salesdayid;this.salesdaySelected=s.salesdayid,this.currentCME=o(firebase.database().ref().child(n)),t.info("in a salesday controller")}function cashDrawerAssignmentsController(e,t,s,o,n,r){var a=this,l=new Date;a.sqrLocations=n(firebase.database().ref().child("reference_lists/sqr_locations")),a.sqrEmployees=n(firebase.database().ref().child("reference_lists/sqr_employees")),a.searchlist={times:{start:l,end:l}},a.cashDrawerList=n(firebase.database().ref().child("sqr_cash_drawers")),a.cmeList=[{test:"test"},{test:"test"},{test:"test"}],a.selected={location:"Oregon"},t.info("in the cash drawer assignment controller",r)}function cmeScheduleController(e,t,s,o,n){this.calendarDays=n(firebase.database().ref().child("calender/2018")),t.info("in the CME Schedule controller")}function customersController(e,t,s,o,n,r,a){var l=this;l.customerList=a(firebase.database().ref().child("customers")),l.customerSalesDays=[],l.selectedCustomer={seasons:{2018:{id:2018}}},l.testList=["a","b","c"],l.state={selected:{customer:{$index:"",$id:""},salesday:{$index:"test",$id:"test"}}},t.info("in the customers controller"),l.selectCustomer=function(e){l.state.selected.customer.$index=e,l.state.selected.customer.$id=l.customerList[e].$id,l.selectedCustomer=r(firebase.database().ref().child("customers").child(l.customerList[e].$id)),l.customerSalesDays=o.compile.customer_sales_days(l.state.selected.customer.$id)},l.updateCustomer=function(){l.selectedCustomer.$save().then(function(e){console.log("updated record successfully")}).catch(function(e){console.log("error updating record",e)})},l.changeRecord=function(e){l.state.selected.customer.$index;switch({prev:0,next:1}[e]){case 0:l.selectCustomer(l.state.selected.customer.$index-1);break;case 1:l.selectCustomer(l.state.selected.customer.$index+1)}},l.generate_bulk_salesdays=function(){console.log("generating bulk salesdays",l.selectedCustomer.sales_days)}}function landingController(e,t){t.info("in the landing controller")}function loginController(e,t,s){var o=this;o.credentials={username:"",password:""},o.active={username:!1,password:!1},o.submitCreds=function(e,t){console.log("submitCreds clicked"),s.authUser.email(e,t).then(function(e){console.log("was success",e)}).catch(function(e){console.log("Error:",e)})},t.info("in the login controller")}function salesDaysController(t,e,s,o,n,r,a){var i=this;i.salesdaysList=o(firebase.database().ref().child("sales_days")),i.selectedRecord={id:"2039752"},i.testCustomers=["Beaverton","Orenco"],i.testSeasons=["2018","2017"],i.testTimes=["9:00 AM","9:15 AM","9:30 AM","9:45 AM"],i.scheduling_params={customer:"",customer_id:"",season:"",bookend_dates:{first:"",last:""},repeats:"",event_days:{Mon:!1,Tue:!1,Wed:!1,Thu:!1,Fri:!1,Sat:!1,Sun:!1},same_day_load_in_out:!0,schedule:{load_in:"",load_out:"",open:"",close:"",sales_start:"",sales_end:""}},i.tempIterations=[],i.tempTimes={load_in:"",load_out:"",open:"",close:"",sales_start:"",sales_end:""},e.info("in the sales days controller"),i.updateRecord=function(e){console.log("got this id",e)},i.addSalesDay=function(){i.salesdaysList.$add({date:(new Date).toISOString(),schedule:{load_in:{datetime:"",sales_day_id:""},load_out:{datetime:"",sales_day_id:""},open:"",close:"",sales_start:"",sales_end:""},customer:"",season:{name:"",frequency:"",instance:0,total:0}}).then(function(e){console.log(e.key),i.selectedRecord=n(firebase.database().ref().child("sales_days").child(e.key)),console.log(i.selectedRecord)}).catch(function(e){console.log("error",e)})},i.generateSalesDays=function(){var e;(e=i.scheduling_params,new Promise(function(t,s){a.sales_days.compile_batch(e).then(function(e){t(e)}).catch(function(e){s(e)})})).then(function(e){console.log("successfully built",e),i.tempIterations=e,t.$apply()}).catch(function(e){console.log(e)})},i.foramtTime=function(e){console.log("formatting time",e);var t=new Date,s=t.getFullYear(),o=t.getMonth(),n=t.getDate(),r=i.tempTimes[e].split(":"),a=r[1].split(" "),l=parseInt(r[0]),c=a[0];"PM"==a[1]&&(l+=12).toString(),o<10&&(o="0"+o),n<10&&(n="0"+n),l<10&&(l="0"+l),i.scheduling_params.schedule[e]=s+"-"+o+"-"+n+"T"+l+":"+c+":00-07:00"},i.saveSalesDays=function(){i.tempIterations.forEach(function(e){i.salesdaysList.$add(e).then(function(e){var t=e.key;console.log(t)})})}}function squareTxsController(s,e,t,o,n,r,a){var l=this,c=moment(new Date).subtract(1,"day"),i=a.sqr_locations.list(),d=a.sqr_employees.list();function u(){var e=moment(l.selectedDate).hours(23).minutes(59).seconds(59).format(),t=moment(l.selectedDate).format();a.sqr_txs.full_day(l.selectedLocation.id,t,e).then(function(e){console.log("got a response with",e.length,"records"),l.daystransactions=e,s.$apply()}).catch(function(e){console.log("ERROR",e)})}l.selectedLocation={name:"Oregon",id:""},l.selectedDate=new Date(c.format("MM-DD-YYYY")),l.dayHrs=[1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11,12],l.daystransactions=[],e.info("in a square Txs controller",c.format()),l.dayChange=function(e){var t=moment(new Date(l.selectedDate));switch({"-":0,"+":1}[e]){case 0:t.subtract(1,"day");break;case 1:t.add(1,"day")}l.selectedDate=new Date(t.format("MM-DD-YYYY")),u()},l.employeeName=function(s){var o="";return Object.keys(l.sqrEmployees).forEach(function(e){var t=l.sqrEmployees[e].first_name+" "+l.sqrEmployees[e].last_name;l.sqrEmployees[e].id==s&&(o=t)}),o},Promise.all([i,d]).then(function(e){l.sqrLocations=e[0],l.sqrEmployees=e[1],console.log(l.sqrLocations),console.log(l.sqrEmployees),l.sqrLocations.forEach(function(e){e.name==l.selectedLocation.name&&(l.selectedLocation.id=e.id)}),u()}).catch(function(e){console.log("error",e)})}function customerList(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/customer-list.directive.htm",replace:!0,scope:{},link:t,controller:s,controllerAs:"vm",bindToController:!0};function t(e,t,s,o){}function s(e,t){console.log("in costomer List controller")}return s.$inject=["$scope","$log"],e}function customerSalesDays(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/customer-sales-days.directive.htm",replace:!0,scope:{salesdaysList:"=",salesdaySelected:"="},link:t,controller:s,controllerAs:"vm",bindToController:!0};function t(s,e,t,o){s.$watch("vm.salesdaysList",function(e,t){e&&s.loadSaleDays()},!0)}function s(e,t,n){var r=this;r.detailedSalesDaysList=[],console.log("in the customerSalesDaysController"),e.loadSaleDays=function(){var s=[];Object.keys(r.salesdaysList).forEach(function(e){var t,o;s.push((t=r.salesdaysList[e],o="sales_days/"+t,new Promise(function(t,s){n.get.a_record(o).then(function(e){t(e)}).catch(function(e){s(e)})})))}),Promise.all(s).then(function(e){r.detailedSalesDaysList=e}).catch(function(e){console.log("error",e)})},e.salesDaySelected=function(e){r.salesdaySelected=r.detailedSalesDaysList[e].$id}}return s.$inject=["$scope","$log","firebaseService"],e}function loginPassword(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/login-password.directive.htm",replace:!0,scope:{password:"=",active:"="},link:t,controller:s,controllerAs:"vm",bindToController:!0};function t(e,t,s,o){}function s(e,t){}return s.$inject=["$scope","$log"],e}function loginUsername(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/login-username.directive.htm",replace:!0,scope:{username:"=",active:"="},link:t,controller:s,controllerAs:"vm",bindToController:!0};function t(e,t,s,o){}function s(e,t){}return s.$inject=["$scope","$log"],e}function salesDayTxs(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/sales-day-transactions.directive.htm",replace:!0,scope:{txsList:"=",salesdaySelected:"="},link:t,controller:s,controllerAs:"vm",bindToController:!0};function t(s,e,t,o){s.$watch("vm.salesdaySelected",function(e,t){e&&s.loadSDTxs()},!0)}function s(s,e,o){var n=this;function r(e,t){e+=t;return new Promise(function(t,s){o.get.a_record(e).then(function(e){t(e)}).catch(function(e){s(e)})})}n.promiseList=[],n.detailedTxList=[],console.log("in the salesDayTxsController"),s.loadSDTxs=function(){r("sales_days/",n.salesdaySelected).then(function(t){Object.keys(t.transactions).forEach(function(e){"placeholder"!=t.transactions[e]&&n.promiseList.push(r("transactions/",t.transactions[e]))}),Promise.all(n.promiseList).then(function(e){n.detailedTxList=e,s.$apply()}).catch(function(e){console.log("error",e)})}).catch(function(e){console.log("error",e)})}}return s.$inject=["$scope","$log","firebaseService"],e}function dataService(i){return{sqr_locations:{list:function(){var e={};return console.log("getting locations list"),new Promise(function(t,s){i({method:"POST",url:"/squarepos/locations",headers:{"Content-Type":"application/json"},data:e}).then(function(e){t(e.data)},function(e){s(e)})})}},sqr_employees:{list:function(e,t,s,o,n,r,a,l){var c={status:e,external_id:t,limit:s,order:o,begin_updated_at:n,end_updated_at:r,begin_created_at:a,end_created_at:l};return console.log("getting employees list"),new Promise(function(t,s){i({method:"POST",url:"/squarepos/employees",headers:{"Content-Type":"application/json"},data:c}).then(function(e){t(e.data)},function(e){s(e)})})}},sqr_txs:{full_day:function(e,t,s){var o={location:e,start:t,end:s};return console.log("getting day's Transactions"),new Promise(function(t,s){i({method:"POST",url:"/squarepos/txs",headers:{"Content-Type":"application/json"},data:o}).then(function(e){t(e.data)},function(e){s(e)})})}},sales_days:{compile_batch:function(e){return new Promise(function(t,s){i({method:"POST",url:"/api/sales_days/compile_new_sales_days_batch",headers:{"Content-Type":"application/json"},data:e}).then(function(e){t(e.data)},function(e){s(e)})})}}}}function firebaseService(e,n,t){return{get:{customer_list:function(){return new Promise(function(e,t){})},a_record:function(o){return new Promise(function(t,s){var e=n(firebase.database().ref().child(o));e.$loaded().then(function(e){t(e)}).catch(function(e){s(e)})})}},authUser:{email:function(e,s){return console.log("authenticating user"),new Promise(function(t,o){firebase.auth().signInWithEmailAndPassword(e,s).then(function(e){t(e)}).catch(function(e){var t=e.code,s=e.message;o({code:t,message:s})})})}},compile:{customer_sales_days:function(e){}},test:function(){return"good test from FB Service"}}}function config(e,t){t.hashPrefix(""),e.when("/",{templateUrl:"views/landingPage.htm",controller:"landingController",controllerAs:"vm"}).when("/customers",{templateUrl:"views/customersPage.htm",controller:"customersController",controllerAs:"vm",resolve:{customerList:customerList}}).when("/salesdays",{templateUrl:"views/salesDaysPage.htm",controller:"salesDaysController",controllerAs:"vm"}).when("/salesdays/:salesdayid",{templateUrl:"views/aSalesdayPage.htm",controller:"aSalesdayController",controllerAs:"vm"}).when("/cash_drawer_assignments",{templateUrl:"views/cashDrawerAssignmentsPage.htm",controller:"cashDrawerAssignmentsController",controllerAs:"vm"}).when("/square_txs",{templateUrl:"views/squareTxsPage.htm",controller:"squareTxsController",controllerAs:"vm"}).when("/login",{templateUrl:"views/loginPage.htm",controller:"loginController",controllerAs:"vm"}).when("/cme_schedule",{templateUrl:"views/cmeSchedulingPage.htm",controller:"cmeScheduleController",controllerAs:"vm"}).otherwise({redirectTo:"/"})}function customerList(){return new Promise(function(e,t){e("good test")})}angular.module("cne").controller("aSalesdayController",aSalesdayController),aSalesdayController.$inject=["$scope","$log","$routeParams","$firebaseObject"],angular.module("cne").controller("cashDrawerAssignmentsController",cashDrawerAssignmentsController),cashDrawerAssignmentsController.$inject=["$scope","$log","$firebase","$firebaseObject","$firebaseArray","dataService"],angular.module("cne").controller("cmeScheduleController",cmeScheduleController),cmeScheduleController.$inject=["$scope","$log","$firebase","$firebaseObject","$firebaseArray"],angular.module("cne").controller("customersController",customersController),customersController.$inject=["$scope","$log","customerList","firebaseService","$firebase","$firebaseObject","$firebaseArray"],angular.module("cne").controller("landingController",landingController),landingController.$inject=["$scope","$log"],angular.module("cne").controller("loginController",loginController),loginController.$inject=["$scope","$log","firebaseService"],angular.module("cne").controller("salesDaysController",salesDaysController),salesDaysController.$inject=["$scope","$log","$firebase","$firebaseArray","$firebaseObject","$http","dataService"],angular.module("cne").controller("squareTxsController",squareTxsController),squareTxsController.$inject=["$scope","$log","$routeParams","$firebase","$firebaseObject","$firebaseArray","dataService"],angular.module("cne").directive("customerList",customerList),angular.module("cne").directive("customerSalesDays",customerSalesDays),angular.module("cne").directive("loginPassword",loginPassword),angular.module("cne").directive("loginUsername",loginUsername),angular.module("cne").directive("salesDayTxs",salesDayTxs),angular.module("cne").factory("dataService",dataService),dataService.$inject=["$http"],angular.module("cne").factory("firebaseService",firebaseService),firebaseService.$inject=["$firebase","$firebaseObject","$firebaseArray"],angular.module("cne").config(config);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMvd2ViYXBwLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9hLXNhbGVzZGF5LWNvbnRyb2xsZXIuanMiLCJzY3JpcHRzL2NvbnRyb2xsZXJzL2Nhc2gtZHJhd2VyLWFzc2lnbm1lbnRzLWNvbnRyb2xsZXIuanMiLCJzY3JpcHRzL2NvbnRyb2xsZXJzL2NtZS1zY2hlZHVsZS1jb250cm9sbGVyLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9jdXN0b21lcnMtY29udHJvbGxlci5qcyIsInNjcmlwdHMvY29udHJvbGxlcnMvbGFuZGluZy1jb250cm9sbGVyLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9sb2dpbi1jb250cm9sbGVyLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9zYWxlc2RheXMtY29udHJvbGxlci5qcyIsInNjcmlwdHMvY29udHJvbGxlcnMvc3F1YXJlLXR4cy1jb250cm9sbGVyLmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL2N1c3RvbWVyLWxpc3QuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvY3VzdG9tZXItc2FsZXMtZGF5cy5kaXJlY3RpdmUuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvbG9naW4tcGFzc3dvcmQuZGlyZWN0aXZlLmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL2xvZ2luLXVzZXJuYW1lLmRpcmVjdGl2ZS5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9zYWxlcy1kYXktdHJhbnNhY3Rpb25zLmRpcmVjdGl2ZS5qcyIsInNjcmlwdHMvZmFjdG9yaWVzL2RhdGEuc2VydmljZS5qcyIsInNjcmlwdHMvZmFjdG9yaWVzL2ZpcmViYXNlLnNlcnZpY2UuanMiLCJzY3JpcHRzL3JvdXRlcy9yb3V0ZXMtY29uZmlnLmpzIl0sIm5hbWVzIjpbImFoTnV0cyIsImFuZ3VsYXIiLCJtb2R1bGUiLCJhU2FsZXNkYXlDb250cm9sbGVyIiwiJHNjb3BlIiwiJGxvZyIsIiRyb3V0ZVBhcmFtcyIsIiRmaXJlYmFzZU9iamVjdCIsImRiUGF0aCIsInNhbGVzZGF5aWQiLCJ0aGlzIiwic2FsZXNkYXlTZWxlY3RlZCIsImN1cnJlbnRDTUUiLCJmaXJlYmFzZSIsImRhdGFiYXNlIiwicmVmIiwiY2hpbGQiLCJpbmZvIiwiY2FzaERyYXdlckFzc2lnbm1lbnRzQ29udHJvbGxlciIsIiRmaXJlYmFzZSIsIiRmaXJlYmFzZUFycmF5IiwiZGF0YVNlcnZpY2UiLCJ2bSIsImN1cnJlbnRUaW1lIiwiRGF0ZSIsInNxckxvY2F0aW9ucyIsInNxckVtcGxveWVlcyIsInNlYXJjaGxpc3QiLCJ0aW1lcyIsInN0YXJ0IiwiZW5kIiwiY2FzaERyYXdlckxpc3QiLCJjbWVMaXN0IiwidGVzdCIsInNlbGVjdGVkIiwibG9jYXRpb24iLCJjbWVTY2hlZHVsZUNvbnRyb2xsZXIiLCJjYWxlbmRhckRheXMiLCJjdXN0b21lcnNDb250cm9sbGVyIiwiY3VzdG9tZXJMaXN0IiwiZmlyZWJhc2VTZXJ2aWNlIiwiY3VzdG9tZXJTYWxlc0RheXMiLCJzZWxlY3RlZEN1c3RvbWVyIiwic2Vhc29ucyIsIjIwMTgiLCJpZCIsInRlc3RMaXN0Iiwic3RhdGUiLCJjdXN0b21lciIsIiRpbmRleCIsIiRpZCIsInNhbGVzZGF5Iiwic2VsZWN0Q3VzdG9tZXIiLCJpbmRleF9pZCIsImNvbXBpbGUiLCJjdXN0b21lcl9zYWxlc19kYXlzIiwidXBkYXRlQ3VzdG9tZXIiLCIkc2F2ZSIsInRoZW4iLCJzIiwiY29uc29sZSIsImxvZyIsImNhdGNoIiwiZSIsImNoYW5nZVJlY29yZCIsInNlbGVjdCIsInByZXYiLCJuZXh0IiwiZ2VuZXJhdGVfYnVsa19zYWxlc2RheXMiLCJzYWxlc19kYXlzIiwibGFuZGluZ0NvbnRyb2xsZXIiLCJsb2dpbkNvbnRyb2xsZXIiLCJjcmVkZW50aWFscyIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJhY3RpdmUiLCJzdWJtaXRDcmVkcyIsInBhc3MiLCJhdXRoVXNlciIsImVtYWlsIiwic2FsZXNEYXlzQ29udHJvbGxlciIsIiRodHRwIiwic2FsZXNkYXlzTGlzdCIsInNlbGVjdGVkUmVjb3JkIiwidGVzdEN1c3RvbWVycyIsInRlc3RTZWFzb25zIiwidGVzdFRpbWVzIiwic2NoZWR1bGluZ19wYXJhbXMiLCJjdXN0b21lcl9pZCIsInNlYXNvbiIsImJvb2tlbmRfZGF0ZXMiLCJmaXJzdCIsImxhc3QiLCJyZXBlYXRzIiwiZXZlbnRfZGF5cyIsIk1vbiIsIlR1ZSIsIldlZCIsIlRodSIsIkZyaSIsIlNhdCIsIlN1biIsInNhbWVfZGF5X2xvYWRfaW5fb3V0Iiwic2NoZWR1bGUiLCJsb2FkX2luIiwibG9hZF9vdXQiLCJvcGVuIiwiY2xvc2UiLCJzYWxlc19zdGFydCIsInNhbGVzX2VuZCIsInRlbXBJdGVyYXRpb25zIiwidGVtcFRpbWVzIiwidXBkYXRlUmVjb3JkIiwicmVjb3JkX2lkIiwiYWRkU2FsZXNEYXkiLCIkYWRkIiwiZGF0ZSIsInRvSVNPU3RyaW5nIiwiZGF0ZXRpbWUiLCJzYWxlc19kYXlfaWQiLCJuYW1lIiwiZnJlcXVlbmN5IiwiaW5zdGFuY2UiLCJ0b3RhbCIsImtleSIsImdlbmVyYXRlU2FsZXNEYXlzIiwicGFyYW1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJjb21waWxlX2JhdGNoIiwiJGFwcGx5IiwiZm9yYW10VGltZSIsInNlY3Rpb24iLCJ0b2RheSIsInllYXIiLCJnZXRGdWxsWWVhciIsIm1vbnRoIiwiZ2V0TW9udGgiLCJkYXkiLCJnZXREYXRlIiwidGltZVNwbGl0Iiwic3BsaXQiLCJtaW5TcGxpdCIsImhvdXIiLCJwYXJzZUludCIsIm1pbnV0ZSIsInRvU3RyaW5nIiwic2F2ZVNhbGVzRGF5cyIsImZvckVhY2giLCJjbWVfaXRlcmF0aW9uIiwic3F1YXJlVHhzQ29udHJvbGxlciIsInllc3RlcmRheSIsIm1vbWVudCIsInN1YnRyYWN0Iiwic3FyX2xvY2F0aW9ucyIsImxpc3QiLCJzcXJfZW1wbG95ZWVzIiwidXBkYXRlVHhMaXN0IiwiZW5kT2ZEYXkiLCJzZWxlY3RlZERhdGUiLCJob3VycyIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwiZm9ybWF0Iiwic3RhcnRPZkRheSIsInNxcl90eHMiLCJmdWxsX2RheSIsInNlbGVjdGVkTG9jYXRpb24iLCJsZW5ndGgiLCJkYXlzdHJhbnNhY3Rpb25zIiwiZGF5SHJzIiwiZGF5Q2hhbmdlIiwiZGlyZWN0aW9uIiwiY3VycmVudERhdGUiLCItIiwiKyIsImFkZCIsImVtcGxveWVlTmFtZSIsImVtcGxveWVlX2lkIiwiZW1wbG95ZWVfbmFtZSIsIk9iamVjdCIsImtleXMiLCJuZXdOYW1lIiwiZmlyc3RfbmFtZSIsImxhc3RfbmFtZSIsImFsbCIsImRpcmVjdGl2ZSIsInJlc3RyaWN0IiwidGVtcGxhdGVVcmwiLCJyZXBsYWNlIiwic2NvcGUiLCJsaW5rIiwibGlua0Z1bmMiLCJjb250cm9sbGVyIiwiY3VzdG9tZXJMaXN0Q29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsImJpbmRUb0NvbnRyb2xsZXIiLCJlbCIsImF0dHIiLCJjdHJsIiwiJGluamVjdCIsImN1c3RvbWVyU2FsZXNEYXlzQ29udHJvbGxlciIsIiR3YXRjaCIsIm5ld1ZhbHVlIiwib2xkVmFsdWUiLCJsb2FkU2FsZURheXMiLCJkZXRhaWxlZFNhbGVzRGF5c0xpc3QiLCJhbGxQcm9taXNlcyIsInBhdGgiLCJwdXNoIiwiZ2V0IiwiYV9yZWNvcmQiLCJzYWxlc0RheVNlbGVjdGVkIiwiaW5kZXgiLCJsb2dpblBhc3N3b3JkIiwibG9naW5QYXNzd29yZENvbnRyb2xsZXIiLCJsb2dpblVzZXJuYW1lIiwibG9naW5Vc2VybmFtZUNvbnRyb2xsZXIiLCJzYWxlc0RheVR4cyIsInR4c0xpc3QiLCJzYWxlc0RheVR4c0NvbnRyb2xsZXIiLCJsb2FkU0RUeHMiLCJsb2FkQVJjcmQiLCJwcm9taXNlTGlzdCIsImRldGFpbGVkVHhMaXN0IiwiZGV0YWlsZWREYXkiLCJ0cmFuc2FjdGlvbnMiLCJwb3N0T2JqZWN0IiwibWV0aG9kIiwidXJsIiwiaGVhZGVycyIsIkNvbnRlbnQtVHlwZSIsImRhdGEiLCJyZXNwb25zZSIsImVycm9yIiwic3RhdHVzIiwiZXh0ZXJuYWxfaWQiLCJsaW1pdCIsIm9yZGVyIiwiYmVnaW5fdXBkYXRlZF9hdCIsImVuZF91cGRhdGVkX2F0IiwiYmVnaW5fY3JlYXRlZF9hdCIsImVuZF9jcmVhdGVkX2F0Iiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsImN1c3RvbWVyX2xpc3QiLCJkZXNpcmVkUmVjb3JkIiwiJGxvYWRlZCIsImF1dGgiLCJzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCIsImVycm9yQ29kZSIsImNvZGUiLCJlcnJvck1lc3NhZ2UiLCJtZXNzYWdlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsImhhc2hQcmVmaXgiLCJ3aGVuIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImZhY3RvcnkiXSwibWFwcGluZ3MiOiJzREFDQSxJQUFBQSxPQUFBQyxRQUFBQyxPQUFBLE1BQUEsQ0FBQSxVQUFBLFdBQUEsZUNNQSxTQUFBQyxvQkFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FHQSxJQUNBQyxFQUFBLGNBQUFGLEVBQUFHLFdBREFDLEtBRUFDLGlCQUFBTCxFQUFBRyxXQUZBQyxLQUlBRSxXQUFBTCxFQUFBTSxTQUFBQyxXQUFBQyxNQUFBQyxNQUFBUixJQUVBSCxFQUFBWSxLQUFBLDRCQ1RBLFNBQUFDLGdDQUFBZCxFQUFBQyxFQUFBYyxFQUFBWixFQUFBYSxFQUFBQyxHQUdBLElBQUFDLEVBQUFaLEtBQ0FhLEVBQUEsSUFBQUMsS0FFQUYsRUFBQUcsYUFBQUwsRUFBQVAsU0FBQUMsV0FBQUMsTUFBQUMsTUFBQSxrQ0FDQU0sRUFBQUksYUFBQU4sRUFBQVAsU0FBQUMsV0FBQUMsTUFBQUMsTUFBQSxrQ0FDQU0sRUFBQUssV0FBQSxDQUNBQyxNQUFBLENBQUFDLE1BQUFOLEVBQUFPLElBQUFQLElBR0FELEVBQUFTLGVBQUFYLEVBQUFQLFNBQUFDLFdBQUFDLE1BQUFDLE1BQUEscUJBQ0FNLEVBQUFVLFFBQUEsQ0FBQSxDQUFBQyxLQUFBLFFBQUEsQ0FBQUEsS0FBQSxR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R0FBLGdCQUFBaUssUUFBQSxDQUFBLFlBQUEsa0JBQUEsa0JDTkF4TSxRQUNBQyxPQUFBLE9BQ0E2UCxPQUFBQSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBNT0RVTEVcbnZhciBhaE51dHMgPSBhbmd1bGFyLm1vZHVsZSgnY25lJywgWyduZ1JvdXRlJywgJ2ZpcmViYXNlJywgJ25nU2FuaXRpemUnXSk7XG4iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnY25lJylcbiAgICAuY29udHJvbGxlcignYVNhbGVzZGF5Q29udHJvbGxlcicsIGFTYWxlc2RheUNvbnRyb2xsZXIpO1xuXG5hU2FsZXNkYXlDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsJyRsb2cnLCAnJHJvdXRlUGFyYW1zJywgJyRmaXJlYmFzZU9iamVjdCddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGFTYWxlc2RheUNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkcm91dGVQYXJhbXMsICRmaXJlYmFzZU9iamVjdCkge1xuXG5cdC8vZGVmaW5lIHZpZXcgbW9kZWwgdmFyaWFibGVcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGRiUGF0aCA9ICdzYWxlc19kYXlzLycgKyAkcm91dGVQYXJhbXMuc2FsZXNkYXlpZDtcblx0dm0uc2FsZXNkYXlTZWxlY3RlZCA9ICRyb3V0ZVBhcmFtcy5zYWxlc2RheWlkO1xuXG5cdHZtLmN1cnJlbnRDTUUgPSAkZmlyZWJhc2VPYmplY3QoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZChkYlBhdGgpKTtcblxuXHQkbG9nLmluZm8oJ2luIGEgc2FsZXNkYXkgY29udHJvbGxlcicpO1x0Ly9UT0RPOiBUQUtFIFRISVMgT1VUIExBVEVSXG5cblx0Ly9kZWZpbmUgbG9jYWwgZnVuY3Rpb25zXG5cblx0Ly9ydW4gdGhlIHRlc3RcblxuXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ2NuZScpXG4gICAgLmNvbnRyb2xsZXIoJ2Nhc2hEcmF3ZXJBc3NpZ25tZW50c0NvbnRyb2xsZXInLCBjYXNoRHJhd2VyQXNzaWdubWVudHNDb250cm9sbGVyKTtcblxuY2FzaERyYXdlckFzc2lnbm1lbnRzQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCckbG9nJywgJyRmaXJlYmFzZScsICckZmlyZWJhc2VPYmplY3QnLCAnJGZpcmViYXNlQXJyYXknLCAnZGF0YVNlcnZpY2UnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjYXNoRHJhd2VyQXNzaWdubWVudHNDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJGZpcmViYXNlLCAkZmlyZWJhc2VPYmplY3QsICRmaXJlYmFzZUFycmF5LCBkYXRhU2VydmljZSkge1xuXG5cdC8vZGVmaW5lIHZpZXcgbW9kZWwgdmFyaWFibGVcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGN1cnJlbnRUaW1lID0gbmV3IERhdGUoKTtcblxuXHR2bS5zcXJMb2NhdGlvbnMgPSAkZmlyZWJhc2VBcnJheShmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigpLmNoaWxkKCdyZWZlcmVuY2VfbGlzdHMvc3FyX2xvY2F0aW9ucycpKTtcblx0dm0uc3FyRW1wbG95ZWVzID0gJGZpcmViYXNlQXJyYXkoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZCgncmVmZXJlbmNlX2xpc3RzL3Nxcl9lbXBsb3llZXMnKSk7XG5cdHZtLnNlYXJjaGxpc3QgPSB7XG5cdFx0dGltZXM6IHsgc3RhcnQ6IGN1cnJlbnRUaW1lLCBlbmQ6IGN1cnJlbnRUaW1lfVxuXHR9XG5cdFxuXHR2bS5jYXNoRHJhd2VyTGlzdCA9ICRmaXJlYmFzZUFycmF5KGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCkuY2hpbGQoJ3Nxcl9jYXNoX2RyYXdlcnMnKSk7XG5cdHZtLmNtZUxpc3QgPSBbe3Rlc3Q6XCJ0ZXN0XCJ9LCB7dGVzdDpcInRlc3RcIn0sIHt0ZXN0OlwidGVzdFwifV07XG5cblx0dm0uc2VsZWN0ZWQgPSB7XG5cdFx0bG9jYXRpb246IFwiT3JlZ29uXCJcblx0fTtcblx0XG5cdC8vbm90aWZ5IGxvY2F0aW9uXG5cdCRsb2cuaW5mbygnaW4gdGhlIGNhc2ggZHJhd2VyIGFzc2lnbm1lbnQgY29udHJvbGxlcicsIGRhdGFTZXJ2aWNlKTtcdC8vVE9ETzogVEFLRSBUSElTIE9VVCBMQVRFUlxuXHRcblx0Ly9kZWZpbmUgbG9jYWwgZnVuY3Rpb25zXG5cbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnY25lJylcbiAgICAuY29udHJvbGxlcignY21lU2NoZWR1bGVDb250cm9sbGVyJywgY21lU2NoZWR1bGVDb250cm9sbGVyKTtcblxuY21lU2NoZWR1bGVDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsJyRsb2cnLCAnJGZpcmViYXNlJywgJyRmaXJlYmFzZU9iamVjdCcsICckZmlyZWJhc2VBcnJheSddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGNtZVNjaGVkdWxlQ29udHJvbGxlcigkc2NvcGUsICRsb2csICRmaXJlYmFzZSwgJGZpcmViYXNlT2JqZWN0LCAkZmlyZWJhc2VBcnJheSkge1xuXG5cdC8vZGVmaW5lIHZpZXcgbW9kZWwgdmFyaWFibGVcblx0dmFyIHZtID0gdGhpcztcblx0dm0uY2FsZW5kYXJEYXlzID0gJGZpcmViYXNlQXJyYXkoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZCgnY2FsZW5kZXIvMjAxOCcpKTtcblx0JGxvZy5pbmZvKCdpbiB0aGUgQ01FIFNjaGVkdWxlIGNvbnRyb2xsZXInKTtcdC8vVE9ETzogVEFLRSBUSElTIE9VVCBMQVRFUlxuXHRcblx0Ly9kZWZpbmUgbG9jYWwgZnVuY3Rpb25zXG5cblx0Ly9ydW4gdGhlIHRlc3RcblxuXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ2NuZScpXG4gICAgLmNvbnRyb2xsZXIoJ2N1c3RvbWVyc0NvbnRyb2xsZXInLCBjdXN0b21lcnNDb250cm9sbGVyKTtcblxuY3VzdG9tZXJzQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCckbG9nJywgJ2N1c3RvbWVyTGlzdCcsICdmaXJlYmFzZVNlcnZpY2UnLCAnJGZpcmViYXNlJywgJyRmaXJlYmFzZU9iamVjdCcsICckZmlyZWJhc2VBcnJheSddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGN1c3RvbWVyc0NvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCBjdXN0b21lckxpc3QsIGZpcmViYXNlU2VydmljZSwgJGZpcmViYXNlLCAkZmlyZWJhc2VPYmplY3QsICRmaXJlYmFzZUFycmF5KSB7XG5cblx0Ly9kZWZpbmUgdmlldyBtb2RlbCB2YXJpYWJsZVxuXHR2YXIgdm0gPSB0aGlzO1xuXHR2bS5jdXN0b21lckxpc3QgPSAkZmlyZWJhc2VBcnJheShmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigpLmNoaWxkKCdjdXN0b21lcnMnKSk7XG5cdHZtLmN1c3RvbWVyU2FsZXNEYXlzID0gW107XG5cdHZtLnNlbGVjdGVkQ3VzdG9tZXIgPSB7IHNlYXNvbnM6IHsgXCIyMDE4XCI6IHsgaWQ6IDIwMTh9IH0gfTtcblx0dm0udGVzdExpc3QgPSBbJ2EnLCAnYicsICdjJ107IC8vJGZpcmViYXNlQXJyYXkoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZCgnY3VzdG9tZXJzJykuY2hpbGQoJ2N1c3RvbWVyX2xpc3QnKSk7XG5cdHZtLnN0YXRlID0ge1xuXHRcdHNlbGVjdGVkOiB7XG5cdFx0XHRjdXN0b21lcjoge1xuXHRcdFx0XHQkaW5kZXg6IFwiXCIsXG5cdFx0XHRcdCRpZDogXCJcIlxuXHRcdFx0fSxcblx0XHRcdHNhbGVzZGF5OiB7XG5cdFx0XHRcdCRpbmRleDogXCJ0ZXN0XCIsXG5cdFx0XHRcdCRpZDogXCJ0ZXN0XCJcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0Ly9pZGVudGlmeSB3aGVyZSB3ZSBhcmVcblx0JGxvZy5pbmZvKCdpbiB0aGUgY3VzdG9tZXJzIGNvbnRyb2xsZXInKTtcdC8vVE9ETzogVEFLRSBUSElTIE9VVCBMQVRFUlxuXHRcblxuXHQvKlxuXHQqXHRMT0NBTCBGVU5DVElPTlMgR08gSEVSRVxuXHQqXG5cdCovXG5cblx0Ly9cdExPQUQgQ1VTVE9NRVIgTElTVFxuXHRmdW5jdGlvbiBsb2FkX2N1c3RvbWVyX2xpc3QoKSB7XG5cdFx0XG5cdFx0Ly90cmFjayBzdGFydGluZyBmdW5jdGlvblxuXHRcdC8vY29uc29sZS5sb2coJ2xvYWRpbmcgdGhlIGN1c3RvbWVyIGxpc3QnKTtcblx0XHRcblx0XHQvL2dhdGhlciB0aGUgZGF0YVxuXHRcdGZpcmViYXNlU2VydmljZS5nZXQuY3VzdG9tZXJfbGlzdCgpLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhzKSB7XG5cdFx0XHRcblx0XHRcdC8vY29uc29sZS5sb2coJ2dvdCB0aGlzIHJlc3BvbnMnLCBzKTtcblx0XHRcdFxuXHRcdFx0Ly93aGVuIHRoZSBsaXN0IGhhcyBiZWVuIGxvYWRlZCB1cGRhdGUgdGhlIHZhcmlhYmxlc1xuXHRcdFx0Ly92bS5jdXN0b21lckxpc3QgPSBzO1xuXHRcdFx0dm0uY3VzdG9tZXJMaXN0ID0gJGZpcmViYXNlQXJyYXkoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZCgnY3VzdG9tZXJzJykuY2hpbGQoJ2N1c3RvbWVyX2xpc3QnKSk7XG5cblx0XHRcdC8vcmVmbGVjdCB0aGUgY2hhbmdlc1xuXHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xuXHRcdFx0Ly9pZiB0aGVyZSB3YXMgYW4gZXJyb3IgdGhyb3cgdGhlIGVycm9yXG5cdFx0XHRjb25zb2xlLmxvZygnZXJyb3InKTtcblx0XHR9KTtcblx0fTtcblxuXHQvKlxuXHQqXHRWSUVXIE1PREVMIEZVTkNUSU9OUyBHTyBIRVJFXG5cdCpcblx0Ki9cdFxuXHQvL1x0U0VMRUNUIENMSUNLRUQgQ1VTVE9NRVJcblx0dm0uc2VsZWN0Q3VzdG9tZXIgPSBmdW5jdGlvbihpbmRleF9pZCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZtLnN0YXRlLnNlbGVjdGVkLmN1c3RvbWVyLiRpbmRleCA9IGluZGV4X2lkO1xuXHRcdHZtLnN0YXRlLnNlbGVjdGVkLmN1c3RvbWVyLiRpZCA9IHZtLmN1c3RvbWVyTGlzdFtpbmRleF9pZF0uJGlkO1xuXHRcdHZtLnNlbGVjdGVkQ3VzdG9tZXIgPSAkZmlyZWJhc2VPYmplY3QoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZCgnY3VzdG9tZXJzJykuY2hpbGQodm0uY3VzdG9tZXJMaXN0W2luZGV4X2lkXS4kaWQpKTtcblx0XHR2bS5jdXN0b21lclNhbGVzRGF5cyA9IGZpcmViYXNlU2VydmljZS5jb21waWxlLmN1c3RvbWVyX3NhbGVzX2RheXModm0uc3RhdGUuc2VsZWN0ZWQuY3VzdG9tZXIuJGlkKTtcblx0fTtcblxuXHQvL1x0VVBEQVRFIFRIRSBDVVNUT01FUiBSRUNPUkRcblx0dm0udXBkYXRlQ3VzdG9tZXIgPSBmdW5jdGlvbigpIHtcblx0XHR2bS5zZWxlY3RlZEN1c3RvbWVyLiRzYXZlKCkudGhlbihmdW5jdGlvbiBzdWNjZXMocykge1xuXHRcdFx0Y29uc29sZS5sb2coJ3VwZGF0ZWQgcmVjb3JkIHN1Y2Nlc3NmdWxseScpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdlcnJvciB1cGRhdGluZyByZWNvcmQnLCBlKTtcblx0XHR9KTtcblx0fTtcblxuXHQvL1x0TU9WRSBUTyBUSEUgTkVYVCBDVVNUT01FUlxuXHR2bS5jaGFuZ2VSZWNvcmQgPSBmdW5jdGlvbihzZWxlY3QpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgb3B0biA9IHsgXCJwcmV2XCI6IDAsIFwibmV4dFwiOiAxIH07XG5cdFx0dmFyIGluZGV4X2lkID0gdm0uc3RhdGUuc2VsZWN0ZWQuY3VzdG9tZXIuJGluZGV4O1xuXG5cdFx0Ly9jb25zb2xlLmxvZyhpbmRleF9pZCk7XG5cblx0XHRzd2l0Y2gob3B0bltzZWxlY3RdKSB7XG5cdFx0XHRjYXNlIDA6XG5cdFx0XHRcdC8vY29uc29sZS5sb2coJ3ByZXZpb3VzIHJlY29yZCcpO1xuXHRcdFx0XHR2bS5zZWxlY3RDdXN0b21lcih2bS5zdGF0ZS5zZWxlY3RlZC5jdXN0b21lci4kaW5kZXggLSAxKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDE6XG5cdFx0XHRcdC8vY29uc29sZS5sb2coJ25leHQgcmVjb3JkJyk7XG5cdFx0XHRcdHZtLnNlbGVjdEN1c3RvbWVyKHZtLnN0YXRlLnNlbGVjdGVkLmN1c3RvbWVyLiRpbmRleCArIDEpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fTtcblxuXHQvL1x0R0VORVJBVEUgQlVMSyBTQUxFUyBEQVlTXG5cdHZtLmdlbmVyYXRlX2J1bGtfc2FsZXNkYXlzID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0Y29uc29sZS5sb2coJ2dlbmVyYXRpbmcgYnVsayBzYWxlc2RheXMnLCB2bS5zZWxlY3RlZEN1c3RvbWVyLnNhbGVzX2RheXMpO1xuXHRcdFxuXHR9O1xuXG5cdC8vcnVuIHRoZSB0ZXN0XG5cblx0Ly9vbiBwYWdlIGxvYWRcblx0Ly9sb2FkX2N1c3RvbWVyX2xpc3QoKTtcblxuXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ2NuZScpXG4gICAgLmNvbnRyb2xsZXIoJ2xhbmRpbmdDb250cm9sbGVyJywgbGFuZGluZ0NvbnRyb2xsZXIpO1xuXG5sYW5kaW5nQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCckbG9nJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gbGFuZGluZ0NvbnRyb2xsZXIoJHNjb3BlLCAkbG9nKSB7XG5cblx0Ly9kZWZpbmUgdmlldyBtb2RlbCB2YXJpYWJsZVxuXHR2YXIgdm0gPSB0aGlzO1xuXG5cdCRsb2cuaW5mbygnaW4gdGhlIGxhbmRpbmcgY29udHJvbGxlcicpO1x0Ly9UT0RPOiBUQUtFIFRISVMgT1VUIExBVEVSXG5cblx0Ly9kZWZpbmUgbG9jYWwgZnVuY3Rpb25zXG5cblx0Ly9ydW4gdGhlIHRlc3RcblxuXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ2NuZScpXG4gICAgLmNvbnRyb2xsZXIoJ2xvZ2luQ29udHJvbGxlcicsIGxvZ2luQ29udHJvbGxlcik7XG5cbmxvZ2luQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCckbG9nJywgJ2ZpcmViYXNlU2VydmljZSddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGxvZ2luQ29udHJvbGxlcigkc2NvcGUsICRsb2csIGZpcmViYXNlU2VydmljZSkge1xuXG5cdC8vZGVmaW5lIHZpZXcgbW9kZWwgdmFyaWFibGVcblx0dmFyIHZtID0gdGhpcztcblxuXHQvL2RlZmluZSB2aWV3IG1vZGVsIHZhcmlhYmxlc1xuXHR2bS5jcmVkZW50aWFscyA9IHtcblx0XHR1c2VybmFtZTogXCJcIixcblx0XHRwYXNzd29yZDogXCJcIlxuXHR9O1xuXG5cdHZtLmFjdGl2ZSA9IHtcblx0XHR1c2VybmFtZTogZmFsc2UsXG5cdFx0cGFzc3dvcmQ6IGZhbHNlXG5cdH07XG5cblx0Ly9kZWZpbmUgdmlldyBtb2RlbCBmdW5jdGlvbnNcblx0dm0uc3VibWl0Q3JlZHMgPSBmdW5jdGlvbih1c2VybmFtZSwgcGFzcykge1xuXHRcdFxuXHRcdGNvbnNvbGUubG9nKCdzdWJtaXRDcmVkcyBjbGlja2VkJyk7XG5cdFx0XG5cdFx0Ly9zdWJtaXQgY3JlZGVudGlhbHNcblx0XHRmaXJlYmFzZVNlcnZpY2UuYXV0aFVzZXIuZW1haWwodXNlcm5hbWUsIHBhc3MpLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyAocykge1xuXG5cdFx0XHRjb25zb2xlLmxvZygnd2FzIHN1Y2Nlc3MnLCBzKTtcblxuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblx0XHRcdGNvbnNvbGUubG9nKFwiRXJyb3I6XCIsIGUpO1xuXHRcdH0pO1xuXG5cdH07XG5cblx0JGxvZy5pbmZvKCdpbiB0aGUgbG9naW4gY29udHJvbGxlcicpO1x0Ly9UT0RPOiBUQUtFIFRISVMgT1VUIExBVEVSXG5cblx0Ly9kZWZpbmUgbG9jYWwgZnVuY3Rpb25zXG5cblx0Ly9ydW4gdGhlIHRlc3RcblxuXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ2NuZScpXG4gICAgLmNvbnRyb2xsZXIoJ3NhbGVzRGF5c0NvbnRyb2xsZXInLCBzYWxlc0RheXNDb250cm9sbGVyKTtcblxuc2FsZXNEYXlzQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCckbG9nJywgJyRmaXJlYmFzZScsICckZmlyZWJhc2VBcnJheScsICckZmlyZWJhc2VPYmplY3QnLCAnJGh0dHAnLCAnZGF0YVNlcnZpY2UnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBzYWxlc0RheXNDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJGZpcmViYXNlLCAkZmlyZWJhc2VBcnJheSwgJGZpcmViYXNlT2JqZWN0LCAkaHR0cCwgZGF0YVNlcnZpY2UpIHtcblxuXHQvL2RlZmluZSB2aWV3IG1vZGVsIHZhcmlhYmxlXG5cdHZhciB2bSA9IHRoaXM7XG5cdC8qdmFyIGl0ZXJhdGlvbiA9IHtcblx0XHRkYXRlOiBcIjIwMTgtMDUtMDVUMDY6MDA6MDBaXCIsXG5cdFx0d2tfZGF5OiBcIlNhdFwiLFxuXHRcdGlkOiBcImJlYXZlcnRvbl9mbV8wMDFcIixcblx0XHRzY2hlZHVsZToge1xuXHRcdFx0bG9hZF9pbjogXCJcIixcblx0XHRcdGxvYWRfb3V0OiBcIlwiLFxuXHRcdFx0b3BlbjogXCI4OjAwIEFNXCIsXG5cdFx0XHRjbG9zZTogXCIxOjMwIFBNXCIsXG5cdFx0XHRzYWxlc19zdGFydDogXCJcIixcblx0XHRcdHNhbGVzX2VuZDogXCJcIlxuXHRcdH1cblx0fTsqL1xuXHR2bS5zYWxlc2RheXNMaXN0ID0gJGZpcmViYXNlQXJyYXkoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZCgnc2FsZXNfZGF5cycpKTtcblx0dm0uc2VsZWN0ZWRSZWNvcmQgPSB7IGlkOiBcIjIwMzk3NTJcIiB9O1xuXHR2bS50ZXN0Q3VzdG9tZXJzID0gWyBcIkJlYXZlcnRvblwiLCBcIk9yZW5jb1wiIF07XG5cdHZtLnRlc3RTZWFzb25zID0gWyAnMjAxOCcsICcyMDE3JyBdO1xuXHQvL3ZtLnJlcGVhdHMgPSBbICduZXZlcicsIFwiZXZlcnkgd2Vla1wiLCBcImV2ZXJ5IDIgd2Vla3NcIiwgXCJldmVyeSAzIHdlZWtzXCIsIFwiZXZlcnlfNF93ZWVrc1wiLCBcImV2ZXJ5XzVfd2Vla3NcIiwgXCJldmVyeV82X3dlZWtzXCIsIFwiZXZlcnlfN193ZWVrc1wiLCBcImV2ZXJ5Xzhfd2Vla3NcIiBdO1xuXHR2bS50ZXN0VGltZXMgPSBbICc5OjAwIEFNJywnOToxNSBBTScsJzk6MzAgQU0nLCc5OjQ1IEFNJyAgXTtcblx0dm0uc2NoZWR1bGluZ19wYXJhbXMgPSB7XG5cdFx0Y3VzdG9tZXI6IFwiXCIsXG5cdFx0Y3VzdG9tZXJfaWQ6IFwiXCIsXG5cdFx0c2Vhc29uOiBcIlwiLFxuXHRcdGJvb2tlbmRfZGF0ZXM6IHtcblx0XHRcdGZpcnN0OiBcIlwiLFxuXHRcdFx0bGFzdDogXCJcIlxuXHRcdH0sXG5cdFx0cmVwZWF0czogXCJcIixcblx0XHRldmVudF9kYXlzOiB7XG5cdFx0XHRNb246IGZhbHNlLFxuXHRcdFx0VHVlOiBmYWxzZSxcblx0XHRcdFdlZDogZmFsc2UsXG5cdFx0XHRUaHU6IGZhbHNlLFxuXHRcdFx0RnJpOiBmYWxzZSxcblx0XHRcdFNhdDogZmFsc2UsXG5cdFx0XHRTdW46IGZhbHNlXG5cdFx0fSxcblx0XHRzYW1lX2RheV9sb2FkX2luX291dDogdHJ1ZSxcblx0XHRzY2hlZHVsZToge1xuXHRcdFx0bG9hZF9pbjogXCJcIixcblx0XHRcdGxvYWRfb3V0OiBcIlwiLFxuXHRcdFx0b3BlbjogXCJcIixcblx0XHRcdGNsb3NlOiBcIlwiLFxuXHRcdFx0c2FsZXNfc3RhcnQ6IFwiXCIsXG5cdFx0XHRzYWxlc19lbmQ6IFwiXCJcblx0XHR9XG5cdH07XG5cdHZtLnRlbXBJdGVyYXRpb25zID0gW107XG5cdHZtLnRlbXBUaW1lcyA9IHtcblx0XHRsb2FkX2luOiBcIlwiLFxuXHRcdGxvYWRfb3V0OiBcIlwiLFxuXHRcdG9wZW46IFwiXCIsXG5cdFx0Y2xvc2U6IFwiXCIsXG5cdFx0c2FsZXNfc3RhcnQ6IFwiXCIsXG5cdFx0c2FsZXNfZW5kOiBcIlwiXG5cdH1cblxuXHQvL2lkZW50aWZ5IGNvbnRyb2xsZXJcblx0JGxvZy5pbmZvKCdpbiB0aGUgc2FsZXMgZGF5cyBjb250cm9sbGVyJyk7XHQvL1RPRE86IFRBS0UgVEhJUyBPVVQgTEFURVJcblxuXHQvKlxuXHQqXHRMT0NBTCBGVU5DVElPTlMgR08gSEVSRVxuXHQqXG5cdCovXG5cdGZ1bmN0aW9uIGJ1aWxkX3NhbGVzX2RheXNfYXJyYXkocGFyYW1zKSB7XG5cdFx0Ly9sb2NhbCB2YXJpYWJsZXNcblxuXHRcdC8vY29uc29sZS5sb2coJ2dvdCB0aGVzZSBwYXJhbXMnLCBzdGFydCwgZW5kKTtcblxuXHRcdC8vcmV0dXJuIGFzeW5jIHdvcmtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL2FjY2VzcyBkYXRhIHNlcnZpY2Vcblx0XHRcdGRhdGFTZXJ2aWNlLnNhbGVzX2RheXMuY29tcGlsZV9iYXRjaChwYXJhbXMpLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhzKSB7XG5cdFx0XHRcdC8vY29uc29sZS5sb2coJ3N1Y2Nlc3MnLCBzKTtcblx0XHRcdFx0cmVzb2x2ZShzKTtcblx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblx0XHRcdFx0Ly9jb25zb2xlLmxvZygnZXJyb3InLCBlKTtcblx0XHRcdFx0cmVqZWN0KGUpO1xuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHR9O1xuXG5cblx0Lypcblx0Klx0VklFVyBNT0RFTCBGVU5DVElPTlMgR08gSEVSRVxuXHQqXG5cdCovXG5cdC8vXHRVUERBVEUgUkVDT1JEXG5cdHZtLnVwZGF0ZVJlY29yZCA9IGZ1bmN0aW9uKHJlY29yZF9pZCkge1xuXHRcdGNvbnNvbGUubG9nKCdnb3QgdGhpcyBpZCcsIHJlY29yZF9pZCk7XG5cdFx0Lyp2bS5zYWxlc2RheXNMaXN0LiRzYXZlKHJlY29yZF9pZCkudGhlbihmdW5jdGlvbiBzdWNjZXMocykge1xuXHRcdFx0Y29uc29sZS5sb2coJ3VwZGF0ZWQgcmVjb3JkIHN1Y2Nlc3NmdWxseScpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdlcnJvciB1cGRhdGluZyByZWNvcmQnLCBlKTtcblx0XHR9KTsqL1xuXHR9O1xuXG5cdC8vIEFERCBORVcgU0FMRVMgREFZXG5cdHZtLmFkZFNhbGVzRGF5ID0gZnVuY3Rpb24oKSB7XG5cblx0XHR2bS5zYWxlc2RheXNMaXN0LiRhZGQoe1xuXHRcdFx0ZGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuXHRcdFx0c2NoZWR1bGU6IHtcblx0XHRcdFx0bG9hZF9pbjoge1xuXHRcdFx0XHRcdGRhdGV0aW1lOiBcIlwiLFxuXHRcdFx0XHRcdHNhbGVzX2RheV9pZDogXCJcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRsb2FkX291dDoge1xuXHRcdFx0XHRcdGRhdGV0aW1lOiBcIlwiLFxuXHRcdFx0XHRcdHNhbGVzX2RheV9pZDogXCJcIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRvcGVuOiBcIlwiLFxuXHRcdFx0XHRjbG9zZTogXCJcIixcblx0XHRcdFx0c2FsZXNfc3RhcnQ6IFwiXCIsXG5cdFx0XHRcdHNhbGVzX2VuZDogXCJcIlxuXHRcdFx0fSxcblx0XHRcdGN1c3RvbWVyOiBcIlwiLFxuXHRcdFx0c2Vhc29uOiB7XG5cdFx0XHRcdG5hbWU6IFwiXCIsXG5cdFx0XHRcdGZyZXF1ZW5jeTogXCJcIixcblx0XHRcdFx0aW5zdGFuY2U6IDAsXG5cdFx0XHRcdHRvdGFsOiAwXG5cdFx0XHR9XG5cdFx0fSkudGhlbihmdW5jdGlvbiBzdWNjZXNzKHMpIHtcblx0XHRcdC8vc2V0IHRoZSBmaXJlYmFzZSBvYmplY3Rcblx0XHRcdGNvbnNvbGUubG9nKHMua2V5KTtcblx0XHRcdHZtLnNlbGVjdGVkUmVjb3JkID0gJGZpcmViYXNlT2JqZWN0KGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCkuY2hpbGQoJ3NhbGVzX2RheXMnKS5jaGlsZChzLmtleSkpO1xuXHRcdFx0Y29uc29sZS5sb2codm0uc2VsZWN0ZWRSZWNvcmQpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdlcnJvcicsIGUpO1xuXHRcdH0pO1xuXG5cdFx0Lyp2bS5zYWxlc2RheXNMaXN0LnNhdmUoKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3Mocykge1xuXHRcdFx0Y29uc29sZS5sb2coJ3N1Y2Nlc3MnLCBzKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnZXJyb3InLCBlKTtcblx0XHR9KTsqL1xuXG5cdH07XG5cblx0Ly8gR0VORVJBVEUgU0FMRVMgREFZU1xuXHR2bS5nZW5lcmF0ZVNhbGVzRGF5cyA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXG5cdFx0Ly9ub3RpZnkgb2YgbG9jYXRpb25cblx0XHQvL2NvbnNvbGUubG9nKCdnZW5lcmF0aW5nIFNhbGVzIGRheXMnLCB2bS5zY2hlZHVsaW5nX3BhcmFtcyk7XG5cblx0XHRidWlsZF9zYWxlc19kYXlzX2FycmF5KHZtLnNjaGVkdWxpbmdfcGFyYW1zKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3Mocykge1xuXHRcdFx0Y29uc29sZS5sb2coJ3N1Y2Nlc3NmdWxseSBidWlsdCcsIHMpO1xuXHRcdFx0dm0udGVtcEl0ZXJhdGlvbnMgPSBzO1xuXHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblx0XHRcdGNvbnNvbGUubG9nKGUpO1xuXHRcdH0pO1xuXG5cdH07XG5cblx0Ly9cdEZPUk1BVCBUSU1FXG5cdHZtLmZvcmFtdFRpbWUgPSBmdW5jdGlvbihzZWN0aW9uKSB7XG5cdFx0XG5cdFx0Ly9ub3RpZnkgb2YgcHJvZ3Jlc3Ncblx0XHRjb25zb2xlLmxvZygnZm9ybWF0dGluZyB0aW1lJywgc2VjdGlvbik7XG5cblx0XHQvL3NwbGl0IHRpbWVcblx0XHR2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuXHRcdHZhciB5ZWFyID0gdG9kYXkuZ2V0RnVsbFllYXIoKTtcblx0XHR2YXIgbW9udGggPSB0b2RheS5nZXRNb250aCgpO1xuXHRcdHZhciBkYXkgPSB0b2RheS5nZXREYXRlKCk7XG5cdFx0XG5cblx0XHR2YXIgdGltZVNwbGl0ID0gdm0udGVtcFRpbWVzW3NlY3Rpb25dLnNwbGl0KFwiOlwiKTtcblx0XHR2YXIgbWluU3BsaXQgPSB0aW1lU3BsaXRbMV0uc3BsaXQoXCIgXCIpO1xuXHRcdHZhciBob3VyID0gcGFyc2VJbnQodGltZVNwbGl0WzBdKTtcblx0XHR2YXIgbWludXRlID0gbWluU3BsaXRbMF07XG5cdFx0dmFyIHRpbWVEYXkgPSBtaW5TcGxpdFsxXTtcblxuXHRcdC8vZm9ybWF0IGFjY29yZGluZ2x5XG5cdFx0aWYodGltZURheSA9PSBcIlBNXCIpIHsgaG91ciArPSAxMjsgaG91ci50b1N0cmluZygpOyB9XG5cdFx0aWYobW9udGggPCAxMCkgbW9udGggPSBcIjBcIiArIG1vbnRoO1xuXHRcdGlmKGRheSA8IDEwKSBkYXkgPSBcIjBcIiArIGRheTtcblx0XHRpZihob3VyIDwgMTApIGhvdXIgPSBcIjBcIiArIGhvdXI7XG5cdFx0Ly9pZihtaW51dGUgPCAxMCkgbWluID0gXCIwXCIgKyBtaW51dGU7XG5cdFx0XG5cblx0XHQvL2NvbnNvbGUubG9nKHRvZGF5LCAnaG91cicsIGhvdXIsICdtaW51dGUnLCBtaW51dGUsICd0aW1lRGF5JywgdGltZURheSk7XG5cblx0XHQvL3ZtLnNjaGVkdWxpbmdfcGFyYW1zLnNjaGVkdWxlW3NlY3Rpb25dID0gXCIyMDE4LTA1LTA1VDA2OjAwOjAwLTA3OjAwXCJcblx0XHR2bS5zY2hlZHVsaW5nX3BhcmFtcy5zY2hlZHVsZVtzZWN0aW9uXSA9IHllYXIgKyBcIi1cIiArIG1vbnRoICsgXCItXCIgKyAgZGF5ICsgXCJUXCIgKyAgaG91ciArIFwiOlwiICsgbWludXRlICsgXCI6MDAtMDc6MDBcIlxuXHR9O1xuXG5cdC8vIFx0U0FWRSBTQUxFUyBEQVlTXG5cdHZtLnNhdmVTYWxlc0RheXMgPSBmdW5jdGlvbigpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgaW5kZXggPSAwO1xuXG5cdFx0Ly9pdGVyYXRlIHRocm91Z2ggYWxsIHRoZSBzYWxlcyBkYXlzLCBzYXZpbmcgdG8gdGhlIERCXG5cdFx0dm0udGVtcEl0ZXJhdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoY21lX2l0ZXJhdGlvbikge1xuXG5cdFx0XHR2bS5zYWxlc2RheXNMaXN0LiRhZGQoY21lX2l0ZXJhdGlvbikudGhlbihmdW5jdGlvbiAocmVmKSB7XG5cdFx0XHRcdC8vZ2V0IHRoZSBuZXcga2V5XG5cdFx0XHRcdHZhciBpZCA9IHJlZi5rZXk7XG5cblx0XHRcdFx0Ly9zYXZlIGl0IHRvIHRoZSBkYiBvYmplY3Rcblx0XHRcdFx0Y29uc29sZS5sb2coaWQpO1xuXG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdFx0Ly9vbmNlIHRoZXkgaGF2ZSBhbGwgYmVuIHNhdmVkIFxuXG5cdFx0Ly92bS5zYWxlc2RheXNMaXN0LiRhZGQoe25hbWU6ICd0ZXN0J30pO1x0XG5cdH07XG5cblx0Ly9ydW4gdGhlIHRlc3RcblxuXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ2NuZScpXG4gICAgLmNvbnRyb2xsZXIoJ3NxdWFyZVR4c0NvbnRyb2xsZXInLCBzcXVhcmVUeHNDb250cm9sbGVyKTtcblxuc3F1YXJlVHhzQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCckbG9nJywgJyRyb3V0ZVBhcmFtcycsICckZmlyZWJhc2UnLCAnJGZpcmViYXNlT2JqZWN0JywgJyRmaXJlYmFzZUFycmF5JywgJ2RhdGFTZXJ2aWNlJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gc3F1YXJlVHhzQ29udHJvbGxlcigkc2NvcGUsICRsb2csICRyb3V0ZVBhcmFtcywgJGZpcmViYXNlLCAkZmlyZWJhc2VPYmplY3QsICRmaXJlYmFzZUFycmF5LCBkYXRhU2VydmljZSkge1xuXG5cdC8vZGVmaW5lIHZpZXcgbW9kZWwgdmFyaWFibGVcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIHllc3RlcmRheSA9IG1vbWVudChuZXcgRGF0ZSgpKS5zdWJ0cmFjdCgxLCBcImRheVwiKTtcblx0dmFyIHNxckxvY2F0aW9ucyA9IGRhdGFTZXJ2aWNlLnNxcl9sb2NhdGlvbnMubGlzdCgpOy8vJGZpcmViYXNlQXJyYXkoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZCgncmVmZXJlbmNlX2xpc3RzL3Nxcl9sb2NhdGlvbnMnKSk7XG5cdHZhciBzcXJFbXBsb3llZXMgPSBkYXRhU2VydmljZS5zcXJfZW1wbG95ZWVzLmxpc3QoKTtcblx0Ly9kZWZpbmUgdmlld21vZGVsIHZhcmlhYmxlc1xuXHQvL3ZtLmhpZ2hsaWdodGVkRGF0ZSA9IHllc3RlcmRheS5mb3JtYXQoXCJNTS1ERC1ZWVlZXCIpO1xuXHR2bS5zZWxlY3RlZExvY2F0aW9uID0ge1xuXHRcdG5hbWU6XCJPcmVnb25cIixcblx0XHRpZDogXCJcIlxuXHR9O1xuXHR2bS5zZWxlY3RlZERhdGUgPSBuZXcgRGF0ZSh5ZXN0ZXJkYXkuZm9ybWF0KFwiTU0tREQtWVlZWVwiKSk7XG5cdHZtLmRheUhycyA9IFsxLCAyLCAzLCA0LCA1LDYsIDcsIDgsIDksIDEwLCAxMSwgMTIsIDEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTJdO1xuXHR2bS5kYXlzdHJhbnNhY3Rpb25zID0gW107XG5cblx0Ly9ub3RpZnkgcHJvZ3Jlc3Ncblx0JGxvZy5pbmZvKCdpbiBhIHNxdWFyZSBUeHMgY29udHJvbGxlcicsIHllc3RlcmRheS5mb3JtYXQoKSk7XHQvL1RPRE86IFRBS0UgVEhJUyBPVVQgTEFURVJcblxuXHQvL2RlZmluZSBsb2NhbCBmdW5jdGlvbnNcblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZVR4TGlzdCgpIHtcblx0XHR2YXIgZW5kT2ZEYXkgPSBtb21lbnQodm0uc2VsZWN0ZWREYXRlKS5ob3VycygyMykubWludXRlcyg1OSkuc2Vjb25kcyg1OSkuZm9ybWF0KCk7XG5cdFx0dmFyIHN0YXJ0T2ZEYXkgPSBtb21lbnQodm0uc2VsZWN0ZWREYXRlKS5mb3JtYXQoKTtcblx0XHRkYXRhU2VydmljZS5zcXJfdHhzLmZ1bGxfZGF5KFxuXHRcdFx0dm0uc2VsZWN0ZWRMb2NhdGlvbi5pZCwgXG5cdFx0XHRzdGFydE9mRGF5LFxuXHRcdFx0ZW5kT2ZEYXlcblx0XHQpLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhzKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnZ290IGEgcmVzcG9uc2Ugd2l0aCcsIHMubGVuZ3RoLCBcInJlY29yZHNcIik7XG5cdFx0XHR2bS5kYXlzdHJhbnNhY3Rpb25zID0gcztcblx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnRVJST1InLCBlKTtcblx0XHR9KTtcblx0fTtcblxuXHRmdW5jdGlvbiBkZWZpbmVMb2NhdGlvbigpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJhaWFibGVzXG5cdFx0XG5cdFx0UHJvbWlzZS5hbGwoW3NxckxvY2F0aW9ucywgc3FyRW1wbG95ZWVzXSkudGhlbihmdW5jdGlvbiBzdWNjZXNzKHMpIHtcblxuXHRcdFx0dm0uc3FyTG9jYXRpb25zID0gc1swXTtcblx0XHRcdHZtLnNxckVtcGxveWVlcyA9IHNbMV07XG5cblx0XHRcdGNvbnNvbGUubG9nKHZtLnNxckxvY2F0aW9ucyk7XG5cdFx0XHRjb25zb2xlLmxvZyh2bS5zcXJFbXBsb3llZXMpO1xuXG5cdFx0XHQvL2l0ZXJhdGUgdGhyb3VnaCBhbGwgbG9jYXRpb25zXG5cdFx0XHR2bS5zcXJMb2NhdGlvbnMuZm9yRWFjaChmdW5jdGlvbihsb2NhdGlvbikge1xuXHRcdFx0XHRcblx0XHRcdFx0aWYobG9jYXRpb24ubmFtZSA9PSB2bS5zZWxlY3RlZExvY2F0aW9uLm5hbWUpIHtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHR2bS5zZWxlY3RlZExvY2F0aW9uLmlkID0gbG9jYXRpb24uaWQ7XG5cdFx0XHRcdH07XG5cblx0XHRcdH0pO1xuXG5cdFx0XHQvL3RoZW4gcnVuIHRoZSBkYXRhIHNlcnZpY2Vcblx0XHRcdHVwZGF0ZVR4TGlzdCgpO1xuXG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xuXHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yJywgZSk7XG5cdFx0fSk7XG5cblx0fTtcblxuXHQvL2RlZmluZSB2aWV3IG1vZGVsIGZ1bmN0aW9uc1xuXHR2bS5kYXlDaGFuZ2UgPSBmdW5jdGlvbihkaXJlY3Rpb24pIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZGlySGFzaCA9IHtcIi1cIjowLCBcIitcIjoxfTtcblx0XHR2YXIgY3VycmVudERhdGUgPSBtb21lbnQobmV3IERhdGUodm0uc2VsZWN0ZWREYXRlKSk7XG5cblx0XHRzd2l0Y2goZGlySGFzaFtkaXJlY3Rpb25dKSB7XG5cdFx0XHRjYXNlIDA6XG5cdFx0XHRcdGN1cnJlbnREYXRlLnN1YnRyYWN0KDEsXCJkYXlcIik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAxOlxuXHRcdFx0XHRjdXJyZW50RGF0ZS5hZGQoMSxcImRheVwiKVxuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH07XG5cblx0XHR2bS5zZWxlY3RlZERhdGUgPSBuZXcgRGF0ZShjdXJyZW50RGF0ZS5mb3JtYXQoXCJNTS1ERC1ZWVlZXCIpKTtcblxuXHRcdHVwZGF0ZVR4TGlzdCgpO1xuXHR9XG5cblx0Ly9cblx0dm0uZW1wbG95ZWVOYW1lID0gZnVuY3Rpb24oZW1wbG95ZWVfaWQpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgZW1wbG95ZWVfbmFtZSA9IFwiXCI7XG5cblx0XHRPYmplY3Qua2V5cyh2bS5zcXJFbXBsb3llZXMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHR2YXIgbmV3TmFtZSA9IHZtLnNxckVtcGxveWVlc1trZXldLmZpcnN0X25hbWUgKyBcIiBcIiArIHZtLnNxckVtcGxveWVlc1trZXldLmxhc3RfbmFtZTtcblxuXHRcdFx0aWYodm0uc3FyRW1wbG95ZWVzW2tleV0uaWQgPT0gZW1wbG95ZWVfaWQpIGVtcGxveWVlX25hbWUgPSBuZXdOYW1lO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIGVtcGxveWVlX25hbWU7XG5cdH07XG5cblx0Ly9ydW4gdGhlIHRlc3Rcblx0XG5cdGRlZmluZUxvY2F0aW9uKCk7XG59IiwiLypcbipcdENVU1RPTUVSIExJU1RcbipcbipcdFRoaXMgbW9kdWxlIGlzIGRlc2lnbmVkIHRvIFxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdjbmUnKVxuXHQuZGlyZWN0aXZlKCdjdXN0b21lckxpc3QnLCBjdXN0b21lckxpc3QpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGN1c3RvbWVyTGlzdCgpIHtcblx0Ly9kZWZpbmUgdGhlIGRpcmVjdGl2ZVxuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiBcIkFFQ01cIixcblx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvY3VzdG9tZXItbGlzdC5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7XG5cdFx0fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBjdXN0b21lckxpc3RDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7fVxuXG5cdGN1c3RvbWVyTGlzdENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnXTtcblx0XG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBjdXN0b21lckxpc3RDb250cm9sbGVyKCRzY29wZSwgJGxvZykge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdGNvbnNvbGUubG9nKCdpbiBjb3N0b21lciBMaXN0IGNvbnRyb2xsZXInKTtcblx0fVxuXG5cdC8vcGFzcyBpdCBiYWNrXG5cdHJldHVybiBkaXJlY3RpdmU7XG59IiwiLypcbipcdFNBTEVTIERBWSBUUkFOU0FDVElPTlNcbipcbipcdFRoaXMgbW9kdWxlIGlzIGRlc2lnbmVkIHRvIFxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdjbmUnKVxuXHQuZGlyZWN0aXZlKCdjdXN0b21lclNhbGVzRGF5cycsIGN1c3RvbWVyU2FsZXNEYXlzKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjdXN0b21lclNhbGVzRGF5cygpIHtcblx0Ly9kZWZpbmUgdGhlIGRpcmVjdGl2ZVxuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiBcIkFFQ01cIixcblx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvY3VzdG9tZXItc2FsZXMtZGF5cy5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7XG5cdFx0XHRzYWxlc2RheXNMaXN0OiBcIj1cIixcblx0XHRcdHNhbGVzZGF5U2VsZWN0ZWQ6ICc9J1xuXHRcdH0sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogY3VzdG9tZXJTYWxlc0RheXNDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7XG5cblx0XHQvL3VwZGF0ZSB0aGUgc2FsZXNkYXlzTGlzdCB3aGVuIGEgbmV3IGN1c3RvbWVyIGlzIHNlbGVjdGVkXG5cdFx0c2NvcGUuJHdhdGNoKCd2bS5zYWxlc2RheXNMaXN0JywgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XG5cdFx0XHRcblx0XHRcdC8vd2F0Y2ggZm9yIGEgbmV3IHZhbHVlXG5cdFx0XHRpZihuZXdWYWx1ZSkge1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9pZiB0aGUgdmFsdWUgY2hhbmdlcyBkb3dubG9hZCB0aGUgcmVxdWlyZWQgdmFsdWVzXG5cdFx0XHRcdHNjb3BlLmxvYWRTYWxlRGF5cygpO1xuXG5cdFx0XHR9XG5cblx0XHR9LCB0cnVlKTtcblxuXHR9O1xuXG5cdGN1c3RvbWVyU2FsZXNEYXlzQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICdmaXJlYmFzZVNlcnZpY2UnXTtcblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGN1c3RvbWVyU2FsZXNEYXlzQ29udHJvbGxlcigkc2NvcGUsICRsb2csIGZpcmViYXNlU2VydmljZSkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciB2bSA9IHRoaXM7XG5cdFx0dm0uZGV0YWlsZWRTYWxlc0RheXNMaXN0ID0gW107XG5cblx0XHRjb25zb2xlLmxvZygnaW4gdGhlIGN1c3RvbWVyU2FsZXNEYXlzQ29udHJvbGxlcicpO1xuXG5cdFx0ZnVuY3Rpb24gbG9hZEFUeChpZCkge1xuXHRcdFx0dmFyIHBhdGggPSAnc2FsZXNfZGF5cy8nICsgaWQ7XG5cblx0XHRcdC8vcmV0dXJuIGFzeW5jIHdvcmtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0XHQvL2NvbGxlY3RlZCBkYXRhXG5cdFx0XHRcdGZpcmViYXNlU2VydmljZS5nZXQuYV9yZWNvcmQocGF0aCkudGhlbihmdW5jdGlvbiBzdWNjZXNzKHMpIHtcblx0XHRcdFx0XHRyZXNvbHZlKHMpO1xuXHRcdFx0XHR9KS5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGUpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0fSk7XG5cblx0XHR9XG5cblx0XHQvL2RlZmluZSBzY29wZSB2YXJpYWJsZXNcblx0XHQvL1x0TE9BRCBTQUxFREFZU1xuXHRcdCRzY29wZS5sb2FkU2FsZURheXMgPSBmdW5jdGlvbigpIHtcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dmFyIGFsbFByb21pc2VzID0gW107XG5cblx0XHRcdC8vaXRlcmF0ZSB0aHJvdWdoIGFsbCB2YWx1ZXNcblx0XHRcdE9iamVjdC5rZXlzKHZtLnNhbGVzZGF5c0xpc3QpLmZvckVhY2goZnVuY3Rpb24oa2V5KXtcblxuXHRcdFx0XHRhbGxQcm9taXNlcy5wdXNoKGxvYWRBVHgodm0uc2FsZXNkYXlzTGlzdFtrZXldKSk7XG5cblx0XHRcdH0pO1xuXG5cdFx0XHQvL3J1biBhbGwgcHJvbWlzZXNcblx0XHRcdFByb21pc2UuYWxsKGFsbFByb21pc2VzKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3Mocykge1xuXHRcdFx0XHQvL2NvbnNvbGUubG9nKCdhbGwgcHJvbWlzZXMgcmV0dXJuZWQnLCBzKTtcblx0XHRcdFx0dm0uZGV0YWlsZWRTYWxlc0RheXNMaXN0ID0gc1xuXHRcdFx0fSkuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xuXHRcdFx0XHRjb25zb2xlLmxvZygnZXJyb3InLGUpO1xuXHRcdFx0fSk7XG5cblxuXHRcdH07XG5cblx0XHQvL1x0U0FMRVMgREFZIFNFTEVDVEVEXG5cdFx0JHNjb3BlLnNhbGVzRGF5U2VsZWN0ZWQgPSBmdW5jdGlvbihpbmRleCkgeyBcblx0XHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFx0dm0uc2FsZXNkYXlTZWxlY3RlZCA9IHZtLmRldGFpbGVkU2FsZXNEYXlzTGlzdFtpbmRleF0uJGlkO1xuXHRcdFx0Ly9jb25zb2xlLmxvZyh2bS5zYWxlc2RheXNMaXN0W2luZGV4XSk7XG5cdFx0fVxuXG5cdH1cblxuXHQvL3Bhc3MgaXQgYmFja1xuXHRyZXR1cm4gZGlyZWN0aXZlO1xufSIsIi8qXG4qXHRGTEFWT1IgTUlYRVJcbipcbipcdFRoaXMgbW9kdWxlIGlzIGRlc2lnbmVkIHRvIGFsbG93IGN1c3RvbWVycyB0byBtaXggYW5kIG1hdGNoXG4qXHRvdXIgZGVsaWNpb3VzIGZsYXZvcnMgYW5kIHRvIHBpY2sgdGhpZXIgc2l6aW5nLlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdjbmUnKVxuXHQuZGlyZWN0aXZlKCdsb2dpblBhc3N3b3JkJywgbG9naW5QYXNzd29yZCk7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gbG9naW5QYXNzd29yZCgpIHtcblx0Ly9kZWZpbmUgdGhlIGRpcmVjdGl2ZVxuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiBcIkFFQ01cIixcblx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvbG9naW4tcGFzc3dvcmQuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge1xuXHRcdFx0cGFzc3dvcmQ6IFwiPVwiLFxuXHRcdFx0YWN0aXZlOiBcIj1cIlxuXHRcdH0sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogbG9naW5QYXNzd29yZENvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHt9XG5cblx0bG9naW5QYXNzd29yZENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnXTtcblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxvZ2luUGFzc3dvcmRDb250cm9sbGVyKCRzY29wZSwgJGxvZykge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBzZWxmID0gdGhpcztcblx0fVxuXG5cdC8vcGFzcyBpdCBiYWNrXG5cdHJldHVybiBkaXJlY3RpdmU7XG59IiwiLypcbipcdEZMQVZPUiBNSVhFUlxuKlxuKlx0VGhpcyBtb2R1bGUgaXMgZGVzaWduZWQgdG8gYWxsb3cgY3VzdG9tZXJzIHRvIG1peCBhbmQgbWF0Y2hcbipcdG91ciBkZWxpY2lvdXMgZmxhdm9ycyBhbmQgdG8gcGljayB0aGllciBzaXppbmcuXG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ2NuZScpXG5cdC5kaXJlY3RpdmUoJ2xvZ2luVXNlcm5hbWUnLCBsb2dpblVzZXJuYW1lKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBsb2dpblVzZXJuYW1lKCkge1xuXHQvL2RlZmluZSB0aGUgZGlyZWN0aXZlXG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6IFwiQUVDTVwiLFxuXHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZGlyZWN0aXZlcy9sb2dpbi11c2VybmFtZS5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7XG5cdFx0XHR1c2VybmFtZTogXCI9XCIsXG5cdFx0XHRhY3RpdmU6IFwiPVwiXG5cdFx0fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBsb2dpblVzZXJuYW1lQ29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge31cblxuXHRsb2dpblVzZXJuYW1lQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZyddO1xuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbG9naW5Vc2VybmFtZUNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHR9XG5cblx0Ly9wYXNzIGl0IGJhY2tcblx0cmV0dXJuIGRpcmVjdGl2ZTtcbn0iLCIvKlxuKlx0U0FMRVMgREFZIFRSQU5TQUNUSU9OU1xuKlxuKlx0VGhpcyBtb2R1bGUgaXMgZGVzaWduZWQgdG8gXG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ2NuZScpXG5cdC5kaXJlY3RpdmUoJ3NhbGVzRGF5VHhzJywgc2FsZXNEYXlUeHMpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHNhbGVzRGF5VHhzKCkge1xuXHQvL2RlZmluZSB0aGUgZGlyZWN0aXZlXG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6IFwiQUVDTVwiLFxuXHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZGlyZWN0aXZlcy9zYWxlcy1kYXktdHJhbnNhY3Rpb25zLmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdHR4c0xpc3Q6IFwiPVwiLFxuXHRcdFx0c2FsZXNkYXlTZWxlY3RlZDogJz0nXG5cblx0XHR9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IHNhbGVzRGF5VHhzQ29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge1xuXG5cdFx0Ly91cGRhdGUgdGhlIHNhbGVzZGF5c0xpc3Qgd2hlbiBhIG5ldyBjdXN0b21lciBpcyBzZWxlY3RlZFxuXHRcdHNjb3BlLiR3YXRjaCgndm0uc2FsZXNkYXlTZWxlY3RlZCcsIGZ1bmN0aW9uKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xuXHRcdFx0XG5cdFx0XHQvL3dhdGNoIGZvciBhIG5ldyB2YWx1ZVxuXHRcdFx0aWYobmV3VmFsdWUpIHtcblx0XHRcdFx0XG5cdFx0XHRcdC8vaWYgdGhlIHZhbHVlIGNoYW5nZXMgZG93bmxvYWQgdGhlIHJlcXVpcmVkIHZhbHVlc1xuXHRcdFx0XHQvL2NvbnNvbGUubG9nKCdzYWxlc0RheSBTZWxlY3RlZCcpO1xuXHRcdFx0XHRzY29wZS5sb2FkU0RUeHMoKTtcblxuXHRcdFx0fVxuXG5cdFx0fSwgdHJ1ZSk7XG5cblx0fVxuXG5cdHNhbGVzRGF5VHhzQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZycsICdmaXJlYmFzZVNlcnZpY2UnXTtcblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIHNhbGVzRGF5VHhzQ29udHJvbGxlcigkc2NvcGUsICRsb2csIGZpcmViYXNlU2VydmljZSkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciB2bSA9IHRoaXM7XG5cdFx0dm0ucHJvbWlzZUxpc3QgPSBbXTtcblx0XHR2bS5kZXRhaWxlZFR4TGlzdCA9IFtdO1xuXG5cdFx0Y29uc29sZS5sb2coJ2luIHRoZSBzYWxlc0RheVR4c0NvbnRyb2xsZXInKTtcblxuXHRcdGZ1bmN0aW9uIGxvYWRBUmNyZChwYXRoLCBpZCkge1xuXHRcdFx0dmFyIHBhdGggPSBwYXRoICsgaWQ7XG5cblx0XHRcdC8vY29uc29sZS5sb2coJ2xvYWRBUmNyZCcsIHBhdGgpXG5cblx0XHRcdC8vcmV0dXJuIGFzeW5jIHdvcmtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0XHQvL2NvbGxlY3RlZCBkYXRhXG5cdFx0XHRcdGZpcmViYXNlU2VydmljZS5nZXQuYV9yZWNvcmQocGF0aCkudGhlbihmdW5jdGlvbiBzdWNjZXNzKHMpIHtcblx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKCdnb3QgdGhpcyByZWNvcmQnLCBzKTtcblx0XHRcdFx0XHRyZXNvbHZlKHMpO1xuXHRcdFx0XHR9KS5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGUpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0fSk7XG5cblx0XHR9XG5cblx0XHQvL1x0REVGSU5FIFNBTEVTIERBWVMgVFJBTlNBQ1RJT05TXG5cdFx0JHNjb3BlLmxvYWRTRFR4cyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly9jb25zb2xlLmxvZygnbG9hZGluZyBzZCB0eHMnLCB2bS5zYWxlc2RheVNlbGVjdGVkKTtcblxuXHRcdFx0Ly9cblx0XHRcdGxvYWRBUmNyZChcInNhbGVzX2RheXMvXCIsIHZtLnNhbGVzZGF5U2VsZWN0ZWQpLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhkZXRhaWxlZERheSkge1xuXHRcdFx0XHRcblx0XHRcdFx0Ly9jb25zb2xlLmxvZygnZGV0YWlsZWREYXknLCBkZXRhaWxlZERheS4kcmVzb2x2ZWQpO1xuXHRcdFx0XHQvL0l0ZXJhdGUgb3ZlciBhbGwgb2YgdGhlIHRyYW5zYWN0aW9uc1xuXHRcdFx0XHRPYmplY3Qua2V5cyhkZXRhaWxlZERheS50cmFuc2FjdGlvbnMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHRcdFx0Ly9jb25zb2xlLmxvZyhkZXRhaWxlZERheS50cmFuc2FjdGlvbnNba2V5XSk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYoZGV0YWlsZWREYXkudHJhbnNhY3Rpb25zW2tleV0gIT0gXCJwbGFjZWhvbGRlclwiKSB7XG5cdFx0XHRcdFx0XHR2bS5wcm9taXNlTGlzdC5wdXNoKGxvYWRBUmNyZChcInRyYW5zYWN0aW9ucy9cIiwgZGV0YWlsZWREYXkudHJhbnNhY3Rpb25zW2tleV0pKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFByb21pc2UuYWxsKHZtLnByb21pc2VMaXN0KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3Mocykge1xuXHRcdFx0XHRcdC8vY29uc29sZS5sb2cocyk7XG5cdFx0XHRcdFx0dm0uZGV0YWlsZWRUeExpc3QgPSBzO1xuXHRcdFx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblx0XHRcdFx0fSkuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiZXJyb3JcIiwgZSk7XG5cdFx0XHRcdH0pO1xuXG5cblx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yJywgZSk7XG5cdFx0XHR9KTtcblx0XHR9O1xuXHR9XG5cblx0Ly9wYXNzIGl0IGJhY2tcblx0cmV0dXJuIGRpcmVjdGl2ZTtcbn0iLCIvKlxuKlx0QkFDS0VORCBEQVRBIFNFUlZJQ0VcbipcbiovXG5cbi8vZGVmaW5lIG1vZHVsZVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ2NuZScpXG4gICAgLmZhY3RvcnkoJ2RhdGFTZXJ2aWNlJywgZGF0YVNlcnZpY2UpO1xuXG4vL2RlcGVuZGVuY3kgaW5qZWN0aW9uc1xuZGF0YVNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnXTtcblxuLy9kZWNsYXJlIHRoZSBzZXJ2aWNlXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGRhdGFTZXJ2aWNlKCRodHRwKSB7XG5cblx0Ly9kZWZpbmUgbWV0aG9kc1xuXHR2YXIgZGF0YVNlcnZpY2UgPSB7XG5cdFx0c3FyX2xvY2F0aW9uczoge1xuXHRcdFx0bGlzdDogc3FyX2xvY2F0aW9uc19saXN0XG5cdFx0fSxcblx0XHRzcXJfZW1wbG95ZWVzOiB7XG5cdFx0XHRsaXN0OiBzcXJfZW1wbG95ZWVzX2xpc3Rcblx0XHR9LFxuXHRcdHNxcl90eHM6IHtcblx0XHRcdGZ1bGxfZGF5OiBzcXJfdHhzX2RheVxuXHRcdH0sXG5cdFx0c2FsZXNfZGF5czoge1xuXHRcdFx0Y29tcGlsZV9iYXRjaDogY29tcGlsZV9uZXdfc2FsZXNfZGF5X2JhdGNoXG5cdFx0fVxuXHR9O1xuXG5cdC8vXG5cdGZ1bmN0aW9uIHNxcl9sb2NhdGlvbnNfbGlzdCgpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgcG9zdE9iamVjdCA9IHt9O1xuXG5cdFx0Y29uc29sZS5sb2coJ2dldHRpbmcgbG9jYXRpb25zIGxpc3QnKTtcblxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vdHJ5IFBPU1Rcblx0XHRcdCRodHRwKHtcblx0XHRcdFx0bWV0aG9kOiAnUE9TVCcsXG5cdFx0XHRcdHVybDogJy9zcXVhcmVwb3MvbG9jYXRpb25zJyxcblx0XHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcdCdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGF0YTogcG9zdE9iamVjdFxuXHRcdFx0fSkudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcblx0XHRcdFx0XG5cdFx0XHRcdHJlc29sdmUocmVzcG9uc2UuZGF0YSk7XG5cdFx0XHRcdFxuXHRcdFx0fSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0fTtcblxuXHQvL1xuXHRmdW5jdGlvbiBzcXJfZW1wbG95ZWVzX2xpc3Qoc3RhdHVzLCBleHRlcm5hbF9pZCwgbGltaXQsIG9yZGVyLCBiZWdpbl91cGRhdGVkX2F0LCBlbmRfdXBkYXRlZF9hdCwgYmVnaW5fY3JlYXRlZF9hdCwgZW5kX2NyZWF0ZWRfYXQpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgcG9zdE9iamVjdCA9IHtcblx0XHRcdHN0YXR1czogc3RhdHVzLFxuXHRcdFx0ZXh0ZXJuYWxfaWQ6IGV4dGVybmFsX2lkLFxuXHRcdFx0bGltaXQ6IGxpbWl0LFxuXHRcdFx0b3JkZXI6IG9yZGVyLFxuXHRcdFx0YmVnaW5fdXBkYXRlZF9hdDogYmVnaW5fdXBkYXRlZF9hdCxcblx0XHRcdGVuZF91cGRhdGVkX2F0OiBlbmRfdXBkYXRlZF9hdCxcblx0XHRcdGJlZ2luX2NyZWF0ZWRfYXQ6IGJlZ2luX2NyZWF0ZWRfYXQsXG5cdFx0XHRlbmRfY3JlYXRlZF9hdDogZW5kX2NyZWF0ZWRfYXRcblx0XHR9O1xuXG5cdFx0Y29uc29sZS5sb2coJ2dldHRpbmcgZW1wbG95ZWVzIGxpc3QnKTtcblxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vdHJ5IFBPU1Rcblx0XHRcdCRodHRwKHtcblx0XHRcdFx0bWV0aG9kOiAnUE9TVCcsXG5cdFx0XHRcdHVybDogJy9zcXVhcmVwb3MvZW1wbG95ZWVzJyxcblx0XHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcdCdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGF0YTogcG9zdE9iamVjdFxuXHRcdFx0fSkudGhlbihmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2UpIHtcblx0XHRcdFx0XG5cdFx0XHRcdHJlc29sdmUocmVzcG9uc2UuZGF0YSk7XG5cdFx0XHRcdFxuXHRcdFx0fSwgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhlcnJvcikge1xuXHRcdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0fVxuXG5cdC8vXHRURVNUIEZVTkNUSU9OXG5cdGZ1bmN0aW9uIGNvbXBpbGVfbmV3X3NhbGVzX2RheV9iYXRjaChwYXJhbXMpIHtcblx0XHRcblx0XHQvL2NvbnNvbGUubG9nKCd0ZXN0aW5nIGRhdGFTZXJ2aWNlJyk7XG5cblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL3RyeSBQT1NUXG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ1BPU1QnLFxuXHRcdFx0XHR1cmw6ICcvYXBpL3NhbGVzX2RheXMvY29tcGlsZV9uZXdfc2FsZXNfZGF5c19iYXRjaCcsXG5cdFx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG5cdFx0XHRcdH0sXHRcblx0XHRcdFx0ZGF0YTogcGFyYW1zXG5cdFx0XHR9KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xuXHRcdFx0XHRcblx0XHRcdFx0cmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0XG5cdFx0XHR9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKGVycm9yKSB7XG5cdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHR9O1xuXG5cdC8vU1FVQVJFIFRSQU5TQUNUSU9OIERBWVNcblx0ZnVuY3Rpb24gc3FyX3R4c19kYXkobG9jYXRpb24sIHN0YXJ0RGF0ZSwgZW5kRGF0ZSkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBwb3N0T2JqZWN0ID0ge1xuXHRcdFx0bG9jYXRpb246IGxvY2F0aW9uLFxuXHRcdFx0c3RhcnQ6IHN0YXJ0RGF0ZSxcblx0XHRcdGVuZDogZW5kRGF0ZVxuXHRcdH07XG5cblx0XHRjb25zb2xlLmxvZygnZ2V0dGluZyBkYXlcXCdzIFRyYW5zYWN0aW9ucycpO1xuXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly90cnkgUE9TVFxuXHRcdFx0JGh0dHAoe1xuXHRcdFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0XHRcdFx0dXJsOiAnL3NxdWFyZXBvcy90eHMnLFxuXHRcdFx0XHRoZWFkZXJzOiB7XG5cdFx0XHRcdFx0J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRkYXRhOiBwb3N0T2JqZWN0XG5cdFx0XHR9KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xuXHRcdFx0XHRcblx0XHRcdFx0cmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0XG5cdFx0XHR9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKGVycm9yKSB7XG5cdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHR9XG5cblx0Ly90dXJuIHRoZSBtZXRob2RcbiAgICByZXR1cm4gZGF0YVNlcnZpY2U7XHRcbn07XG5cbiIsIi8qXG4qXG4qXG4qL1xuXG4vL2RlZmluZSBtb2R1bGVcbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdjbmUnKVxuICAgIC5mYWN0b3J5KCdmaXJlYmFzZVNlcnZpY2UnLCBmaXJlYmFzZVNlcnZpY2UpO1xuXG4vL2RlcGVuZGVuY3kgaW5qZWN0aW9uc1xuZmlyZWJhc2VTZXJ2aWNlLiRpbmplY3QgPSBbJyRmaXJlYmFzZScsICckZmlyZWJhc2VPYmplY3QnLCAnJGZpcmViYXNlQXJyYXknXTtcblxuLy9kZWNsYXJlIHRoZSBzZXJ2aWNlXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGZpcmViYXNlU2VydmljZSgkZmlyZWJhc2UsICRmaXJlYmFzZU9iamVjdCwgJGZpcmViYXNlQXJyYXkpIHtcblxuXHQvL2RlZmluZSBtZXRob2RzXG5cdHZhciBGQlNlcnZpY2UgPSB7XG5cdFx0Z2V0OiB7XG5cdFx0XHRjdXN0b21lcl9saXN0OiBnZXRfY3VzdG9tZXJfbGlzdCxcblx0XHRcdGFfcmVjb3JkOiBnZXRfYV9yZWNvcmRcblx0XHR9LFxuXHRcdGF1dGhVc2VyOiB7XG5cdFx0XHRlbWFpbDogYXV0aFVzZXJfZW1haWxcblx0XHR9LFxuXHRcdGNvbXBpbGU6IHtcblx0XHRcdGN1c3RvbWVyX3NhbGVzX2RheXM6IGNvbXBpbGVfY3VzdG9tZXJfc2FsZXNfZGF5c1xuXHRcdH0sXG5cdFx0dGVzdDogdGVzdFxuXHR9O1xuXG5cdC8vXHRBVVRIRU5USUNBVEUgVVNFUlxuXHRmdW5jdGlvbiBhdXRoVXNlcl9lbWFpbChlbWFpbCwgcGFzc3dvcmQpIHtcblx0XHRcblx0XHRjb25zb2xlLmxvZygnYXV0aGVudGljYXRpbmcgdXNlcicpXG5cblx0XHQvL3JldHVybiBhc3luYyB3b3JrXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0ZmlyZWJhc2UuYXV0aCgpLnNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCkudGhlbihmdW5jdGlvbiBzdWNlc3Mocykge1xuXG5cdFx0XHRcdHJlc29sdmUocyk7XG5cblx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdC8vIEhhbmRsZSBFcnJvcnMgaGVyZS5cblx0XHRcdFx0dmFyIGVycm9yQ29kZSA9IGVycm9yLmNvZGU7XG5cdFx0XHRcdHZhciBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuXHRcdFx0XHRyZWplY3Qoe2NvZGU6IGVycm9yQ29kZSAsIG1lc3NhZ2U6IGVycm9yTWVzc2FnZX0pO1xuXG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHR9O1xuXG5cdC8vXHRHRVQgQ1VTVE9NRVIgTElTVFxuXHRmdW5jdGlvbiBnZXRfY3VzdG9tZXJfbGlzdCgpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblxuXHRcdC8vY29uc29sZS5sb2coJ2dldHRpbmcgY3VzdG9tZXIgbGlzdCcpO1xuXG5cdFx0Ly9yZXR1cm4gYXN5bmMgd29ya1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgICBcblx0ICAgICAgICA7XG5cblx0ICAgIH0pO1xuXHR9XG5cblx0Ly9cdEdFVCBBIFJFQ09SRFxuXHRmdW5jdGlvbiBnZXRfYV9yZWNvcmQocGF0aCkge1xuXG5cdFx0Ly9jb25zb2xlLmxvZygnZ2V0dGluZycsIHBhdGgpO1xuXHRcdC8vcmV0dXJuIGFzeW5jIHdvcmtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgICAgdmFyIGRlc2lyZWRSZWNvcmQgPSAkZmlyZWJhc2VPYmplY3QoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZChwYXRoKSk7XG5cdCAgICAgICAgXG5cdCAgICAgICAgZGVzaXJlZFJlY29yZC4kbG9hZGVkKCkudGhlbihmdW5jdGlvbiBzdWNjZXNzKHMpIHtcblx0ICAgICAgICBcdHJlc29sdmUocyk7XG5cdCAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xuXHQgICAgICAgIFx0cmVqZWN0KGUpO1xuXHQgICAgICAgIH0pO1xuXG5cdCAgICB9KTtcblxuXHR9O1xuXG5cdC8vXHRDT01QTElMRSBDVVNUT01FUiBTQUxFUyBEQVlTXG5cdGZ1bmN0aW9uIGNvbXBpbGVfY3VzdG9tZXJfc2FsZXNfZGF5cyhjdXN0b21lcl9pZCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdFxuXHR9O1x0XG5cblxuXHQvL1x0VEVTVCBGVU5DVElPTlxuXHRmdW5jdGlvbiB0ZXN0KCkgeyByZXR1cm4oJ2dvb2QgdGVzdCBmcm9tIEZCIFNlcnZpY2UnKTsgfTtcblxuXHQvL3R1cm4gdGhlIG1ldGhvZFxuICAgIHJldHVybiBGQlNlcnZpY2U7XHRcbn07XG5cbiIsIi8qXG4qXHRST1VURVMtQ09ORklHXG4qXG4qXHRUaGlzIG1vZHVsZSBzZXRzIHVwIGFsbCB0aGUgcmVxdWlyZWQgYW5ndWxhciByb3V0ZXMgZm9yIHRoaXMgd2ViIGFwcC5cbiovXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnY25lJylcbiAgICAuY29uZmlnKGNvbmZpZyk7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gY29uZmlnKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuXHQkbG9jYXRpb25Qcm92aWRlci5oYXNoUHJlZml4KCcnKTtcbiAgICAkcm91dGVQcm92aWRlclxuXHQvL1BVQkxJQyBST1VURVNcbiAgICAud2hlbignLycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9sYW5kaW5nUGFnZS5odG0nLCAgICAgIC8vJ3ZpZXdzL21haW5QYWdlLmh0bSdcbiAgICAgICAgY29udHJvbGxlcjogJ2xhbmRpbmdDb250cm9sbGVyJywgICAgICAgICAgIC8vJ21haW5Db250cm9sbGVyJ1xuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvY3VzdG9tZXJzJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2N1c3RvbWVyc1BhZ2UuaHRtJywgICAgICAvLyd2aWV3cy9tYWluUGFnZS5odG0nXG4gICAgICAgIGNvbnRyb2xsZXI6ICdjdXN0b21lcnNDb250cm9sbGVyJywgICAgICAgICAgIC8vJ21haW5Db250cm9sbGVyJ1xuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICBjdXN0b21lckxpc3Q6IGN1c3RvbWVyTGlzdFxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL3NhbGVzZGF5cycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9zYWxlc0RheXNQYWdlLmh0bScsICAgICAgLy8ndmlld3MvbWFpblBhZ2UuaHRtJ1xuICAgICAgICBjb250cm9sbGVyOiAnc2FsZXNEYXlzQ29udHJvbGxlcicsICAgICAgICAgICAvLydtYWluQ29udHJvbGxlcidcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAud2hlbignL3NhbGVzZGF5cy86c2FsZXNkYXlpZCcsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9hU2FsZXNkYXlQYWdlLmh0bScsICAgICAgLy8ndmlld3MvbWFpblBhZ2UuaHRtJ1xuICAgICAgICBjb250cm9sbGVyOiAnYVNhbGVzZGF5Q29udHJvbGxlcicsICAgICAgICAgICAvLydtYWluQ29udHJvbGxlcidcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAud2hlbignL2Nhc2hfZHJhd2VyX2Fzc2lnbm1lbnRzJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2Nhc2hEcmF3ZXJBc3NpZ25tZW50c1BhZ2UuaHRtJywgICAgICAvLyd2aWV3cy9tYWluUGFnZS5odG0nXG4gICAgICAgIGNvbnRyb2xsZXI6ICdjYXNoRHJhd2VyQXNzaWdubWVudHNDb250cm9sbGVyJywgICAgICAgICAgIC8vJ21haW5Db250cm9sbGVyJ1xuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KSAgIFxuICAgIC53aGVuKCcvc3F1YXJlX3R4cycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9zcXVhcmVUeHNQYWdlLmh0bScsICAgICAgLy8ndmlld3MvbWFpblBhZ2UuaHRtJ1xuICAgICAgICBjb250cm9sbGVyOiAnc3F1YXJlVHhzQ29udHJvbGxlcicsICAgICAgICAgICAvLydtYWluQ29udHJvbGxlcidcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSkgIFxuICAgIC53aGVuKCcvbG9naW4nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvbG9naW5QYWdlLmh0bScsICAgICAgLy8ndmlld3MvbWFpblBhZ2UuaHRtJ1xuICAgICAgICBjb250cm9sbGVyOiAnbG9naW5Db250cm9sbGVyJywgICAgICAgICAgIC8vJ21haW5Db250cm9sbGVyJ1xuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvY21lX3NjaGVkdWxlJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2NtZVNjaGVkdWxpbmdQYWdlLmh0bScsICAgICAgLy8ndmlld3MvbWFpblBhZ2UuaHRtJ1xuICAgICAgICBjb250cm9sbGVyOiAnY21lU2NoZWR1bGVDb250cm9sbGVyJywgICAgICAgICAgIC8vJ21haW5Db250cm9sbGVyJ1xuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuXHQub3RoZXJ3aXNlKHtcbiAgICAgICAgcmVkaXJlY3RUbzogJy8nXG4gICAgfSk7XG59XG5cbi8qXG4qICAgUkVRVUlSRUQgRlVOQ1RJT05TXG4qXG4qL1xuXG4vLyAgQ1VTVE9NRVJTIExJU1RcbmZ1bmN0aW9uIGN1c3RvbWVyTGlzdCgpIHtcbiAgICBcbiAgICAvL3JldHVybiB0aGUgcHJvbWlzZVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgLy9oaXQgdGhlIHNlcnZlciBmb3IgdGhlIFxuICAgICAgICByZXNvbHZlKCdnb29kIHRlc3QnKTtcbiAgICB9KTtcblxufTtcblxuIl19
