config.$inject=["$routeProvider","$locationProvider"];var ahNuts=angular.module("cne",["ngRoute","firebase","ngSanitize"]);function customersController(e,o,t,r,s,n,l){var c=this;c.customerList=l(firebase.database().ref().child("customers")),c.customerSalesDays=[],c.selectedCustomer={seasons:{2018:{id:2018}}},c.testList=["a","b","c"],c.state={selected:{customer:{$index:"",$id:""}}},o.info("in the customers controller"),c.selectCustomer=function(e){c.state.selected.customer.$index=e,c.state.selected.customer.$id=c.customerList[e].$id,c.selectedCustomer=n(firebase.database().ref().child("customers").child(c.customerList[e].$id)),c.customerSalesDays=c.selectedCustomer.sales_days},c.updateCustomer=function(){c.selectedCustomer.$save().then(function(e){console.log("updated record successfully")}).catch(function(e){console.log("error updating record",e)})},c.changeRecord=function(e){c.state.selected.customer.$index;switch({prev:0,next:1}[e]){case 0:c.selectCustomer(c.state.selected.customer.$index-1);break;case 1:c.selectCustomer(c.state.selected.customer.$index+1)}},c.generate_bulk_salesdays=function(){console.log("generating bulk salesdays",c.selectedCustomer.sales_days)}}function landingController(e,o){o.info("in the landing controller")}function loginController(e,o,t){var r=this;r.credentials={username:"",password:""},r.active={username:!1,password:!1},r.submitCreds=function(e,o){console.log("submitCreds clicked"),t.authUser.email(e,o).then(function(e){console.log("was success",e)}).catch(function(e){console.log("Error:",e)})},o.info("in the login controller")}function salesDaysController(e,o,t,r,s){var n=this;n.salesdaysList=r(firebase.database().ref().child("sales_days")),n.selectedRecord={id:"2039752"},o.info("in the sales days controller",(new Date).toISOString()),n.updateRecord=function(e){console.log("got this id",e)},n.addSalesDay=function(){n.salesdaysList.$add({date:(new Date).toISOString(),schedule:{load_in:{datetime:"",sales_day_id:""},load_out:{datetime:"",sales_day_id:""},open:"",close:"",sales_start:"",sales_end:""},customer:"",season:{name:"",frequency:"",instance:0,total:0}}).then(function(e){console.log(e.key),n.selectedRecord=s(firebase.database().ref().child("sales_days").child(e.key)),console.log(n.selectedRecord)}).catch(function(e){console.log("error",e)})}}function customerList(){o.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/customer-list.directive.htm",replace:!0,scope:{},link:o,controller:t,controllerAs:"vm",bindToController:!0};function o(e,o,t,r){}function t(e,o){console.log("in costomer List controller")}return t.$inject=["$scope","$log"],e}function loginPassword(){o.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/login-password.directive.htm",replace:!0,scope:{password:"=",active:"="},link:o,controller:t,controllerAs:"vm",bindToController:!0};function o(e,o,t,r){}function t(e,o){}return t.$inject=["$scope","$log"],e}function loginUsername(){o.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/login-username.directive.htm",replace:!0,scope:{username:"=",active:"="},link:o,controller:t,controllerAs:"vm",bindToController:!0};function o(e,o,t,r){}function t(e,o){}return t.$inject=["$scope","$log"],e}function firebaseService(e,o,t){return{get:{customer_list:function(){return new Promise(function(e,o){e(["one","two","three"])})}},authUser:{email:function(e,t){return console.log("authenticating user"),new Promise(function(o,r){firebase.auth().signInWithEmailAndPassword(e,t).then(function(e){o(e)}).catch(function(e){var o=e.code,t=e.message;r({code:o,message:t})})})}},test:function(){return"good test from FB Service"}}}function config(e,o){o.hashPrefix(""),e.when("/",{templateUrl:"views/landingPage.htm",controller:"landingController",controllerAs:"vm"}).when("/customers",{templateUrl:"views/customersPage.htm",controller:"customersController",controllerAs:"vm",resolve:{customerList:customerList}}).when("/salesdays",{templateUrl:"views/salesDaysPage.htm",controller:"salesDaysController",controllerAs:"vm"}).when("/login",{templateUrl:"views/loginPage.htm",controller:"loginController",controllerAs:"vm"}).otherwise({redirectTo:"/"})}function customerList(){return new Promise(function(e,o){e("good test")})}angular.module("cne").controller("customersController",customersController),customersController.$inject=["$scope","$log","customerList","firebaseService","$firebase","$firebaseObject","$firebaseArray"],angular.module("cne").controller("landingController",landingController),landingController.$inject=["$scope","$log"],angular.module("cne").controller("loginController",loginController),loginController.$inject=["$scope","$log","firebaseService"],angular.module("cne").controller("salesDaysController",salesDaysController),salesDaysController.$inject=["$scope","$log","$firebase","$firebaseArray","$firebaseObject"],angular.module("cne").directive("customerList",customerList),angular.module("cne").directive("loginPassword",loginPassword),angular.module("cne").directive("loginUsername",loginUsername),angular.module("cne").factory("firebaseService",firebaseService),firebaseService.$inject=["$firebase","$firebaseObject","$firebaseArray"],angular.module("cne").config(config);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMvd2ViYXBwLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9jdXN0b21lcnMtY29udHJvbGxlci5qcyIsInNjcmlwdHMvY29udHJvbGxlcnMvbGFuZGluZy1jb250cm9sbGVyLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9sb2dpbi1jb250cm9sbGVyLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9zYWxlc2RheXMtY29udHJvbGxlci5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9jdXN0b21lci1saXN0LmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL2xvZ2luLXBhc3N3b3JkLmRpcmVjdGl2ZS5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9sb2dpbi11c2VybmFtZS5kaXJlY3RpdmUuanMiLCJzY3JpcHRzL2ZhY3Rvcmllcy9maXJlYmFzZS5zZXJ2aWNlLmpzIiwic2NyaXB0cy9yb3V0ZXMvcm91dGVzLWNvbmZpZy5qcyJdLCJuYW1lcyI6WyJhaE51dHMiLCJhbmd1bGFyIiwibW9kdWxlIiwiY3VzdG9tZXJzQ29udHJvbGxlciIsIiRzY29wZSIsIiRsb2ciLCJjdXN0b21lckxpc3QiLCJmaXJlYmFzZVNlcnZpY2UiLCIkZmlyZWJhc2UiLCIkZmlyZWJhc2VPYmplY3QiLCIkZmlyZWJhc2VBcnJheSIsInZtIiwidGhpcyIsImZpcmViYXNlIiwiZGF0YWJhc2UiLCJyZWYiLCJjaGlsZCIsImN1c3RvbWVyU2FsZXNEYXlzIiwic2VsZWN0ZWRDdXN0b21lciIsInNlYXNvbnMiLCIyMDE4IiwiaWQiLCJ0ZXN0TGlzdCIsInN0YXRlIiwic2VsZWN0ZWQiLCJjdXN0b21lciIsIiRpbmRleCIsIiRpZCIsImluZm8iLCJzZWxlY3RDdXN0b21lciIsImluZGV4X2lkIiwic2FsZXNfZGF5cyIsInVwZGF0ZUN1c3RvbWVyIiwiJHNhdmUiLCJ0aGVuIiwicyIsImNvbnNvbGUiLCJsb2ciLCJjYXRjaCIsImUiLCJjaGFuZ2VSZWNvcmQiLCJzZWxlY3QiLCJwcmV2IiwibmV4dCIsImdlbmVyYXRlX2J1bGtfc2FsZXNkYXlzIiwibGFuZGluZ0NvbnRyb2xsZXIiLCJsb2dpbkNvbnRyb2xsZXIiLCJjcmVkZW50aWFscyIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJhY3RpdmUiLCJzdWJtaXRDcmVkcyIsInBhc3MiLCJhdXRoVXNlciIsImVtYWlsIiwic2FsZXNEYXlzQ29udHJvbGxlciIsInNhbGVzZGF5c0xpc3QiLCJzZWxlY3RlZFJlY29yZCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInVwZGF0ZVJlY29yZCIsInJlY29yZF9pZCIsImFkZFNhbGVzRGF5IiwiJGFkZCIsImRhdGUiLCJzY2hlZHVsZSIsImxvYWRfaW4iLCJkYXRldGltZSIsInNhbGVzX2RheV9pZCIsImxvYWRfb3V0Iiwib3BlbiIsImNsb3NlIiwic2FsZXNfc3RhcnQiLCJzYWxlc19lbmQiLCJzZWFzb24iLCJuYW1lIiwiZnJlcXVlbmN5IiwiaW5zdGFuY2UiLCJ0b3RhbCIsImtleSIsImRpcmVjdGl2ZSIsInJlc3RyaWN0IiwidGVtcGxhdGVVcmwiLCJyZXBsYWNlIiwic2NvcGUiLCJsaW5rIiwibGlua0Z1bmMiLCJjb250cm9sbGVyIiwiY3VzdG9tZXJMaXN0Q29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsImJpbmRUb0NvbnRyb2xsZXIiLCJlbCIsImF0dHIiLCJjdHJsIiwiJGluamVjdCIsImxvZ2luUGFzc3dvcmQiLCJsb2dpblBhc3N3b3JkQ29udHJvbGxlciIsImxvZ2luVXNlcm5hbWUiLCJsb2dpblVzZXJuYW1lQ29udHJvbGxlciIsImdldCIsImN1c3RvbWVyX2xpc3QiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImF1dGgiLCJzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCIsImVycm9yIiwiZXJyb3JDb2RlIiwiY29kZSIsImVycm9yTWVzc2FnZSIsIm1lc3NhZ2UiLCJ0ZXN0IiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsImhhc2hQcmVmaXgiLCJ3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QUFBLFNBQUEsT0FBQSxlQUFBLGtCQUFBLFlBQUEsa0JBQUEsa0JDSkE3RixRQUNBQyxPQUFBLE9BQ0FxRixXQUFBLG9CQUFBMUMsbUJBRUFBLGtCQUFBaUQsUUFBQSxDQUFBLFNBQUEsUUNKQTdGLFFBQ0FDLE9BQUEsT0FDQXFGLFdBQUEsa0JBQUF6QyxpQkFFQUEsZ0JBQUFnRCxRQUFBLENBQUEsU0FBQSxPQUFBLG1CQ0pBN0YsUUFDQUMsT0FBQSxPQUNBcUYsV0FBQSxzQkFBQWhDLHFCQUVBQSxvQkFBQXVDLFFBQUEsQ0FBQSxTQUFBLE9BQUEsWUFBQSxpQkFBQSxtQkNFQTdGLFFBQ0FDLE9BQUEsT0FDQThFLFVBQUEsZUFBQTFFLGNDREFMLFFBQ0FDLE9BQUEsT0FDQThFLFVBQUEsZ0JBQUFlLGVDRkE5RixRQUNBQyxPQUFBLE9BQ0E4RSxVQUFBLGdCQUFBaUIsZUNIQWhHLFFBQ0FDLE9BQUEsT0FDQXFILFFBQUEsa0JBQUFoSCxpQkFHQUEsZ0JBQUF1RixRQUFBLENBQUEsWUFBQSxrQkFBQSxrQkNOQTdGLFFBQ0FDLE9BQUEsT0FDQThHLE9BQUFBIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIE1PRFVMRVxudmFyIGFoTnV0cyA9IGFuZ3VsYXIubW9kdWxlKCdjbmUnLCBbJ25nUm91dGUnLCAnZmlyZWJhc2UnLCAnbmdTYW5pdGl6ZSddKTtcbiIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdjbmUnKVxuICAgIC5jb250cm9sbGVyKCdjdXN0b21lcnNDb250cm9sbGVyJywgY3VzdG9tZXJzQ29udHJvbGxlcik7XG5cbmN1c3RvbWVyc0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywnJGxvZycsICdjdXN0b21lckxpc3QnLCAnZmlyZWJhc2VTZXJ2aWNlJywgJyRmaXJlYmFzZScsICckZmlyZWJhc2VPYmplY3QnLCAnJGZpcmViYXNlQXJyYXknXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjdXN0b21lcnNDb250cm9sbGVyKCRzY29wZSwgJGxvZywgY3VzdG9tZXJMaXN0LCBmaXJlYmFzZVNlcnZpY2UsICRmaXJlYmFzZSwgJGZpcmViYXNlT2JqZWN0LCAkZmlyZWJhc2VBcnJheSkge1xuXG5cdC8vZGVmaW5lIHZpZXcgbW9kZWwgdmFyaWFibGVcblx0dmFyIHZtID0gdGhpcztcblx0dm0uY3VzdG9tZXJMaXN0ID0gJGZpcmViYXNlQXJyYXkoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZCgnY3VzdG9tZXJzJykpO1xuXHR2bS5jdXN0b21lclNhbGVzRGF5cyA9IFtdO1xuXHR2bS5zZWxlY3RlZEN1c3RvbWVyID0geyBzZWFzb25zOiB7IFwiMjAxOFwiOiB7IGlkOiAyMDE4fSB9IH07XG5cdHZtLnRlc3RMaXN0ID0gWydhJywgJ2InLCAnYyddOyAvLyRmaXJlYmFzZUFycmF5KGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCkuY2hpbGQoJ2N1c3RvbWVycycpLmNoaWxkKCdjdXN0b21lcl9saXN0JykpO1xuXHR2bS5zdGF0ZSA9IHtcblx0XHRzZWxlY3RlZDoge1xuXHRcdFx0Y3VzdG9tZXI6IHtcblx0XHRcdFx0JGluZGV4OiBcIlwiLFxuXHRcdFx0XHQkaWQ6IFwiXCIsXG5cblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0Ly9pZGVudGlmeSB3aGVyZSB3ZSBhcmVcblx0JGxvZy5pbmZvKCdpbiB0aGUgY3VzdG9tZXJzIGNvbnRyb2xsZXInKTtcdC8vVE9ETzogVEFLRSBUSElTIE9VVCBMQVRFUlxuXHRcblxuXHQvKlxuXHQqXHRMT0NBTCBGVU5DVElPTlMgR08gSEVSRVxuXHQqXG5cdCovXG5cblx0Ly9cdExPQUQgQ1VTVE9NRVIgTElTVFxuXHRmdW5jdGlvbiBsb2FkX2N1c3RvbWVyX2xpc3QoKSB7XG5cdFx0XG5cdFx0Ly90cmFjayBzdGFydGluZyBmdW5jdGlvblxuXHRcdC8vY29uc29sZS5sb2coJ2xvYWRpbmcgdGhlIGN1c3RvbWVyIGxpc3QnKTtcblx0XHRcblx0XHQvL2dhdGhlciB0aGUgZGF0YVxuXHRcdGZpcmViYXNlU2VydmljZS5nZXQuY3VzdG9tZXJfbGlzdCgpLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhzKSB7XG5cdFx0XHRcblx0XHRcdC8vY29uc29sZS5sb2coJ2dvdCB0aGlzIHJlc3BvbnMnLCBzKTtcblx0XHRcdFxuXHRcdFx0Ly93aGVuIHRoZSBsaXN0IGhhcyBiZWVuIGxvYWRlZCB1cGRhdGUgdGhlIHZhcmlhYmxlc1xuXHRcdFx0Ly92bS5jdXN0b21lckxpc3QgPSBzO1xuXHRcdFx0dm0uY3VzdG9tZXJMaXN0ID0gJGZpcmViYXNlQXJyYXkoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZCgnY3VzdG9tZXJzJykuY2hpbGQoJ2N1c3RvbWVyX2xpc3QnKSk7XG5cblx0XHRcdC8vcmVmbGVjdCB0aGUgY2hhbmdlc1xuXHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xuXHRcdFx0Ly9pZiB0aGVyZSB3YXMgYW4gZXJyb3IgdGhyb3cgdGhlIGVycm9yXG5cdFx0XHRjb25zb2xlLmxvZygnZXJyb3InKTtcblx0XHR9KTtcblx0fTtcblxuXHQvKlxuXHQqXHRWSUVXIE1PREVMIEZVTkNUSU9OUyBHTyBIRVJFXG5cdCpcblx0Ki9cdFxuXHQvL1x0U0VMRUNUIENMSUNLRUQgQ1VTVE9NRVJcblx0dm0uc2VsZWN0Q3VzdG9tZXIgPSBmdW5jdGlvbihpbmRleF9pZCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZtLnN0YXRlLnNlbGVjdGVkLmN1c3RvbWVyLiRpbmRleCA9IGluZGV4X2lkO1xuXHRcdHZtLnN0YXRlLnNlbGVjdGVkLmN1c3RvbWVyLiRpZCA9IHZtLmN1c3RvbWVyTGlzdFtpbmRleF9pZF0uJGlkO1xuXHRcdHZtLnNlbGVjdGVkQ3VzdG9tZXIgPSAkZmlyZWJhc2VPYmplY3QoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZCgnY3VzdG9tZXJzJykuY2hpbGQodm0uY3VzdG9tZXJMaXN0W2luZGV4X2lkXS4kaWQpKTtcblx0XHR2bS5jdXN0b21lclNhbGVzRGF5cyA9IHZtLnNlbGVjdGVkQ3VzdG9tZXIuc2FsZXNfZGF5cztcblx0fTtcblxuXHQvL1x0VVBEQVRFIFRIRSBDVVNUT01FUiBSRUNPUkRcblx0dm0udXBkYXRlQ3VzdG9tZXIgPSBmdW5jdGlvbigpIHtcblx0XHR2bS5zZWxlY3RlZEN1c3RvbWVyLiRzYXZlKCkudGhlbihmdW5jdGlvbiBzdWNjZXMocykge1xuXHRcdFx0Y29uc29sZS5sb2coJ3VwZGF0ZWQgcmVjb3JkIHN1Y2Nlc3NmdWxseScpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdlcnJvciB1cGRhdGluZyByZWNvcmQnLCBlKTtcblx0XHR9KTtcblx0fTtcblxuXHQvL1x0TU9WRSBUTyBUSEUgTkVYVCBDVVNUT01FUlxuXHR2bS5jaGFuZ2VSZWNvcmQgPSBmdW5jdGlvbihzZWxlY3QpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgb3B0biA9IHsgXCJwcmV2XCI6IDAsIFwibmV4dFwiOiAxIH07XG5cdFx0dmFyIGluZGV4X2lkID0gdm0uc3RhdGUuc2VsZWN0ZWQuY3VzdG9tZXIuJGluZGV4O1xuXG5cdFx0Ly9jb25zb2xlLmxvZyhpbmRleF9pZCk7XG5cblx0XHRzd2l0Y2gob3B0bltzZWxlY3RdKSB7XG5cdFx0XHRjYXNlIDA6XG5cdFx0XHRcdC8vY29uc29sZS5sb2coJ3ByZXZpb3VzIHJlY29yZCcpO1xuXHRcdFx0XHR2bS5zZWxlY3RDdXN0b21lcih2bS5zdGF0ZS5zZWxlY3RlZC5jdXN0b21lci4kaW5kZXggLSAxKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDE6XG5cdFx0XHRcdC8vY29uc29sZS5sb2coJ25leHQgcmVjb3JkJyk7XG5cdFx0XHRcdHZtLnNlbGVjdEN1c3RvbWVyKHZtLnN0YXRlLnNlbGVjdGVkLmN1c3RvbWVyLiRpbmRleCArIDEpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fTtcblxuXHQvL1x0R0VORVJBVEUgQlVMSyBTQUxFUyBEQVlTXG5cdHZtLmdlbmVyYXRlX2J1bGtfc2FsZXNkYXlzID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0Y29uc29sZS5sb2coJ2dlbmVyYXRpbmcgYnVsayBzYWxlc2RheXMnLCB2bS5zZWxlY3RlZEN1c3RvbWVyLnNhbGVzX2RheXMpO1xuXHRcdFxuXHRcdC8qaWYodm0uc2VsZWN0ZWRDdXN0b21lci5zYWxlc19kYXlzWzBdID09IHVuZGVmaW5lZCkge1xuXHRcdFx0Y29uc29sZS5sb2coJ3NhbGVzIGRheXMgdW5kZWZpbmVkJylcblx0XHRcdHZtLnNlbGVjdGVkQ3VzdG9tZXIuc2FsZXNfZGF5c1swXSA9IFwiYW9pc2dvaTIzb2Jzb2IyM29paHNzXCJcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc29sZS5sb2coJ3NhbGVzIGRheXMgZGVmaW5lZCcpO1xuXHRcdFx0dmFyIGxhc3RrZXkgPSAwO1xuXHRcdFx0T2JqZWN0LmtleXModm0uc2VsZWN0ZWRDdXN0b21lci5zYWxlc19kYXlzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRcdFx0aWYoa2V5ICE9ICdwbGFjZWhvbGRlcicpIGxhc3RrZXkgPSBwYXJzZUludChrZXkpO1xuXHRcdFx0fSk7XG5cdFx0XHR2bS5zZWxlY3RlZEN1c3RvbWVyLnNhbGVzX2RheXNbbGFzdGtleSArIDFdID0gXCJhb3NpZ2hhb2lzaGdpb2hzZ1wiXG5cdFx0fVxuXG5cdFx0Ly9zYXZlIHZhbHVlc1xuXHRcdHZtLnVwZGF0ZUN1c3RvbWVyKCk7Ki9cblx0fTtcblxuXHQvL3J1biB0aGUgdGVzdFxuXG5cdC8vb24gcGFnZSBsb2FkXG5cdC8vbG9hZF9jdXN0b21lcl9saXN0KCk7XG5cblxufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdjbmUnKVxuICAgIC5jb250cm9sbGVyKCdsYW5kaW5nQ29udHJvbGxlcicsIGxhbmRpbmdDb250cm9sbGVyKTtcblxubGFuZGluZ0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywnJGxvZyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGxhbmRpbmdDb250cm9sbGVyKCRzY29wZSwgJGxvZykge1xuXG5cdC8vZGVmaW5lIHZpZXcgbW9kZWwgdmFyaWFibGVcblx0dmFyIHZtID0gdGhpcztcblxuXHQkbG9nLmluZm8oJ2luIHRoZSBsYW5kaW5nIGNvbnRyb2xsZXInKTtcdC8vVE9ETzogVEFLRSBUSElTIE9VVCBMQVRFUlxuXG5cdC8vZGVmaW5lIGxvY2FsIGZ1bmN0aW9uc1xuXG5cdC8vcnVuIHRoZSB0ZXN0XG5cblxufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdjbmUnKVxuICAgIC5jb250cm9sbGVyKCdsb2dpbkNvbnRyb2xsZXInLCBsb2dpbkNvbnRyb2xsZXIpO1xuXG5sb2dpbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywnJGxvZycsICdmaXJlYmFzZVNlcnZpY2UnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBsb2dpbkNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCBmaXJlYmFzZVNlcnZpY2UpIHtcblxuXHQvL2RlZmluZSB2aWV3IG1vZGVsIHZhcmlhYmxlXG5cdHZhciB2bSA9IHRoaXM7XG5cblx0Ly9kZWZpbmUgdmlldyBtb2RlbCB2YXJpYWJsZXNcblx0dm0uY3JlZGVudGlhbHMgPSB7XG5cdFx0dXNlcm5hbWU6IFwiXCIsXG5cdFx0cGFzc3dvcmQ6IFwiXCJcblx0fTtcblxuXHR2bS5hY3RpdmUgPSB7XG5cdFx0dXNlcm5hbWU6IGZhbHNlLFxuXHRcdHBhc3N3b3JkOiBmYWxzZVxuXHR9O1xuXG5cdC8vZGVmaW5lIHZpZXcgbW9kZWwgZnVuY3Rpb25zXG5cdHZtLnN1Ym1pdENyZWRzID0gZnVuY3Rpb24odXNlcm5hbWUsIHBhc3MpIHtcblx0XHRcblx0XHRjb25zb2xlLmxvZygnc3VibWl0Q3JlZHMgY2xpY2tlZCcpO1xuXHRcdFxuXHRcdC8vc3VibWl0IGNyZWRlbnRpYWxzXG5cdFx0ZmlyZWJhc2VTZXJ2aWNlLmF1dGhVc2VyLmVtYWlsKHVzZXJuYW1lLCBwYXNzKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3MgKHMpIHtcblxuXHRcdFx0Y29uc29sZS5sb2coJ3dhcyBzdWNjZXNzJywgcyk7XG5cblx0XHR9KS5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIkVycm9yOlwiLCBlKTtcblx0XHR9KTtcblxuXHR9O1xuXG5cdCRsb2cuaW5mbygnaW4gdGhlIGxvZ2luIGNvbnRyb2xsZXInKTtcdC8vVE9ETzogVEFLRSBUSElTIE9VVCBMQVRFUlxuXG5cdC8vZGVmaW5lIGxvY2FsIGZ1bmN0aW9uc1xuXG5cdC8vcnVuIHRoZSB0ZXN0XG5cblxufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdjbmUnKVxuICAgIC5jb250cm9sbGVyKCdzYWxlc0RheXNDb250cm9sbGVyJywgc2FsZXNEYXlzQ29udHJvbGxlcik7XG5cbnNhbGVzRGF5c0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywnJGxvZycsICckZmlyZWJhc2UnLCAnJGZpcmViYXNlQXJyYXknLCAnJGZpcmViYXNlT2JqZWN0J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gc2FsZXNEYXlzQ29udHJvbGxlcigkc2NvcGUsICRsb2csICRmaXJlYmFzZSwgJGZpcmViYXNlQXJyYXksICRmaXJlYmFzZU9iamVjdCkge1xuXG5cdC8vZGVmaW5lIHZpZXcgbW9kZWwgdmFyaWFibGVcblx0dmFyIHZtID0gdGhpcztcblx0dm0uc2FsZXNkYXlzTGlzdCA9ICRmaXJlYmFzZUFycmF5KGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCkuY2hpbGQoJ3NhbGVzX2RheXMnKSk7XG5cdHZtLnNlbGVjdGVkUmVjb3JkID0geyBpZDogXCIyMDM5NzUyXCIgfTtcblxuXHQvL2lkZW50aWZ5IGNvbnRyb2xsZXJcblx0JGxvZy5pbmZvKCdpbiB0aGUgc2FsZXMgZGF5cyBjb250cm9sbGVyJywgbmV3IERhdGUoKS50b0lTT1N0cmluZygpKTtcdC8vVE9ETzogVEFLRSBUSElTIE9VVCBMQVRFUlxuXG5cdC8vZGVmaW5lIGxvY2FsIGZ1bmN0aW9uc1xuXG5cdC8qXG5cdCpcdFZJRVcgTU9ERUwgRlVOQ1RJT05TIEdPIEhFUkVcblx0KlxuXHQqL1xuXHQvL1x0VVBEQVRFIFJFQ09SRFxuXHR2bS51cGRhdGVSZWNvcmQgPSBmdW5jdGlvbihyZWNvcmRfaWQpIHtcblx0XHRjb25zb2xlLmxvZygnZ290IHRoaXMgaWQnLCByZWNvcmRfaWQpO1xuXHRcdC8qdm0uc2FsZXNkYXlzTGlzdC4kc2F2ZShyZWNvcmRfaWQpLnRoZW4oZnVuY3Rpb24gc3VjY2VzKHMpIHtcblx0XHRcdGNvbnNvbGUubG9nKCd1cGRhdGVkIHJlY29yZCBzdWNjZXNzZnVsbHknKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnZXJyb3IgdXBkYXRpbmcgcmVjb3JkJywgZSk7XG5cdFx0fSk7Ki9cblx0fTtcblxuXHQvLyBBREQgTkVXIFNBTEVTIERBWVxuXHR2bS5hZGRTYWxlc0RheSA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0dm0uc2FsZXNkYXlzTGlzdC4kYWRkKHtcblx0XHRcdGRhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcblx0XHRcdHNjaGVkdWxlOiB7XG5cdFx0XHRcdGxvYWRfaW46IHtcblx0XHRcdFx0XHRkYXRldGltZTogXCJcIixcblx0XHRcdFx0XHRzYWxlc19kYXlfaWQ6IFwiXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0bG9hZF9vdXQ6IHtcblx0XHRcdFx0XHRkYXRldGltZTogXCJcIixcblx0XHRcdFx0XHRzYWxlc19kYXlfaWQ6IFwiXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0b3BlbjogXCJcIixcblx0XHRcdFx0Y2xvc2U6IFwiXCIsXG5cdFx0XHRcdHNhbGVzX3N0YXJ0OiBcIlwiLFxuXHRcdFx0XHRzYWxlc19lbmQ6IFwiXCJcblx0XHRcdH0sXG5cdFx0XHRjdXN0b21lcjogXCJcIixcblx0XHRcdHNlYXNvbjoge1xuXHRcdFx0XHRuYW1lOiBcIlwiLFxuXHRcdFx0XHRmcmVxdWVuY3k6IFwiXCIsXG5cdFx0XHRcdGluc3RhbmNlOiAwLFxuXHRcdFx0XHR0b3RhbDogMFxuXHRcdFx0fVxuXHRcdH0pLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhzKSB7XG5cdFx0XHQvL3NldCB0aGUgZmlyZWJhc2Ugb2JqZWN0XG5cdFx0XHRjb25zb2xlLmxvZyhzLmtleSk7XG5cdFx0XHR2bS5zZWxlY3RlZFJlY29yZCA9ICRmaXJlYmFzZU9iamVjdChmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigpLmNoaWxkKCdzYWxlc19kYXlzJykuY2hpbGQocy5rZXkpKTtcblx0XHRcdGNvbnNvbGUubG9nKHZtLnNlbGVjdGVkUmVjb3JkKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnZXJyb3InLCBlKTtcblx0XHR9KTtcblxuXHRcdC8qdm0uc2FsZXNkYXlzTGlzdC5zYXZlKCkudGhlbihmdW5jdGlvbiBzdWNjZXNzKHMpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdzdWNjZXNzJywgcyk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xuXHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yJywgZSk7XG5cdFx0fSk7Ki9cblxuXHR9O1xuXHQvL3J1biB0aGUgdGVzdFxuXG5cbn0iLCIvKlxuKlx0Q1VTVE9NRVIgTElTVFxuKlxuKlx0VGhpcyBtb2R1bGUgaXMgZGVzaWduZWQgdG8gXG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ2NuZScpXG5cdC5kaXJlY3RpdmUoJ2N1c3RvbWVyTGlzdCcsIGN1c3RvbWVyTGlzdCk7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gY3VzdG9tZXJMaXN0KCkge1xuXHQvL2RlZmluZSB0aGUgZGlyZWN0aXZlXG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6IFwiQUVDTVwiLFxuXHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZGlyZWN0aXZlcy9jdXN0b21lci1saXN0LmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHR9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IGN1c3RvbWVyTGlzdENvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHt9XG5cblx0Y3VzdG9tZXJMaXN0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZyddO1xuXHRcblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGN1c3RvbWVyTGlzdENvbnRyb2xsZXIoJHNjb3BlLCAkbG9nKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0Y29uc29sZS5sb2coJ2luIGNvc3RvbWVyIExpc3QgY29udHJvbGxlcicpO1xuXHR9XG5cblx0Ly9wYXNzIGl0IGJhY2tcblx0cmV0dXJuIGRpcmVjdGl2ZTtcbn0iLCIvKlxuKlx0RkxBVk9SIE1JWEVSXG4qXG4qXHRUaGlzIG1vZHVsZSBpcyBkZXNpZ25lZCB0byBhbGxvdyBjdXN0b21lcnMgdG8gbWl4IGFuZCBtYXRjaFxuKlx0b3VyIGRlbGljaW91cyBmbGF2b3JzIGFuZCB0byBwaWNrIHRoaWVyIHNpemluZy5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnY25lJylcblx0LmRpcmVjdGl2ZSgnbG9naW5QYXNzd29yZCcsIGxvZ2luUGFzc3dvcmQpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGxvZ2luUGFzc3dvcmQoKSB7XG5cdC8vZGVmaW5lIHRoZSBkaXJlY3RpdmVcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogXCJBRUNNXCIsXG5cdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL2xvZ2luLXBhc3N3b3JkLmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdHBhc3N3b3JkOiBcIj1cIixcblx0XHRcdGFjdGl2ZTogXCI9XCJcblx0XHR9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IGxvZ2luUGFzc3dvcmRDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7fVxuXG5cdGxvZ2luUGFzc3dvcmRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJ107XG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsb2dpblBhc3N3b3JkQ29udHJvbGxlcigkc2NvcGUsICRsb2cpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdH1cblxuXHQvL3Bhc3MgaXQgYmFja1xuXHRyZXR1cm4gZGlyZWN0aXZlO1xufSIsIi8qXG4qXHRGTEFWT1IgTUlYRVJcbipcbipcdFRoaXMgbW9kdWxlIGlzIGRlc2lnbmVkIHRvIGFsbG93IGN1c3RvbWVycyB0byBtaXggYW5kIG1hdGNoXG4qXHRvdXIgZGVsaWNpb3VzIGZsYXZvcnMgYW5kIHRvIHBpY2sgdGhpZXIgc2l6aW5nLlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdjbmUnKVxuXHQuZGlyZWN0aXZlKCdsb2dpblVzZXJuYW1lJywgbG9naW5Vc2VybmFtZSk7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gbG9naW5Vc2VybmFtZSgpIHtcblx0Ly9kZWZpbmUgdGhlIGRpcmVjdGl2ZVxuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiBcIkFFQ01cIixcblx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvbG9naW4tdXNlcm5hbWUuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge1xuXHRcdFx0dXNlcm5hbWU6IFwiPVwiLFxuXHRcdFx0YWN0aXZlOiBcIj1cIlxuXHRcdH0sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogbG9naW5Vc2VybmFtZUNvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHt9XG5cblx0bG9naW5Vc2VybmFtZUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnXTtcblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxvZ2luVXNlcm5hbWVDb250cm9sbGVyKCRzY29wZSwgJGxvZykge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBzZWxmID0gdGhpcztcblx0fVxuXG5cdC8vcGFzcyBpdCBiYWNrXG5cdHJldHVybiBkaXJlY3RpdmU7XG59IiwiLypcbipcbipcbiovXG5cbi8vZGVmaW5lIG1vZHVsZVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ2NuZScpXG4gICAgLmZhY3RvcnkoJ2ZpcmViYXNlU2VydmljZScsIGZpcmViYXNlU2VydmljZSk7XG5cbi8vZGVwZW5kZW5jeSBpbmplY3Rpb25zXG5maXJlYmFzZVNlcnZpY2UuJGluamVjdCA9IFsnJGZpcmViYXNlJywgJyRmaXJlYmFzZU9iamVjdCcsICckZmlyZWJhc2VBcnJheSddO1xuXG4vL2RlY2xhcmUgdGhlIHNlcnZpY2Vcbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gZmlyZWJhc2VTZXJ2aWNlKCRmaXJlYmFzZSwgJGZpcmViYXNlT2JqZWN0LCAkZmlyZWJhc2VBcnJheSkge1xuXG5cdC8vZGVmaW5lIG1ldGhvZHNcblx0dmFyIEZCU2VydmljZSA9IHtcblx0XHRnZXQ6IHtcblx0XHRcdGN1c3RvbWVyX2xpc3Q6IGdldF9jdXN0b21lcl9saXN0XG5cdFx0fSxcblx0XHRhdXRoVXNlcjoge1xuXHRcdFx0ZW1haWw6IGF1dGhVc2VyX2VtYWlsXG5cdFx0fSxcblx0XHR0ZXN0OiB0ZXN0XG5cdH07XG5cblx0Ly9cdEFVVEhFTlRJQ0FURSBVU0VSXG5cdGZ1bmN0aW9uIGF1dGhVc2VyX2VtYWlsKGVtYWlsLCBwYXNzd29yZCkge1xuXHRcdFxuXHRcdGNvbnNvbGUubG9nKCdhdXRoZW50aWNhdGluZyB1c2VyJylcblxuXHRcdC8vcmV0dXJuIGFzeW5jIHdvcmtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHRmaXJlYmFzZS5hdXRoKCkuc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoZW1haWwsIHBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uIHN1Y2VzcyhzKSB7XG5cblx0XHRcdFx0cmVzb2x2ZShzKTtcblxuXHRcdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0Ly8gSGFuZGxlIEVycm9ycyBoZXJlLlxuXHRcdFx0XHR2YXIgZXJyb3JDb2RlID0gZXJyb3IuY29kZTtcblx0XHRcdFx0dmFyIGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG5cdFx0XHRcdHJlamVjdCh7Y29kZTogZXJyb3JDb2RlICwgbWVzc2FnZTogZXJyb3JNZXNzYWdlfSk7XG5cblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdH07XG5cblx0Ly9cdEdFVCBDVVNUT01FUiBMSVNUXG5cdGZ1bmN0aW9uIGdldF9jdXN0b21lcl9saXN0KCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXG5cdFx0Ly9jb25zb2xlLmxvZygnZ2V0dGluZyBjdXN0b21lciBsaXN0Jyk7XG5cblx0XHQvL3JldHVybiBhc3luYyB3b3JrXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgICAgIFxuXHQgICAgICAgIC8vdmFyIHRlc3QgPSBcblxuXHQgICAgICAgIC8vaGl0IHRoZSBzZXJ2ZXIgZm9yIHRoZSBcblx0ICAgICAgICByZXNvbHZlKFtcIm9uZVwiLCBcInR3b1wiLCAndGhyZWUnXSk7XG5cblx0ICAgIH0pO1xuXHR9XG5cblx0Ly9cdFRFU1QgRlVOQ1RJT05cblx0ZnVuY3Rpb24gdGVzdCgpIHsgcmV0dXJuKCdnb29kIHRlc3QgZnJvbSBGQiBTZXJ2aWNlJyk7IH07XG5cblx0Ly90dXJuIHRoZSBtZXRob2RcbiAgICByZXR1cm4gRkJTZXJ2aWNlO1x0XG59O1xuXG4iLCIvKlxuKlx0Uk9VVEVTLUNPTkZJR1xuKlxuKlx0VGhpcyBtb2R1bGUgc2V0cyB1cCBhbGwgdGhlIHJlcXVpcmVkIGFuZ3VsYXIgcm91dGVzIGZvciB0aGlzIHdlYiBhcHAuXG4qL1xuYW5ndWxhclxuICAgIC5tb2R1bGUoJ2NuZScpXG4gICAgLmNvbmZpZyhjb25maWcpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGNvbmZpZygkcm91dGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcblx0JGxvY2F0aW9uUHJvdmlkZXIuaGFzaFByZWZpeCgnJyk7XG4gICAgJHJvdXRlUHJvdmlkZXJcblx0Ly9QVUJMSUMgUk9VVEVTXG4gICAgLndoZW4oJy8nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvbGFuZGluZ1BhZ2UuaHRtJywgICAgICAvLyd2aWV3cy9tYWluUGFnZS5odG0nXG4gICAgICAgIGNvbnRyb2xsZXI6ICdsYW5kaW5nQ29udHJvbGxlcicsICAgICAgICAgICAvLydtYWluQ29udHJvbGxlcidcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAud2hlbignL2N1c3RvbWVycycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9jdXN0b21lcnNQYWdlLmh0bScsICAgICAgLy8ndmlld3MvbWFpblBhZ2UuaHRtJ1xuICAgICAgICBjb250cm9sbGVyOiAnY3VzdG9tZXJzQ29udHJvbGxlcicsICAgICAgICAgICAvLydtYWluQ29udHJvbGxlcidcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICByZXNvbHZlOiB7IC8qIEBuZ0luamVjdCAqL1xuICAgICAgICAgICAgY3VzdG9tZXJMaXN0OiBjdXN0b21lckxpc3RcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLndoZW4oJy9zYWxlc2RheXMnLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3Mvc2FsZXNEYXlzUGFnZS5odG0nLCAgICAgIC8vJ3ZpZXdzL21haW5QYWdlLmh0bSdcbiAgICAgICAgY29udHJvbGxlcjogJ3NhbGVzRGF5c0NvbnRyb2xsZXInLCAgICAgICAgICAgLy8nbWFpbkNvbnRyb2xsZXInXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgIH0pXG4gICAgLndoZW4oJy9sb2dpbicsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9sb2dpblBhZ2UuaHRtJywgICAgICAvLyd2aWV3cy9tYWluUGFnZS5odG0nXG4gICAgICAgIGNvbnRyb2xsZXI6ICdsb2dpbkNvbnRyb2xsZXInLCAgICAgICAgICAgLy8nbWFpbkNvbnRyb2xsZXInXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgIH0pXG5cdC5vdGhlcndpc2Uoe1xuICAgICAgICByZWRpcmVjdFRvOiAnLydcbiAgICB9KTtcbn1cblxuLypcbiogICBSRVFVSVJFRCBGVU5DVElPTlNcbipcbiovXG5cbi8vICBDVVNUT01FUlMgTElTVFxuZnVuY3Rpb24gY3VzdG9tZXJMaXN0KCkge1xuICAgIFxuICAgIC8vcmV0dXJuIHRoZSBwcm9taXNlXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAvL2hpdCB0aGUgc2VydmVyIGZvciB0aGUgXG4gICAgICAgIHJlc29sdmUoJ2dvb2QgdGVzdCcpO1xuICAgIH0pO1xuXG59O1xuXG4iXX0=
