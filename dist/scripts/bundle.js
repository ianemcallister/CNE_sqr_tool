config.$inject=["$routeProvider","$locationProvider"];var ahNuts=angular.module("cne",["ngRoute","firebase","ngSanitize"]);function customersController(e,t,o,s,n,r,l){var a=this;a.customerList=l(firebase.database().ref().child("customers")),a.customerSalesDays=[],a.selectedCustomer={seasons:{2018:{id:2018}}},a.testList=["a","b","c"],a.state={selected:{customer:{$index:"",$id:""}}},t.info("in the customers controller"),a.selectCustomer=function(e){a.state.selected.customer.$index=e,a.state.selected.customer.$id=a.customerList[e].$id,a.selectedCustomer=r(firebase.database().ref().child("customers").child(a.customerList[e].$id)),a.customerSalesDays=a.selectedCustomer.sales_days},a.updateCustomer=function(){a.selectedCustomer.$save().then(function(e){console.log("updated record successfully")}).catch(function(e){console.log("error updating record",e)})},a.changeRecord=function(e){a.state.selected.customer.$index;switch({prev:0,next:1}[e]){case 0:a.selectCustomer(a.state.selected.customer.$index-1);break;case 1:a.selectCustomer(a.state.selected.customer.$index+1)}},a.generate_bulk_salesdays=function(){console.log("generating bulk salesdays",a.selectedCustomer.sales_days)}}function landingController(e,t){t.info("in the landing controller")}function loginController(e,t,o){var s=this;s.credentials={username:"",password:""},s.active={username:!1,password:!1},s.submitCreds=function(e,t){console.log("submitCreds clicked"),o.authUser.email(e,t).then(function(e){console.log("was success",e)}).catch(function(e){console.log("Error:",e)})},t.info("in the login controller")}function salesDaysController(t,e,o,s,n,r,l){var i=this;i.salesdaysList=s(firebase.database().ref().child("sales_days")),i.selectedRecord={id:"2039752"},i.testCustomers=["Beaverton","Orenco"],i.testSeasons=["2018","2017"],i.testTimes=["9:00 AM","9:15 AM","9:30 AM","9:45 AM"],i.scheduling_params={customer:"",customer_id:"",season:"",bookend_dates:{first:"",last:""},repeats:"",event_days:{Mon:!1,Tue:!1,Wed:!1,Thu:!1,Fri:!1,Sat:!1,Sun:!1},same_day_load_in_out:!0,schedule:{load_in:"",load_out:"",open:"",close:"",sales_start:"",sales_end:""}},i.tempIterations=[],i.tempTimes={load_in:"",load_out:"",open:"",close:"",sales_start:"",sales_end:""},e.info("in the sales days controller"),i.updateRecord=function(e){console.log("got this id",e)},i.addSalesDay=function(){i.salesdaysList.$add({date:(new Date).toISOString(),schedule:{load_in:{datetime:"",sales_day_id:""},load_out:{datetime:"",sales_day_id:""},open:"",close:"",sales_start:"",sales_end:""},customer:"",season:{name:"",frequency:"",instance:0,total:0}}).then(function(e){console.log(e.key),i.selectedRecord=n(firebase.database().ref().child("sales_days").child(e.key)),console.log(i.selectedRecord)}).catch(function(e){console.log("error",e)})},i.generateSalesDays=function(){var e;(e=i.scheduling_params,new Promise(function(t,o){l.sales_days.compile_batch(e).then(function(e){t(e)}).catch(function(e){o(e)})})).then(function(e){console.log("successfully built",e),i.tempIterations=e,t.$apply()}).catch(function(e){console.log(e)})},i.foramtTime=function(e){console.log("formatting time",e);var t=new Date,o=t.getFullYear(),s=t.getMonth(),n=t.getDate(),r=i.tempTimes[e].split(":"),l=r[1].split(" "),a=parseInt(r[0]),c=l[0];"PM"==l[1]&&(a+=12).toString(),s<10&&(s="0"+s),n<10&&(n="0"+n),a<10&&(a="0"+a),i.scheduling_params.schedule[e]=o+"-"+s+"-"+n+"T"+a+":"+c+":00-07:00"},i.saveSalesDays=function(){i.tempIterations.forEach(function(e){i.salesdaysList.$add(e).then(function(e){var t=e.key;console.log(t)})})}}function customerList(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/customer-list.directive.htm",replace:!0,scope:{},link:t,controller:o,controllerAs:"vm",bindToController:!0};function t(e,t,o,s){}function o(e,t){console.log("in costomer List controller")}return o.$inject=["$scope","$log"],e}function loginPassword(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/login-password.directive.htm",replace:!0,scope:{password:"=",active:"="},link:t,controller:o,controllerAs:"vm",bindToController:!0};function t(e,t,o,s){}function o(e,t){}return o.$inject=["$scope","$log"],e}function loginUsername(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/login-username.directive.htm",replace:!0,scope:{username:"=",active:"="},link:t,controller:o,controllerAs:"vm",bindToController:!0};function t(e,t,o,s){}function o(e,t){}return o.$inject=["$scope","$log"],e}function dataService(s){return{sales_days:{compile_batch:function(e){return new Promise(function(t,o){s({method:"POST",url:"/api/sales_days/compile_new_sales_days_batch",headers:{"Content-Type":"application/json"},data:e}).then(function(e){t(e.data)},function(e){o(e)})})}}}}function firebaseService(e,t,o){return{get:{customer_list:function(){return new Promise(function(e,t){e(["one","two","three"])})}},authUser:{email:function(e,o){return console.log("authenticating user"),new Promise(function(t,s){firebase.auth().signInWithEmailAndPassword(e,o).then(function(e){t(e)}).catch(function(e){var t=e.code,o=e.message;s({code:t,message:o})})})}},test:function(){return"good test from FB Service"}}}function config(e,t){t.hashPrefix(""),e.when("/",{templateUrl:"views/landingPage.htm",controller:"landingController",controllerAs:"vm"}).when("/customers",{templateUrl:"views/customersPage.htm",controller:"customersController",controllerAs:"vm",resolve:{customerList:customerList}}).when("/salesdays",{templateUrl:"views/salesDaysPage.htm",controller:"salesDaysController",controllerAs:"vm"}).when("/login",{templateUrl:"views/loginPage.htm",controller:"loginController",controllerAs:"vm"}).otherwise({redirectTo:"/"})}function customerList(){return new Promise(function(e,t){e("good test")})}angular.module("cne").controller("customersController",customersController),customersController.$inject=["$scope","$log","customerList","firebaseService","$firebase","$firebaseObject","$firebaseArray"],angular.module("cne").controller("landingController",landingController),landingController.$inject=["$scope","$log"],angular.module("cne").controller("loginController",loginController),loginController.$inject=["$scope","$log","firebaseService"],angular.module("cne").controller("salesDaysController",salesDaysController),salesDaysController.$inject=["$scope","$log","$firebase","$firebaseArray","$firebaseObject","$http","dataService"],angular.module("cne").directive("customerList",customerList),angular.module("cne").directive("loginPassword",loginPassword),angular.module("cne").directive("loginUsername",loginUsername),angular.module("cne").factory("dataService",dataService),dataService.$inject=["$http"],angular.module("cne").factory("firebaseService",firebaseService),firebaseService.$inject=["$firebase","$firebaseObject","$firebaseArray"],angular.module("cne").config(config);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMvd2ViYXBwLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9jdXN0b21lcnMtY29udHJvbGxlci5qcyIsInNjcmlwdHMvY29udHJvbGxlcnMvbGFuZGluZy1jb250cm9sbGVyLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9sb2dpbi1jb250cm9sbGVyLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9zYWxlc2RheXMtY29udHJvbGxlci5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9jdXN0b21lci1saXN0LmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL2xvZ2luLXBhc3N3b3JkLmRpcmVjdGl2ZS5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9sb2dpbi11c2VybmFtZS5kaXJlY3RpdmUuanMiLCJzY3JpcHRzL2ZhY3Rvcmllcy9kYXRhLnNlcnZpY2UuanMiLCJzY3JpcHRzL2ZhY3Rvcmllcy9maXJlYmFzZS5zZXJ2aWNlLmpzIiwic2NyaXB0cy9yb3V0ZXMvcm91dGVzLWNvbmZpZy5qcyJdLCJuYW1lcyI6WyJhaE51dHMiLCJhbmd1bGFyIiwibW9kdWxlIiwiY3VzdG9tZXJzQ29udHJvbGxlciIsIiRzY29wZSIsIiRsb2ciLCJjdXN0b21lckxpc3QiLCJmaXJlYmFzZVNlcnZpY2UiLCIkZmlyZWJhc2UiLCIkZmlyZWJhc2VPYmplY3QiLCIkZmlyZWJhc2VBcnJheSIsInZtIiwidGhpcyIsImZpcmViYXNlIiwiZGF0YWJhc2UiLCJyZWYiLCJjaGlsZCIsImN1c3RvbWVyU2FsZXNEYXlzIiwic2VsZWN0ZWRDdXN0b21lciIsInNlYXNvbnMiLCIyMDE4IiwiaWQiLCJ0ZXN0TGlzdCIsInN0YXRlIiwic2VsZWN0ZWQiLCJjdXN0b21lciIsIiRpbmRleCIsIiRpZCIsImluZm8iLCJzZWxlY3RDdXN0b21lciIsImluZGV4X2lkIiwic2FsZXNfZGF5cyIsInVwZGF0ZUN1c3RvbWVyIiwiJHNhdmUiLCJ0aGVuIiwicyIsImNvbnNvbGUiLCJsb2ciLCJjYXRjaCIsImUiLCJjaGFuZ2VSZWNvcmQiLCJzZWxlY3QiLCJwcmV2IiwibmV4dCIsImdlbmVyYXRlX2J1bGtfc2FsZXNkYXlzIiwibGFuZGluZ0NvbnRyb2xsZXIiLCJsb2dpbkNvbnRyb2xsZXIiLCJjcmVkZW50aWFscyIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJhY3RpdmUiLCJzdWJtaXRDcmVkcyIsInBhc3MiLCJhdXRoVXNlciIsImVtYWlsIiwic2FsZXNEYXlzQ29udHJvbGxlciIsIiRodHRwIiwiZGF0YVNlcnZpY2UiLCJzYWxlc2RheXNMaXN0Iiwic2VsZWN0ZWRSZWNvcmQiLCJ0ZXN0Q3VzdG9tZXJzIiwidGVzdFNlYXNvbnMiLCJ0ZXN0VGltZXMiLCJzY2hlZHVsaW5nX3BhcmFtcyIsImN1c3RvbWVyX2lkIiwic2Vhc29uIiwiYm9va2VuZF9kYXRlcyIsImZpcnN0IiwibGFzdCIsInJlcGVhdHMiLCJldmVudF9kYXlzIiwiTW9uIiwiVHVlIiwiV2VkIiwiVGh1IiwiRnJpIiwiU2F0IiwiU3VuIiwic2FtZV9kYXlfbG9hZF9pbl9vdXQiLCJzY2hlZHVsZSIsImxvYWRfaW4iLCJsb2FkX291dCIsIm9wZW4iLCJjbG9zZSIsInNhbGVzX3N0YXJ0Iiwic2FsZXNfZW5kIiwidGVtcEl0ZXJhdGlvbnMiLCJ0ZW1wVGltZXMiLCJ1cGRhdGVSZWNvcmQiLCJyZWNvcmRfaWQiLCJhZGRTYWxlc0RheSIsIiRhZGQiLCJkYXRlIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiZGF0ZXRpbWUiLCJzYWxlc19kYXlfaWQiLCJuYW1lIiwiZnJlcXVlbmN5IiwiaW5zdGFuY2UiLCJ0b3RhbCIsImtleSIsImdlbmVyYXRlU2FsZXNEYXlzIiwicGFyYW1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJjb21waWxlX2JhdGNoIiwiJGFwcGx5IiwiZm9yYW10VGltZSIsInNlY3Rpb24iLCJ0b2RheSIsInllYXIiLCJnZXRGdWxsWWVhciIsIm1vbnRoIiwiZ2V0TW9udGgiLCJkYXkiLCJnZXREYXRlIiwidGltZVNwbGl0Iiwic3BsaXQiLCJtaW5TcGxpdCIsImhvdXIiLCJwYXJzZUludCIsIm1pbnV0ZSIsInRvU3RyaW5nIiwic2F2ZVNhbGVzRGF5cyIsImZvckVhY2giLCJjbWVfaXRlcmF0aW9uIiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJ0ZW1wbGF0ZVVybCIsInJlcGxhY2UiLCJzY29wZSIsImxpbmsiLCJsaW5rRnVuYyIsImNvbnRyb2xsZXIiLCJjdXN0b21lckxpc3RDb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwiYmluZFRvQ29udHJvbGxlciIsImVsIiwiYXR0ciIsImN0cmwiLCIkaW5qZWN0IiwibG9naW5QYXNzd29yZCIsImxvZ2luUGFzc3dvcmRDb250cm9sbGVyIiwibG9naW5Vc2VybmFtZSIsImxvZ2luVXNlcm5hbWVDb250cm9sbGVyIiwibWV0aG9kIiwidXJsIiwiaGVhZGVycyIsIkNvbnRlbnQtVHlwZSIsImRhdGEiLCJyZXNwb25zZSIsImVycm9yIiwiZ2V0IiwiY3VzdG9tZXJfbGlzdCIsImF1dGgiLCJzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCIsImVycm9yQ29kZSIsImNvZGUiLCJlcnJvck1lc3NhZ2UiLCJtZXNzYWdlIiwidGVzdCIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJoYXNoUHJlZml4Iiwid2hlbiIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJmYWN0b3J5Il0sIm1hcHBpbmdzIjoic0RBQ0EsSUFBQUEsT0FBQUMsUUFBQUMsT0FBQSxNQUFBLENBQUEsVUFBQSxXQUFBLGVDTUEsU0FBQUMsb0JBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBR0EsSUFBQUMsRUFBQUMsS0FDQUQsRUFBQUwsYUFBQUksRUFBQUcsU0FBQUMsV0FBQUMsTUFBQUMsTUFBQSxjQUNBTCxFQUFBTSxrQkFBQSxHQUNBTixFQUFBTyxpQkFBQSxDQUFBQyxRQUFBLENBQUFDLEtBQUEsQ0FBQUMsR0FBQSxRQUNBVixFQUFBVyxTQUFBLENBQUEsSUFBQSxJQUFBLEtBQ0FYLEVBQUFZLE1BQUEsQ0FDQUMsU0FBQSxDQUNBQyxTQUFBLENBQ0FDLE9BQUEsR0FDQUMsSUFBQSxNQU9BdEIsRUFBQXVCLEtBQUEsK0JBcUNBakIsRUFBQWtCLGVBQUEsU0FBQUMsR0FFQW5CLEVBQUFZLE1BQUFDLFNBQUFDLFNBQUFDLE9BQUFJLEVBQ0FuQixFQUFBWSxNQUFBQyxTQUFBQyxTQUFBRSxJQUFBaEIsRUFBQUwsYUFBQXdCLEdBQUFILElBQ0FoQixFQUFBTyxpQkFBQVQsRUFBQUksU0FBQUMsV0FBQUMsTUFBQUMsTUFBQSxhQUFBQSxNQUFBTCxFQUFBTCxhQUFBd0IsR0FBQUgsTUFDQWhCLEVBQUFNLGtCQUFBTixFQUFBTyxpQkFBQWEsWUFJQXBCLEVBQUFxQixlQUFBLFdBQ0FyQixFQUFBTyxpQkFBQWUsUUFBQUMsS0FBQSxTQUFBQyxHQUNBQyxRQUFBQyxJQUFBLGlDQUNBQyxNQUFBLFNBQUFDLEdBQ0FILFFBQUFDLElBQUEsd0JBQUFFLE1BS0E1QixFQUFBNkIsYUFBQSxTQUFBQyxHQUdBOUIsRUFBQVksTUFBQUMsU0FBQUMsU0FBQUMsT0FJQSxPQUxBLENBQUFnQixLQUFBLEVBQUFDLEtBQUEsR0FLQUYsSUFDQSxLQUFBLEVBRUE5QixFQUFBa0IsZUFBQWxCLEVBQUFZLE1BQUFDLFNBQUFDLFNBQUFDLE9BQUEsR0FDQSxNQUNBLEtBQUEsRUFFQWYsRUFBQWtCLGVBQUFsQixFQUFBWSxNQUFBQyxTQUFBQyxTQUFBQyxPQUFBLEtBUUFmLEVBQUFpQyx3QkFBQSxXQUVBUixRQUFBQyxJQUFBLDRCQUFBMUIsRUFBQU8saUJBQUFhLGFDbEdBLFNBQUFjLGtCQUFBekMsRUFBQUMsR0FLQUEsRUFBQXVCLEtBQUEsNkJDTEEsU0FBQWtCLGdCQUFBMUMsRUFBQUMsRUFBQUUsR0FHQSxJQUFBSSxFQUFBQyxLQUdBRCxFQUFBb0MsWUFBQSxDQUNBQyxTQUFBLEdBQ0FDLFNBQUEsSUFHQXRDLEVBQUF1QyxPQUFBLENBQ0FGLFVBQUEsRUFDQUMsVUFBQSxHQUlBdEMsRUFBQXdDLFlBQUEsU0FBQUgsRUFBQUksR0FFQWhCLFFBQUFDLElBQUEsdUJBR0E5QixFQUFBOEMsU0FBQUMsTUFBQU4sRUFBQUksR0FBQWxCLEtBQUEsU0FBQUMsR0FFQUMsUUFBQUMsSUFBQSxjQUFBRixLQUVBRyxNQUFBLFNBQUFDLEdBQ0FILFFBQUFDLElBQUEsU0FBQUUsTUFLQWxDLEVBQUF1QixLQUFBLDJCQ2hDQSxTQUFBMkIsb0JBQUFuRCxFQUFBQyxFQUFBRyxFQUFBRSxFQUFBRCxFQUFBK0MsRUFBQUMsR0FHQSxJQUFBOUMsRUFBQUMsS0FjQUQsRUFBQStDLGNBQUFoRCxFQUFBRyxTQUFBQyxXQUFBQyxNQUFBQyxNQUFBLGVBQ0FMLEVBQUFnRCxlQUFBLENBQUF0QyxHQUFBLFdBQ0FWLEVBQUFpRCxjQUFBLENBQUEsWUFBQSxVQUNBakQsRUFBQWtELFlBQUEsQ0FBQSxPQUFBLFFBRUFsRCxFQUFBbUQsVUFBQSxDQUFBLFVBQUEsVUFBQSxVQUFBLFdBQ0FuRCxFQUFBb0Qsa0JBQUEsQ0FDQXRDLFNBQUEsR0FDQXVDLFlBQUEsR0FDQUMsT0FBQSxHQUNBQyxjQUFBLENBQ0FDLE1BQUEsR0FDQUMsS0FBQSxJQUVBQyxRQUFBLEdBQ0FDLFdBQUEsQ0FDQUMsS0FBQSxFQUNBQyxLQUFBLEVBQ0FDLEtBQUEsRUFDQUMsS0FBQSxFQUNBQyxLQUFBLEVBQ0FDLEtBQUEsRUFDQUMsS0FBQSxHQUVBQyxzQkFBQSxFQUNBQyxTQUFBLENBQ0FDLFFBQUEsR0FDQUMsU0FBQSxHQUNBQyxLQUFBLEdBQ0FDLE1BQUEsR0FDQUMsWUFBQSxHQUNBQyxVQUFBLEtBR0ExRSxFQUFBMkUsZUFBQSxHQUNBM0UsRUFBQTRFLFVBQUEsQ0FDQVAsUUFBQSxHQUNBQyxTQUFBLEdBQ0FDLEtBQUEsR0FDQUMsTUFBQSxHQUNBQyxZQUFBLEdBQ0FDLFVBQUEsSUFJQWhGLEVBQUF1QixLQUFBLGdDQWdDQWpCLEVBQUE2RSxhQUFBLFNBQUFDLEdBQ0FyRCxRQUFBQyxJQUFBLGNBQUFvRCxJQVNBOUUsRUFBQStFLFlBQUEsV0FFQS9FLEVBQUErQyxjQUFBaUMsS0FBQSxDQUNBQyxNQUFBLElBQUFDLE1BQUFDLGNBQ0FmLFNBQUEsQ0FDQUMsUUFBQSxDQUNBZSxTQUFBLEdBQ0FDLGFBQUEsSUFFQWYsU0FBQSxDQUNBYyxTQUFBLEdBQ0FDLGFBQUEsSUFFQWQsS0FBQSxHQUNBQyxNQUFBLEdBQ0FDLFlBQUEsR0FDQUMsVUFBQSxJQUVBNUQsU0FBQSxHQUNBd0MsT0FBQSxDQUNBZ0MsS0FBQSxHQUNBQyxVQUFBLEdBQ0FDLFNBQUEsRUFDQUMsTUFBQSxLQUVBbEUsS0FBQSxTQUFBQyxHQUVBQyxRQUFBQyxJQUFBRixFQUFBa0UsS0FDQTFGLEVBQUFnRCxlQUFBbEQsRUFBQUksU0FBQUMsV0FBQUMsTUFBQUMsTUFBQSxjQUFBQSxNQUFBbUIsRUFBQWtFLE1BQ0FqRSxRQUFBQyxJQUFBMUIsRUFBQWdELGtCQUNBckIsTUFBQSxTQUFBQyxHQUNBSCxRQUFBQyxJQUFBLFFBQUFFLE1BWUE1QixFQUFBMkYsa0JBQUEsV0EvRUEsSUFBQUMsR0FBQUEsRUFxRkE1RixFQUFBb0Qsa0JBL0VBLElBQUF5QyxRQUFBLFNBQUFDLEVBQUFDLEdBRUFqRCxFQUFBMUIsV0FBQTRFLGNBQUFKLEdBQUFyRSxLQUFBLFNBQUFDLEdBRUFzRSxFQUFBdEUsS0FDQUcsTUFBQSxTQUFBQyxHQUVBbUUsRUFBQW5FLFFBd0VBTCxLQUFBLFNBQUFDLEdBQ0FDLFFBQUFDLElBQUEscUJBQUFGLEdBQ0F4QixFQUFBMkUsZUFBQW5ELEVBQ0EvQixFQUFBd0csV0FDQXRFLE1BQUEsU0FBQUMsR0FDQUgsUUFBQUMsSUFBQUUsTUFNQTVCLEVBQUFrRyxXQUFBLFNBQUFDLEdBR0ExRSxRQUFBQyxJQUFBLGtCQUFBeUUsR0FHQSxJQUFBQyxFQUFBLElBQUFsQixLQUNBbUIsRUFBQUQsRUFBQUUsY0FDQUMsRUFBQUgsRUFBQUksV0FDQUMsRUFBQUwsRUFBQU0sVUFHQUMsRUFBQTNHLEVBQUE0RSxVQUFBdUIsR0FBQVMsTUFBQSxLQUNBQyxFQUFBRixFQUFBLEdBQUFDLE1BQUEsS0FDQUUsRUFBQUMsU0FBQUosRUFBQSxJQUNBSyxFQUFBSCxFQUFBLEdBSUEsTUFIQUEsRUFBQSxLQUdBQyxHQUFBLElBQUFHLFdBQ0FWLEVBQUEsS0FBQUEsRUFBQSxJQUFBQSxHQUNBRSxFQUFBLEtBQUFBLEVBQUEsSUFBQUEsR0FDQUssRUFBQSxLQUFBQSxFQUFBLElBQUFBLEdBT0E5RyxFQUFBb0Qsa0JBQUFnQixTQUFBK0IsR0FBQUUsRUFBQSxJQUFBRSxFQUFBLElBQUFFLEVBQUEsSUFBQUssRUFBQSxJQUFBRSxFQUFBLGFBSUFoSCxFQUFBa0gsY0FBQSxXQUtBbEgsRUFBQTJFLGVBQUF3QyxRQUFBLFNBQUFDLEdBRUFwSCxFQUFBK0MsY0FBQWlDLEtBQUFvQyxHQUFBN0YsS0FBQSxTQUFBbkIsR0FFQSxJQUFBTSxFQUFBTixFQUFBc0YsSUFHQWpFLFFBQUFDLElBQUFoQixRQzdNQSxTQUFBZixzREFFQSxJQUFBMEgsRUFBQSxDQUNBQyxTQUFBLE9BQ0FDLFlBQUEsK0NBQ0FDLFNBQUEsRUFDQUMsTUFBQSxHQUVBQyxLQUFBQyxFQUNBQyxXQUFBQyxFQUNBQyxhQUFBLEtBQ0FDLGtCQUFBLEdBSUEsU0FBQUosRUFBQUYsRUFBQU8sRUFBQUMsRUFBQUMsSUFLQSxTQUFBTCxFQUFBcEksRUFBQUMsR0FJQStCLFFBQUFDLElBQUEsK0JBSUEsT0FYQW1HLEVBQUFNLFFBQUEsQ0FBQSxTQUFBLFFBV0FkLEVDM0JBLFNBQUFlLHVEQUVBLElBQUFmLEVBQUEsQ0FDQUMsU0FBQSxPQUNBQyxZQUFBLGdEQUNBQyxTQUFBLEVBQ0FDLE1BQUEsQ0FDQW5GLFNBQUEsSUFDQUMsT0FBQSxLQUVBbUYsS0FBQUMsRUFDQUMsV0FBQVMsRUFDQVAsYUFBQSxLQUNBQyxrQkFBQSxHQUlBLFNBQUFKLEVBQUFGLEVBQUFPLEVBQUFDLEVBQUFDLElBSUEsU0FBQUcsRUFBQTVJLEVBQUFDLElBTUEsT0FSQTJJLEVBQUFGLFFBQUEsQ0FBQSxTQUFBLFFBUUFkLEVDM0JBLFNBQUFpQix1REFFQSxJQUFBakIsRUFBQSxDQUNBQyxTQUFBLE9BQ0FDLFlBQUEsZ0RBQ0FDLFNBQUEsRUFDQUMsTUFBQSxDQUNBcEYsU0FBQSxJQUNBRSxPQUFBLEtBRUFtRixLQUFBQyxFQUNBQyxXQUFBVyxFQUNBVCxhQUFBLEtBQ0FDLGtCQUFBLEdBSUEsU0FBQUosRUFBQUYsRUFBQU8sRUFBQUMsRUFBQUMsSUFJQSxTQUFBSyxFQUFBOUksRUFBQUMsSUFNQSxPQVJBNkksRUFBQUosUUFBQSxDQUFBLFNBQUEsUUFRQWQsRUN4QkEsU0FBQXZFLFlBQUFELEdBbUNBLE1BaENBLENBQ0F6QixXQUFBLENBQ0E0RSxjQUtBLFNBQUFKLEdBSUEsT0FBQSxJQUFBQyxRQUFBLFNBQUFDLEVBQUFDLEdBRUFsRCxFQUFBLENBQ0EyRixPQUFBLE9BQ0FDLElBQUEsK0NBQ0FDLFFBQUEsQ0FDQUMsZUFBQSxvQkFFQUMsS0FBQWhELElBQ0FyRSxLQUFBLFNBQUFzSCxHQUVBL0MsRUFBQStDLEVBQUFELE9BRUEsU0FBQUUsR0FDQS9DLEVBQUErQyxVQzVCQSxTQUFBbEosZ0JBQUFDLEVBQUFDLEVBQUFDLEdBeURBLE1BdERBLENBQ0FnSixJQUFBLENBQ0FDLGNBZ0NBLFdBTUEsT0FBQSxJQUFBbkQsUUFBQSxTQUFBQyxFQUFBQyxHQUtBRCxFQUFBLENBQUEsTUFBQSxNQUFBLGNBekNBcEQsU0FBQSxDQUNBQyxNQU1BLFNBQUFBLEVBQUFMLEdBS0EsT0FIQWIsUUFBQUMsSUFBQSx1QkFHQSxJQUFBbUUsUUFBQSxTQUFBQyxFQUFBQyxHQUVBN0YsU0FBQStJLE9BQUFDLDJCQUFBdkcsRUFBQUwsR0FBQWYsS0FBQSxTQUFBQyxHQUVBc0UsRUFBQXRFLEtBRUFHLE1BQUEsU0FBQW1ILEdBRUEsSUFBQUssRUFBQUwsRUFBQU0sS0FDQUMsRUFBQVAsRUFBQVEsUUFDQXZELEVBQUEsQ0FBQXFELEtBQUFELEVBQUFHLFFBQUFELFVBbkJBRSxLQTRDQSxXQUFBLE1BQUEsOEJDM0RBLFNBQUFDLE9BQUFDLEVBQUFDLEdBQ0FBLEVBQUFDLFdBQUEsSUFDQUYsRUFFQUcsS0FBQSxJQUFBLENBQ0FyQyxZQUFBLHdCQUNBSyxXQUFBLG9CQUNBRSxhQUFBLE9BRUE4QixLQUFBLGFBQUEsQ0FDQXJDLFlBQUEsMEJBQ0FLLFdBQUEsc0JBQ0FFLGFBQUEsS0FDQWhDLFFBQUEsQ0FDQW5HLGFBQUFBLGdCQUdBaUssS0FBQSxhQUFBLENBQ0FyQyxZQUFBLDBCQUNBSyxXQUFBLHNCQUNBRSxhQUFBLE9BRUE4QixLQUFBLFNBQUEsQ0FDQXJDLFlBQUEsc0JBQ0FLLFdBQUEsa0JBQ0FFLGFBQUEsT0FFQStCLFVBQUEsQ0FDQUMsV0FBQSxNQVVBLFNBQUFuSyxlQUdBLE9BQUEsSUFBQWtHLFFBQUEsU0FBQUMsRUFBQUMsR0FFQUQsRUFBQSxlVHJEQXhHLFFBQ0FDLE9BQUEsT0FDQXFJLFdBQUEsc0JBQUFwSSxxQkFFQUEsb0JBQUEySSxRQUFBLENBQUEsU0FBQSxPQUFBLGVBQUEsa0JBQUEsWUFBQSxrQkFBQSxrQkNKQTdJLFFBQ0FDLE9BQUEsT0FDQXFJLFdBQUEsb0JBQUExRixtQkFFQUEsa0JBQUFpRyxRQUFBLENBQUEsU0FBQSxRQ0pBN0ksUUFDQUMsT0FBQSxPQUNBcUksV0FBQSxrQkFBQXpGLGlCQUVBQSxnQkFBQWdHLFFBQUEsQ0FBQSxTQUFBLE9BQUEsbUJDSkE3SSxRQUNBQyxPQUFBLE9BQ0FxSSxXQUFBLHNCQUFBaEYscUJBRUFBLG9CQUFBdUYsUUFBQSxDQUFBLFNBQUEsT0FBQSxZQUFBLGlCQUFBLGtCQUFBLFFBQUEsZUNFQTdJLFFBQ0FDLE9BQUEsT0FDQThILFVBQUEsZUFBQTFILGNDREFMLFFBQ0FDLE9BQUEsT0FDQThILFVBQUEsZ0JBQUFlLGVDRkE5SSxRQUNBQyxPQUFBLE9BQ0E4SCxVQUFBLGdCQUFBaUIsZUNIQWhKLFFBQ0FDLE9BQUEsT0FDQXdLLFFBQUEsY0FBQWpILGFBR0FBLFlBQUFxRixRQUFBLENBQUEsU0NMQTdJLFFBQ0FDLE9BQUEsT0FDQXdLLFFBQUEsa0JBQUFuSyxpQkFHQUEsZ0JBQUF1SSxRQUFBLENBQUEsWUFBQSxrQkFBQSxrQkNOQTdJLFFBQ0FDLE9BQUEsT0FDQWlLLE9BQUFBIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIE1PRFVMRVxudmFyIGFoTnV0cyA9IGFuZ3VsYXIubW9kdWxlKCdjbmUnLCBbJ25nUm91dGUnLCAnZmlyZWJhc2UnLCAnbmdTYW5pdGl6ZSddKTtcbiIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdjbmUnKVxuICAgIC5jb250cm9sbGVyKCdjdXN0b21lcnNDb250cm9sbGVyJywgY3VzdG9tZXJzQ29udHJvbGxlcik7XG5cbmN1c3RvbWVyc0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywnJGxvZycsICdjdXN0b21lckxpc3QnLCAnZmlyZWJhc2VTZXJ2aWNlJywgJyRmaXJlYmFzZScsICckZmlyZWJhc2VPYmplY3QnLCAnJGZpcmViYXNlQXJyYXknXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjdXN0b21lcnNDb250cm9sbGVyKCRzY29wZSwgJGxvZywgY3VzdG9tZXJMaXN0LCBmaXJlYmFzZVNlcnZpY2UsICRmaXJlYmFzZSwgJGZpcmViYXNlT2JqZWN0LCAkZmlyZWJhc2VBcnJheSkge1xuXG5cdC8vZGVmaW5lIHZpZXcgbW9kZWwgdmFyaWFibGVcblx0dmFyIHZtID0gdGhpcztcblx0dm0uY3VzdG9tZXJMaXN0ID0gJGZpcmViYXNlQXJyYXkoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZCgnY3VzdG9tZXJzJykpO1xuXHR2bS5jdXN0b21lclNhbGVzRGF5cyA9IFtdO1xuXHR2bS5zZWxlY3RlZEN1c3RvbWVyID0geyBzZWFzb25zOiB7IFwiMjAxOFwiOiB7IGlkOiAyMDE4fSB9IH07XG5cdHZtLnRlc3RMaXN0ID0gWydhJywgJ2InLCAnYyddOyAvLyRmaXJlYmFzZUFycmF5KGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCkuY2hpbGQoJ2N1c3RvbWVycycpLmNoaWxkKCdjdXN0b21lcl9saXN0JykpO1xuXHR2bS5zdGF0ZSA9IHtcblx0XHRzZWxlY3RlZDoge1xuXHRcdFx0Y3VzdG9tZXI6IHtcblx0XHRcdFx0JGluZGV4OiBcIlwiLFxuXHRcdFx0XHQkaWQ6IFwiXCIsXG5cblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0Ly9pZGVudGlmeSB3aGVyZSB3ZSBhcmVcblx0JGxvZy5pbmZvKCdpbiB0aGUgY3VzdG9tZXJzIGNvbnRyb2xsZXInKTtcdC8vVE9ETzogVEFLRSBUSElTIE9VVCBMQVRFUlxuXHRcblxuXHQvKlxuXHQqXHRMT0NBTCBGVU5DVElPTlMgR08gSEVSRVxuXHQqXG5cdCovXG5cblx0Ly9cdExPQUQgQ1VTVE9NRVIgTElTVFxuXHRmdW5jdGlvbiBsb2FkX2N1c3RvbWVyX2xpc3QoKSB7XG5cdFx0XG5cdFx0Ly90cmFjayBzdGFydGluZyBmdW5jdGlvblxuXHRcdC8vY29uc29sZS5sb2coJ2xvYWRpbmcgdGhlIGN1c3RvbWVyIGxpc3QnKTtcblx0XHRcblx0XHQvL2dhdGhlciB0aGUgZGF0YVxuXHRcdGZpcmViYXNlU2VydmljZS5nZXQuY3VzdG9tZXJfbGlzdCgpLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhzKSB7XG5cdFx0XHRcblx0XHRcdC8vY29uc29sZS5sb2coJ2dvdCB0aGlzIHJlc3BvbnMnLCBzKTtcblx0XHRcdFxuXHRcdFx0Ly93aGVuIHRoZSBsaXN0IGhhcyBiZWVuIGxvYWRlZCB1cGRhdGUgdGhlIHZhcmlhYmxlc1xuXHRcdFx0Ly92bS5jdXN0b21lckxpc3QgPSBzO1xuXHRcdFx0dm0uY3VzdG9tZXJMaXN0ID0gJGZpcmViYXNlQXJyYXkoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZCgnY3VzdG9tZXJzJykuY2hpbGQoJ2N1c3RvbWVyX2xpc3QnKSk7XG5cblx0XHRcdC8vcmVmbGVjdCB0aGUgY2hhbmdlc1xuXHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xuXHRcdFx0Ly9pZiB0aGVyZSB3YXMgYW4gZXJyb3IgdGhyb3cgdGhlIGVycm9yXG5cdFx0XHRjb25zb2xlLmxvZygnZXJyb3InKTtcblx0XHR9KTtcblx0fTtcblxuXHQvKlxuXHQqXHRWSUVXIE1PREVMIEZVTkNUSU9OUyBHTyBIRVJFXG5cdCpcblx0Ki9cdFxuXHQvL1x0U0VMRUNUIENMSUNLRUQgQ1VTVE9NRVJcblx0dm0uc2VsZWN0Q3VzdG9tZXIgPSBmdW5jdGlvbihpbmRleF9pZCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZtLnN0YXRlLnNlbGVjdGVkLmN1c3RvbWVyLiRpbmRleCA9IGluZGV4X2lkO1xuXHRcdHZtLnN0YXRlLnNlbGVjdGVkLmN1c3RvbWVyLiRpZCA9IHZtLmN1c3RvbWVyTGlzdFtpbmRleF9pZF0uJGlkO1xuXHRcdHZtLnNlbGVjdGVkQ3VzdG9tZXIgPSAkZmlyZWJhc2VPYmplY3QoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZCgnY3VzdG9tZXJzJykuY2hpbGQodm0uY3VzdG9tZXJMaXN0W2luZGV4X2lkXS4kaWQpKTtcblx0XHR2bS5jdXN0b21lclNhbGVzRGF5cyA9IHZtLnNlbGVjdGVkQ3VzdG9tZXIuc2FsZXNfZGF5cztcblx0fTtcblxuXHQvL1x0VVBEQVRFIFRIRSBDVVNUT01FUiBSRUNPUkRcblx0dm0udXBkYXRlQ3VzdG9tZXIgPSBmdW5jdGlvbigpIHtcblx0XHR2bS5zZWxlY3RlZEN1c3RvbWVyLiRzYXZlKCkudGhlbihmdW5jdGlvbiBzdWNjZXMocykge1xuXHRcdFx0Y29uc29sZS5sb2coJ3VwZGF0ZWQgcmVjb3JkIHN1Y2Nlc3NmdWxseScpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdlcnJvciB1cGRhdGluZyByZWNvcmQnLCBlKTtcblx0XHR9KTtcblx0fTtcblxuXHQvL1x0TU9WRSBUTyBUSEUgTkVYVCBDVVNUT01FUlxuXHR2bS5jaGFuZ2VSZWNvcmQgPSBmdW5jdGlvbihzZWxlY3QpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgb3B0biA9IHsgXCJwcmV2XCI6IDAsIFwibmV4dFwiOiAxIH07XG5cdFx0dmFyIGluZGV4X2lkID0gdm0uc3RhdGUuc2VsZWN0ZWQuY3VzdG9tZXIuJGluZGV4O1xuXG5cdFx0Ly9jb25zb2xlLmxvZyhpbmRleF9pZCk7XG5cblx0XHRzd2l0Y2gob3B0bltzZWxlY3RdKSB7XG5cdFx0XHRjYXNlIDA6XG5cdFx0XHRcdC8vY29uc29sZS5sb2coJ3ByZXZpb3VzIHJlY29yZCcpO1xuXHRcdFx0XHR2bS5zZWxlY3RDdXN0b21lcih2bS5zdGF0ZS5zZWxlY3RlZC5jdXN0b21lci4kaW5kZXggLSAxKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDE6XG5cdFx0XHRcdC8vY29uc29sZS5sb2coJ25leHQgcmVjb3JkJyk7XG5cdFx0XHRcdHZtLnNlbGVjdEN1c3RvbWVyKHZtLnN0YXRlLnNlbGVjdGVkLmN1c3RvbWVyLiRpbmRleCArIDEpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fTtcblxuXHQvL1x0R0VORVJBVEUgQlVMSyBTQUxFUyBEQVlTXG5cdHZtLmdlbmVyYXRlX2J1bGtfc2FsZXNkYXlzID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0Y29uc29sZS5sb2coJ2dlbmVyYXRpbmcgYnVsayBzYWxlc2RheXMnLCB2bS5zZWxlY3RlZEN1c3RvbWVyLnNhbGVzX2RheXMpO1xuXHRcdFxuXHRcdC8qaWYodm0uc2VsZWN0ZWRDdXN0b21lci5zYWxlc19kYXlzWzBdID09IHVuZGVmaW5lZCkge1xuXHRcdFx0Y29uc29sZS5sb2coJ3NhbGVzIGRheXMgdW5kZWZpbmVkJylcblx0XHRcdHZtLnNlbGVjdGVkQ3VzdG9tZXIuc2FsZXNfZGF5c1swXSA9IFwiYW9pc2dvaTIzb2Jzb2IyM29paHNzXCJcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc29sZS5sb2coJ3NhbGVzIGRheXMgZGVmaW5lZCcpO1xuXHRcdFx0dmFyIGxhc3RrZXkgPSAwO1xuXHRcdFx0T2JqZWN0LmtleXModm0uc2VsZWN0ZWRDdXN0b21lci5zYWxlc19kYXlzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRcdFx0aWYoa2V5ICE9ICdwbGFjZWhvbGRlcicpIGxhc3RrZXkgPSBwYXJzZUludChrZXkpO1xuXHRcdFx0fSk7XG5cdFx0XHR2bS5zZWxlY3RlZEN1c3RvbWVyLnNhbGVzX2RheXNbbGFzdGtleSArIDFdID0gXCJhb3NpZ2hhb2lzaGdpb2hzZ1wiXG5cdFx0fVxuXG5cdFx0Ly9zYXZlIHZhbHVlc1xuXHRcdHZtLnVwZGF0ZUN1c3RvbWVyKCk7Ki9cblx0fTtcblxuXHQvL3J1biB0aGUgdGVzdFxuXG5cdC8vb24gcGFnZSBsb2FkXG5cdC8vbG9hZF9jdXN0b21lcl9saXN0KCk7XG5cblxufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdjbmUnKVxuICAgIC5jb250cm9sbGVyKCdsYW5kaW5nQ29udHJvbGxlcicsIGxhbmRpbmdDb250cm9sbGVyKTtcblxubGFuZGluZ0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywnJGxvZyddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGxhbmRpbmdDb250cm9sbGVyKCRzY29wZSwgJGxvZykge1xuXG5cdC8vZGVmaW5lIHZpZXcgbW9kZWwgdmFyaWFibGVcblx0dmFyIHZtID0gdGhpcztcblxuXHQkbG9nLmluZm8oJ2luIHRoZSBsYW5kaW5nIGNvbnRyb2xsZXInKTtcdC8vVE9ETzogVEFLRSBUSElTIE9VVCBMQVRFUlxuXG5cdC8vZGVmaW5lIGxvY2FsIGZ1bmN0aW9uc1xuXG5cdC8vcnVuIHRoZSB0ZXN0XG5cblxufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdjbmUnKVxuICAgIC5jb250cm9sbGVyKCdsb2dpbkNvbnRyb2xsZXInLCBsb2dpbkNvbnRyb2xsZXIpO1xuXG5sb2dpbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywnJGxvZycsICdmaXJlYmFzZVNlcnZpY2UnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBsb2dpbkNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCBmaXJlYmFzZVNlcnZpY2UpIHtcblxuXHQvL2RlZmluZSB2aWV3IG1vZGVsIHZhcmlhYmxlXG5cdHZhciB2bSA9IHRoaXM7XG5cblx0Ly9kZWZpbmUgdmlldyBtb2RlbCB2YXJpYWJsZXNcblx0dm0uY3JlZGVudGlhbHMgPSB7XG5cdFx0dXNlcm5hbWU6IFwiXCIsXG5cdFx0cGFzc3dvcmQ6IFwiXCJcblx0fTtcblxuXHR2bS5hY3RpdmUgPSB7XG5cdFx0dXNlcm5hbWU6IGZhbHNlLFxuXHRcdHBhc3N3b3JkOiBmYWxzZVxuXHR9O1xuXG5cdC8vZGVmaW5lIHZpZXcgbW9kZWwgZnVuY3Rpb25zXG5cdHZtLnN1Ym1pdENyZWRzID0gZnVuY3Rpb24odXNlcm5hbWUsIHBhc3MpIHtcblx0XHRcblx0XHRjb25zb2xlLmxvZygnc3VibWl0Q3JlZHMgY2xpY2tlZCcpO1xuXHRcdFxuXHRcdC8vc3VibWl0IGNyZWRlbnRpYWxzXG5cdFx0ZmlyZWJhc2VTZXJ2aWNlLmF1dGhVc2VyLmVtYWlsKHVzZXJuYW1lLCBwYXNzKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3MgKHMpIHtcblxuXHRcdFx0Y29uc29sZS5sb2coJ3dhcyBzdWNjZXNzJywgcyk7XG5cblx0XHR9KS5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIkVycm9yOlwiLCBlKTtcblx0XHR9KTtcblxuXHR9O1xuXG5cdCRsb2cuaW5mbygnaW4gdGhlIGxvZ2luIGNvbnRyb2xsZXInKTtcdC8vVE9ETzogVEFLRSBUSElTIE9VVCBMQVRFUlxuXG5cdC8vZGVmaW5lIGxvY2FsIGZ1bmN0aW9uc1xuXG5cdC8vcnVuIHRoZSB0ZXN0XG5cblxufSIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdjbmUnKVxuICAgIC5jb250cm9sbGVyKCdzYWxlc0RheXNDb250cm9sbGVyJywgc2FsZXNEYXlzQ29udHJvbGxlcik7XG5cbnNhbGVzRGF5c0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywnJGxvZycsICckZmlyZWJhc2UnLCAnJGZpcmViYXNlQXJyYXknLCAnJGZpcmViYXNlT2JqZWN0JywgJyRodHRwJywgJ2RhdGFTZXJ2aWNlJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gc2FsZXNEYXlzQ29udHJvbGxlcigkc2NvcGUsICRsb2csICRmaXJlYmFzZSwgJGZpcmViYXNlQXJyYXksICRmaXJlYmFzZU9iamVjdCwgJGh0dHAsIGRhdGFTZXJ2aWNlKSB7XG5cblx0Ly9kZWZpbmUgdmlldyBtb2RlbCB2YXJpYWJsZVxuXHR2YXIgdm0gPSB0aGlzO1xuXHQvKnZhciBpdGVyYXRpb24gPSB7XG5cdFx0ZGF0ZTogXCIyMDE4LTA1LTA1VDA2OjAwOjAwWlwiLFxuXHRcdHdrX2RheTogXCJTYXRcIixcblx0XHRpZDogXCJiZWF2ZXJ0b25fZm1fMDAxXCIsXG5cdFx0c2NoZWR1bGU6IHtcblx0XHRcdGxvYWRfaW46IFwiXCIsXG5cdFx0XHRsb2FkX291dDogXCJcIixcblx0XHRcdG9wZW46IFwiODowMCBBTVwiLFxuXHRcdFx0Y2xvc2U6IFwiMTozMCBQTVwiLFxuXHRcdFx0c2FsZXNfc3RhcnQ6IFwiXCIsXG5cdFx0XHRzYWxlc19lbmQ6IFwiXCJcblx0XHR9XG5cdH07Ki9cblx0dm0uc2FsZXNkYXlzTGlzdCA9ICRmaXJlYmFzZUFycmF5KGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCkuY2hpbGQoJ3NhbGVzX2RheXMnKSk7XG5cdHZtLnNlbGVjdGVkUmVjb3JkID0geyBpZDogXCIyMDM5NzUyXCIgfTtcblx0dm0udGVzdEN1c3RvbWVycyA9IFsgXCJCZWF2ZXJ0b25cIiwgXCJPcmVuY29cIiBdO1xuXHR2bS50ZXN0U2Vhc29ucyA9IFsgJzIwMTgnLCAnMjAxNycgXTtcblx0Ly92bS5yZXBlYXRzID0gWyAnbmV2ZXInLCBcImV2ZXJ5IHdlZWtcIiwgXCJldmVyeSAyIHdlZWtzXCIsIFwiZXZlcnkgMyB3ZWVrc1wiLCBcImV2ZXJ5XzRfd2Vla3NcIiwgXCJldmVyeV81X3dlZWtzXCIsIFwiZXZlcnlfNl93ZWVrc1wiLCBcImV2ZXJ5Xzdfd2Vla3NcIiwgXCJldmVyeV84X3dlZWtzXCIgXTtcblx0dm0udGVzdFRpbWVzID0gWyAnOTowMCBBTScsJzk6MTUgQU0nLCc5OjMwIEFNJywnOTo0NSBBTScgIF07XG5cdHZtLnNjaGVkdWxpbmdfcGFyYW1zID0ge1xuXHRcdGN1c3RvbWVyOiBcIlwiLFxuXHRcdGN1c3RvbWVyX2lkOiBcIlwiLFxuXHRcdHNlYXNvbjogXCJcIixcblx0XHRib29rZW5kX2RhdGVzOiB7XG5cdFx0XHRmaXJzdDogXCJcIixcblx0XHRcdGxhc3Q6IFwiXCJcblx0XHR9LFxuXHRcdHJlcGVhdHM6IFwiXCIsXG5cdFx0ZXZlbnRfZGF5czoge1xuXHRcdFx0TW9uOiBmYWxzZSxcblx0XHRcdFR1ZTogZmFsc2UsXG5cdFx0XHRXZWQ6IGZhbHNlLFxuXHRcdFx0VGh1OiBmYWxzZSxcblx0XHRcdEZyaTogZmFsc2UsXG5cdFx0XHRTYXQ6IGZhbHNlLFxuXHRcdFx0U3VuOiBmYWxzZVxuXHRcdH0sXG5cdFx0c2FtZV9kYXlfbG9hZF9pbl9vdXQ6IHRydWUsXG5cdFx0c2NoZWR1bGU6IHtcblx0XHRcdGxvYWRfaW46IFwiXCIsXG5cdFx0XHRsb2FkX291dDogXCJcIixcblx0XHRcdG9wZW46IFwiXCIsXG5cdFx0XHRjbG9zZTogXCJcIixcblx0XHRcdHNhbGVzX3N0YXJ0OiBcIlwiLFxuXHRcdFx0c2FsZXNfZW5kOiBcIlwiXG5cdFx0fVxuXHR9O1xuXHR2bS50ZW1wSXRlcmF0aW9ucyA9IFtdO1xuXHR2bS50ZW1wVGltZXMgPSB7XG5cdFx0bG9hZF9pbjogXCJcIixcblx0XHRsb2FkX291dDogXCJcIixcblx0XHRvcGVuOiBcIlwiLFxuXHRcdGNsb3NlOiBcIlwiLFxuXHRcdHNhbGVzX3N0YXJ0OiBcIlwiLFxuXHRcdHNhbGVzX2VuZDogXCJcIlxuXHR9XG5cblx0Ly9pZGVudGlmeSBjb250cm9sbGVyXG5cdCRsb2cuaW5mbygnaW4gdGhlIHNhbGVzIGRheXMgY29udHJvbGxlcicpO1x0Ly9UT0RPOiBUQUtFIFRISVMgT1VUIExBVEVSXG5cblx0Lypcblx0Klx0TE9DQUwgRlVOQ1RJT05TIEdPIEhFUkVcblx0KlxuXHQqL1xuXHRmdW5jdGlvbiBidWlsZF9zYWxlc19kYXlzX2FycmF5KHBhcmFtcykge1xuXHRcdC8vbG9jYWwgdmFyaWFibGVzXG5cblx0XHQvL2NvbnNvbGUubG9nKCdnb3QgdGhlc2UgcGFyYW1zJywgc3RhcnQsIGVuZCk7XG5cblx0XHQvL3JldHVybiBhc3luYyB3b3JrXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0Ly9hY2Nlc3MgZGF0YSBzZXJ2aWNlXG5cdFx0XHRkYXRhU2VydmljZS5zYWxlc19kYXlzLmNvbXBpbGVfYmF0Y2gocGFyYW1zKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3Mocykge1xuXHRcdFx0XHQvL2NvbnNvbGUubG9nKCdzdWNjZXNzJywgcyk7XG5cdFx0XHRcdHJlc29sdmUocyk7XG5cdFx0XHR9KS5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XG5cdFx0XHRcdC8vY29uc29sZS5sb2coJ2Vycm9yJywgZSk7XG5cdFx0XHRcdHJlamVjdChlKTtcblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fTtcblxuXG5cdC8qXG5cdCpcdFZJRVcgTU9ERUwgRlVOQ1RJT05TIEdPIEhFUkVcblx0KlxuXHQqL1xuXHQvL1x0VVBEQVRFIFJFQ09SRFxuXHR2bS51cGRhdGVSZWNvcmQgPSBmdW5jdGlvbihyZWNvcmRfaWQpIHtcblx0XHRjb25zb2xlLmxvZygnZ290IHRoaXMgaWQnLCByZWNvcmRfaWQpO1xuXHRcdC8qdm0uc2FsZXNkYXlzTGlzdC4kc2F2ZShyZWNvcmRfaWQpLnRoZW4oZnVuY3Rpb24gc3VjY2VzKHMpIHtcblx0XHRcdGNvbnNvbGUubG9nKCd1cGRhdGVkIHJlY29yZCBzdWNjZXNzZnVsbHknKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnZXJyb3IgdXBkYXRpbmcgcmVjb3JkJywgZSk7XG5cdFx0fSk7Ki9cblx0fTtcblxuXHQvLyBBREQgTkVXIFNBTEVTIERBWVxuXHR2bS5hZGRTYWxlc0RheSA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0dm0uc2FsZXNkYXlzTGlzdC4kYWRkKHtcblx0XHRcdGRhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcblx0XHRcdHNjaGVkdWxlOiB7XG5cdFx0XHRcdGxvYWRfaW46IHtcblx0XHRcdFx0XHRkYXRldGltZTogXCJcIixcblx0XHRcdFx0XHRzYWxlc19kYXlfaWQ6IFwiXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0bG9hZF9vdXQ6IHtcblx0XHRcdFx0XHRkYXRldGltZTogXCJcIixcblx0XHRcdFx0XHRzYWxlc19kYXlfaWQ6IFwiXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0b3BlbjogXCJcIixcblx0XHRcdFx0Y2xvc2U6IFwiXCIsXG5cdFx0XHRcdHNhbGVzX3N0YXJ0OiBcIlwiLFxuXHRcdFx0XHRzYWxlc19lbmQ6IFwiXCJcblx0XHRcdH0sXG5cdFx0XHRjdXN0b21lcjogXCJcIixcblx0XHRcdHNlYXNvbjoge1xuXHRcdFx0XHRuYW1lOiBcIlwiLFxuXHRcdFx0XHRmcmVxdWVuY3k6IFwiXCIsXG5cdFx0XHRcdGluc3RhbmNlOiAwLFxuXHRcdFx0XHR0b3RhbDogMFxuXHRcdFx0fVxuXHRcdH0pLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhzKSB7XG5cdFx0XHQvL3NldCB0aGUgZmlyZWJhc2Ugb2JqZWN0XG5cdFx0XHRjb25zb2xlLmxvZyhzLmtleSk7XG5cdFx0XHR2bS5zZWxlY3RlZFJlY29yZCA9ICRmaXJlYmFzZU9iamVjdChmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigpLmNoaWxkKCdzYWxlc19kYXlzJykuY2hpbGQocy5rZXkpKTtcblx0XHRcdGNvbnNvbGUubG9nKHZtLnNlbGVjdGVkUmVjb3JkKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnZXJyb3InLCBlKTtcblx0XHR9KTtcblxuXHRcdC8qdm0uc2FsZXNkYXlzTGlzdC5zYXZlKCkudGhlbihmdW5jdGlvbiBzdWNjZXNzKHMpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdzdWNjZXNzJywgcyk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xuXHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yJywgZSk7XG5cdFx0fSk7Ki9cblxuXHR9O1xuXG5cdC8vIEdFTkVSQVRFIFNBTEVTIERBWVNcblx0dm0uZ2VuZXJhdGVTYWxlc0RheXMgPSBmdW5jdGlvbigpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblxuXHRcdC8vbm90aWZ5IG9mIGxvY2F0aW9uXG5cdFx0Ly9jb25zb2xlLmxvZygnZ2VuZXJhdGluZyBTYWxlcyBkYXlzJywgdm0uc2NoZWR1bGluZ19wYXJhbXMpO1xuXG5cdFx0YnVpbGRfc2FsZXNfZGF5c19hcnJheSh2bS5zY2hlZHVsaW5nX3BhcmFtcykudGhlbihmdW5jdGlvbiBzdWNjZXNzKHMpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdzdWNjZXNzZnVsbHkgYnVpbHQnLCBzKTtcblx0XHRcdHZtLnRlbXBJdGVyYXRpb25zID0gcztcblx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhlKTtcblx0XHR9KTtcblxuXHR9O1xuXG5cdC8vXHRGT1JNQVQgVElNRVxuXHR2bS5mb3JhbXRUaW1lID0gZnVuY3Rpb24oc2VjdGlvbikge1xuXHRcdFxuXHRcdC8vbm90aWZ5IG9mIHByb2dyZXNzXG5cdFx0Y29uc29sZS5sb2coJ2Zvcm1hdHRpbmcgdGltZScsIHNlY3Rpb24pO1xuXG5cdFx0Ly9zcGxpdCB0aW1lXG5cdFx0dmFyIHRvZGF5ID0gbmV3IERhdGUoKTtcblx0XHR2YXIgeWVhciA9IHRvZGF5LmdldEZ1bGxZZWFyKCk7XG5cdFx0dmFyIG1vbnRoID0gdG9kYXkuZ2V0TW9udGgoKTtcblx0XHR2YXIgZGF5ID0gdG9kYXkuZ2V0RGF0ZSgpO1xuXHRcdFxuXG5cdFx0dmFyIHRpbWVTcGxpdCA9IHZtLnRlbXBUaW1lc1tzZWN0aW9uXS5zcGxpdChcIjpcIik7XG5cdFx0dmFyIG1pblNwbGl0ID0gdGltZVNwbGl0WzFdLnNwbGl0KFwiIFwiKTtcblx0XHR2YXIgaG91ciA9IHBhcnNlSW50KHRpbWVTcGxpdFswXSk7XG5cdFx0dmFyIG1pbnV0ZSA9IG1pblNwbGl0WzBdO1xuXHRcdHZhciB0aW1lRGF5ID0gbWluU3BsaXRbMV07XG5cblx0XHQvL2Zvcm1hdCBhY2NvcmRpbmdseVxuXHRcdGlmKHRpbWVEYXkgPT0gXCJQTVwiKSB7IGhvdXIgKz0gMTI7IGhvdXIudG9TdHJpbmcoKTsgfVxuXHRcdGlmKG1vbnRoIDwgMTApIG1vbnRoID0gXCIwXCIgKyBtb250aDtcblx0XHRpZihkYXkgPCAxMCkgZGF5ID0gXCIwXCIgKyBkYXk7XG5cdFx0aWYoaG91ciA8IDEwKSBob3VyID0gXCIwXCIgKyBob3VyO1xuXHRcdC8vaWYobWludXRlIDwgMTApIG1pbiA9IFwiMFwiICsgbWludXRlO1xuXHRcdFxuXG5cdFx0Ly9jb25zb2xlLmxvZyh0b2RheSwgJ2hvdXInLCBob3VyLCAnbWludXRlJywgbWludXRlLCAndGltZURheScsIHRpbWVEYXkpO1xuXG5cdFx0Ly92bS5zY2hlZHVsaW5nX3BhcmFtcy5zY2hlZHVsZVtzZWN0aW9uXSA9IFwiMjAxOC0wNS0wNVQwNjowMDowMC0wNzowMFwiXG5cdFx0dm0uc2NoZWR1bGluZ19wYXJhbXMuc2NoZWR1bGVbc2VjdGlvbl0gPSB5ZWFyICsgXCItXCIgKyBtb250aCArIFwiLVwiICsgIGRheSArIFwiVFwiICsgIGhvdXIgKyBcIjpcIiArIG1pbnV0ZSArIFwiOjAwLTA3OjAwXCJcblx0fTtcblxuXHQvLyBcdFNBVkUgU0FMRVMgREFZU1xuXHR2bS5zYXZlU2FsZXNEYXlzID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIGluZGV4ID0gMDtcblxuXHRcdC8vaXRlcmF0ZSB0aHJvdWdoIGFsbCB0aGUgc2FsZXMgZGF5cywgc2F2aW5nIHRvIHRoZSBEQlxuXHRcdHZtLnRlbXBJdGVyYXRpb25zLmZvckVhY2goZnVuY3Rpb24gKGNtZV9pdGVyYXRpb24pIHtcblxuXHRcdFx0dm0uc2FsZXNkYXlzTGlzdC4kYWRkKGNtZV9pdGVyYXRpb24pLnRoZW4oZnVuY3Rpb24gKHJlZikge1xuXHRcdFx0XHQvL2dldCB0aGUgbmV3IGtleVxuXHRcdFx0XHR2YXIgaWQgPSByZWYua2V5O1xuXG5cdFx0XHRcdC8vc2F2ZSBpdCB0byB0aGUgZGIgb2JqZWN0XG5cdFx0XHRcdGNvbnNvbGUubG9nKGlkKTtcblxuXHRcdFx0fSk7XG5cblx0XHR9KTtcblxuXHRcdC8vb25jZSB0aGV5IGhhdmUgYWxsIGJlbiBzYXZlZCBcblxuXHRcdC8vdm0uc2FsZXNkYXlzTGlzdC4kYWRkKHtuYW1lOiAndGVzdCd9KTtcdFxuXHR9O1xuXG5cdC8vcnVuIHRoZSB0ZXN0XG5cblxufSIsIi8qXG4qXHRDVVNUT01FUiBMSVNUXG4qXG4qXHRUaGlzIG1vZHVsZSBpcyBkZXNpZ25lZCB0byBcbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnY25lJylcblx0LmRpcmVjdGl2ZSgnY3VzdG9tZXJMaXN0JywgY3VzdG9tZXJMaXN0KTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjdXN0b21lckxpc3QoKSB7XG5cdC8vZGVmaW5lIHRoZSBkaXJlY3RpdmVcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogXCJBRUNNXCIsXG5cdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL2N1c3RvbWVyLWxpc3QuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge1xuXHRcdH0sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogY3VzdG9tZXJMaXN0Q29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge31cblxuXHRjdXN0b21lckxpc3RDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJ107XG5cdFxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gY3VzdG9tZXJMaXN0Q29udHJvbGxlcigkc2NvcGUsICRsb2cpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRjb25zb2xlLmxvZygnaW4gY29zdG9tZXIgTGlzdCBjb250cm9sbGVyJyk7XG5cdH1cblxuXHQvL3Bhc3MgaXQgYmFja1xuXHRyZXR1cm4gZGlyZWN0aXZlO1xufSIsIi8qXG4qXHRGTEFWT1IgTUlYRVJcbipcbipcdFRoaXMgbW9kdWxlIGlzIGRlc2lnbmVkIHRvIGFsbG93IGN1c3RvbWVycyB0byBtaXggYW5kIG1hdGNoXG4qXHRvdXIgZGVsaWNpb3VzIGZsYXZvcnMgYW5kIHRvIHBpY2sgdGhpZXIgc2l6aW5nLlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdjbmUnKVxuXHQuZGlyZWN0aXZlKCdsb2dpblBhc3N3b3JkJywgbG9naW5QYXNzd29yZCk7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gbG9naW5QYXNzd29yZCgpIHtcblx0Ly9kZWZpbmUgdGhlIGRpcmVjdGl2ZVxuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiBcIkFFQ01cIixcblx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvbG9naW4tcGFzc3dvcmQuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge1xuXHRcdFx0cGFzc3dvcmQ6IFwiPVwiLFxuXHRcdFx0YWN0aXZlOiBcIj1cIlxuXHRcdH0sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogbG9naW5QYXNzd29yZENvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHt9XG5cblx0bG9naW5QYXNzd29yZENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnXTtcblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxvZ2luUGFzc3dvcmRDb250cm9sbGVyKCRzY29wZSwgJGxvZykge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBzZWxmID0gdGhpcztcblx0fVxuXG5cdC8vcGFzcyBpdCBiYWNrXG5cdHJldHVybiBkaXJlY3RpdmU7XG59IiwiLypcbipcdEZMQVZPUiBNSVhFUlxuKlxuKlx0VGhpcyBtb2R1bGUgaXMgZGVzaWduZWQgdG8gYWxsb3cgY3VzdG9tZXJzIHRvIG1peCBhbmQgbWF0Y2hcbipcdG91ciBkZWxpY2lvdXMgZmxhdm9ycyBhbmQgdG8gcGljayB0aGllciBzaXppbmcuXG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ2NuZScpXG5cdC5kaXJlY3RpdmUoJ2xvZ2luVXNlcm5hbWUnLCBsb2dpblVzZXJuYW1lKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBsb2dpblVzZXJuYW1lKCkge1xuXHQvL2RlZmluZSB0aGUgZGlyZWN0aXZlXG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6IFwiQUVDTVwiLFxuXHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZGlyZWN0aXZlcy9sb2dpbi11c2VybmFtZS5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7XG5cdFx0XHR1c2VybmFtZTogXCI9XCIsXG5cdFx0XHRhY3RpdmU6IFwiPVwiXG5cdFx0fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBsb2dpblVzZXJuYW1lQ29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge31cblxuXHRsb2dpblVzZXJuYW1lQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZyddO1xuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbG9naW5Vc2VybmFtZUNvbnRyb2xsZXIoJHNjb3BlLCAkbG9nKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHR9XG5cblx0Ly9wYXNzIGl0IGJhY2tcblx0cmV0dXJuIGRpcmVjdGl2ZTtcbn0iLCIvKlxuKlx0QkFDS0VORCBEQVRBIFNFUlZJQ0VcbipcbiovXG5cbi8vZGVmaW5lIG1vZHVsZVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ2NuZScpXG4gICAgLmZhY3RvcnkoJ2RhdGFTZXJ2aWNlJywgZGF0YVNlcnZpY2UpO1xuXG4vL2RlcGVuZGVuY3kgaW5qZWN0aW9uc1xuZGF0YVNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnXTtcblxuLy9kZWNsYXJlIHRoZSBzZXJ2aWNlXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGRhdGFTZXJ2aWNlKCRodHRwKSB7XG5cblx0Ly9kZWZpbmUgbWV0aG9kc1xuXHR2YXIgZGF0YVNlcnZpY2UgPSB7XG5cdFx0c2FsZXNfZGF5czoge1xuXHRcdFx0Y29tcGlsZV9iYXRjaDogY29tcGlsZV9uZXdfc2FsZXNfZGF5X2JhdGNoXG5cdFx0fVxuXHR9O1xuXG5cdC8vXHRURVNUIEZVTkNUSU9OXG5cdGZ1bmN0aW9uIGNvbXBpbGVfbmV3X3NhbGVzX2RheV9iYXRjaChwYXJhbXMpIHtcblx0XHRcblx0XHQvL2NvbnNvbGUubG9nKCd0ZXN0aW5nIGRhdGFTZXJ2aWNlJyk7XG5cblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHQvL3RyeSBQT1NUXG5cdFx0XHQkaHR0cCh7XG5cdFx0XHRcdG1ldGhvZDogJ1BPU1QnLFxuXHRcdFx0XHR1cmw6ICcvYXBpL3NhbGVzX2RheXMvY29tcGlsZV9uZXdfc2FsZXNfZGF5c19iYXRjaCcsXG5cdFx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG5cdFx0XHRcdH0sXHRcblx0XHRcdFx0ZGF0YTogcGFyYW1zXG5cdFx0XHR9KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSkge1xuXHRcdFx0XHRcblx0XHRcdFx0cmVzb2x2ZShyZXNwb25zZS5kYXRhKTtcblx0XHRcdFx0XG5cdFx0XHR9LCBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKGVycm9yKSB7XG5cdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHR9O1xuXG5cdC8vdHVybiB0aGUgbWV0aG9kXG4gICAgcmV0dXJuIGRhdGFTZXJ2aWNlO1x0XG59O1xuXG4iLCIvKlxuKlxuKlxuKi9cblxuLy9kZWZpbmUgbW9kdWxlXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnY25lJylcbiAgICAuZmFjdG9yeSgnZmlyZWJhc2VTZXJ2aWNlJywgZmlyZWJhc2VTZXJ2aWNlKTtcblxuLy9kZXBlbmRlbmN5IGluamVjdGlvbnNcbmZpcmViYXNlU2VydmljZS4kaW5qZWN0ID0gWyckZmlyZWJhc2UnLCAnJGZpcmViYXNlT2JqZWN0JywgJyRmaXJlYmFzZUFycmF5J107XG5cbi8vZGVjbGFyZSB0aGUgc2VydmljZVxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBmaXJlYmFzZVNlcnZpY2UoJGZpcmViYXNlLCAkZmlyZWJhc2VPYmplY3QsICRmaXJlYmFzZUFycmF5KSB7XG5cblx0Ly9kZWZpbmUgbWV0aG9kc1xuXHR2YXIgRkJTZXJ2aWNlID0ge1xuXHRcdGdldDoge1xuXHRcdFx0Y3VzdG9tZXJfbGlzdDogZ2V0X2N1c3RvbWVyX2xpc3Rcblx0XHR9LFxuXHRcdGF1dGhVc2VyOiB7XG5cdFx0XHRlbWFpbDogYXV0aFVzZXJfZW1haWxcblx0XHR9LFxuXHRcdHRlc3Q6IHRlc3Rcblx0fTtcblxuXHQvL1x0QVVUSEVOVElDQVRFIFVTRVJcblx0ZnVuY3Rpb24gYXV0aFVzZXJfZW1haWwoZW1haWwsIHBhc3N3b3JkKSB7XG5cdFx0XG5cdFx0Y29uc29sZS5sb2coJ2F1dGhlbnRpY2F0aW5nIHVzZXInKVxuXG5cdFx0Ly9yZXR1cm4gYXN5bmMgd29ya1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cblx0XHRcdGZpcmViYXNlLmF1dGgoKS5zaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gc3VjZXNzKHMpIHtcblxuXHRcdFx0XHRyZXNvbHZlKHMpO1xuXG5cdFx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHQvLyBIYW5kbGUgRXJyb3JzIGhlcmUuXG5cdFx0XHRcdHZhciBlcnJvckNvZGUgPSBlcnJvci5jb2RlO1xuXHRcdFx0XHR2YXIgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcblx0XHRcdFx0cmVqZWN0KHtjb2RlOiBlcnJvckNvZGUgLCBtZXNzYWdlOiBlcnJvck1lc3NhZ2V9KTtcblxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0fTtcblxuXHQvL1x0R0VUIENVU1RPTUVSIExJU1Rcblx0ZnVuY3Rpb24gZ2V0X2N1c3RvbWVyX2xpc3QoKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cblx0XHQvL2NvbnNvbGUubG9nKCdnZXR0aW5nIGN1c3RvbWVyIGxpc3QnKTtcblxuXHRcdC8vcmV0dXJuIGFzeW5jIHdvcmtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgICAgXG5cdCAgICAgICAgLy92YXIgdGVzdCA9IFxuXG5cdCAgICAgICAgLy9oaXQgdGhlIHNlcnZlciBmb3IgdGhlIFxuXHQgICAgICAgIHJlc29sdmUoW1wib25lXCIsIFwidHdvXCIsICd0aHJlZSddKTtcblxuXHQgICAgfSk7XG5cdH1cblxuXHQvL1x0VEVTVCBGVU5DVElPTlxuXHRmdW5jdGlvbiB0ZXN0KCkgeyByZXR1cm4oJ2dvb2QgdGVzdCBmcm9tIEZCIFNlcnZpY2UnKTsgfTtcblxuXHQvL3R1cm4gdGhlIG1ldGhvZFxuICAgIHJldHVybiBGQlNlcnZpY2U7XHRcbn07XG5cbiIsIi8qXG4qXHRST1VURVMtQ09ORklHXG4qXG4qXHRUaGlzIG1vZHVsZSBzZXRzIHVwIGFsbCB0aGUgcmVxdWlyZWQgYW5ndWxhciByb3V0ZXMgZm9yIHRoaXMgd2ViIGFwcC5cbiovXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnY25lJylcbiAgICAuY29uZmlnKGNvbmZpZyk7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gY29uZmlnKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuXHQkbG9jYXRpb25Qcm92aWRlci5oYXNoUHJlZml4KCcnKTtcbiAgICAkcm91dGVQcm92aWRlclxuXHQvL1BVQkxJQyBST1VURVNcbiAgICAud2hlbignLycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9sYW5kaW5nUGFnZS5odG0nLCAgICAgIC8vJ3ZpZXdzL21haW5QYWdlLmh0bSdcbiAgICAgICAgY29udHJvbGxlcjogJ2xhbmRpbmdDb250cm9sbGVyJywgICAgICAgICAgIC8vJ21haW5Db250cm9sbGVyJ1xuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvY3VzdG9tZXJzJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2N1c3RvbWVyc1BhZ2UuaHRtJywgICAgICAvLyd2aWV3cy9tYWluUGFnZS5odG0nXG4gICAgICAgIGNvbnRyb2xsZXI6ICdjdXN0b21lcnNDb250cm9sbGVyJywgICAgICAgICAgIC8vJ21haW5Db250cm9sbGVyJ1xuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICBjdXN0b21lckxpc3Q6IGN1c3RvbWVyTGlzdFxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL3NhbGVzZGF5cycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9zYWxlc0RheXNQYWdlLmh0bScsICAgICAgLy8ndmlld3MvbWFpblBhZ2UuaHRtJ1xuICAgICAgICBjb250cm9sbGVyOiAnc2FsZXNEYXlzQ29udHJvbGxlcicsICAgICAgICAgICAvLydtYWluQ29udHJvbGxlcidcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcbiAgICAud2hlbignL2xvZ2luJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2xvZ2luUGFnZS5odG0nLCAgICAgIC8vJ3ZpZXdzL21haW5QYWdlLmh0bSdcbiAgICAgICAgY29udHJvbGxlcjogJ2xvZ2luQ29udHJvbGxlcicsICAgICAgICAgICAvLydtYWluQ29udHJvbGxlcidcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcblx0Lm90aGVyd2lzZSh7XG4gICAgICAgIHJlZGlyZWN0VG86ICcvJ1xuICAgIH0pO1xufVxuXG4vKlxuKiAgIFJFUVVJUkVEIEZVTkNUSU9OU1xuKlxuKi9cblxuLy8gIENVU1RPTUVSUyBMSVNUXG5mdW5jdGlvbiBjdXN0b21lckxpc3QoKSB7XG4gICAgXG4gICAgLy9yZXR1cm4gdGhlIHByb21pc2VcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIC8vaGl0IHRoZSBzZXJ2ZXIgZm9yIHRoZSBcbiAgICAgICAgcmVzb2x2ZSgnZ29vZCB0ZXN0Jyk7XG4gICAgfSk7XG5cbn07XG5cbiJdfQ==
