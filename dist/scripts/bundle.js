config.$inject=["$routeProvider","$locationProvider"];var ahNuts=angular.module("cne",["ngRoute","firebase","ngSanitize"]);function customersController(e,t,o,s,n,r,l){var c=this;c.customerList=l(firebase.database().ref().child("customers")),c.customerSalesDays=[],c.selectedCustomer={seasons:{2018:{id:2018}}},c.testList=["a","b","c"],c.state={selected:{customer:{$index:"",$id:""}}},t.info("in the customers controller"),c.selectCustomer=function(e){c.state.selected.customer.$index=e,c.state.selected.customer.$id=c.customerList[e].$id,c.selectedCustomer=r(firebase.database().ref().child("customers").child(c.customerList[e].$id)),c.customerSalesDays=c.selectedCustomer.sales_days},c.updateCustomer=function(){c.selectedCustomer.$save().then(function(e){console.log("updated record successfully")}).catch(function(e){console.log("error updating record",e)})},c.changeRecord=function(e){c.state.selected.customer.$index;switch({prev:0,next:1}[e]){case 0:c.selectCustomer(c.state.selected.customer.$index-1);break;case 1:c.selectCustomer(c.state.selected.customer.$index+1)}},c.generate_bulk_salesdays=function(){console.log("generating bulk salesdays",c.selectedCustomer.sales_days)}}function landingController(e,t){t.info("in the landing controller")}function loginController(e,t,o){var s=this;s.credentials={username:"",password:""},s.active={username:!1,password:!1},s.submitCreds=function(e,t){console.log("submitCreds clicked"),o.authUser.email(e,t).then(function(e){console.log("was success",e)}).catch(function(e){console.log("Error:",e)})},t.info("in the login controller")}function salesDaysController(t,e,o,s,n,r,l){var i=this;i.salesdaysList=s(firebase.database().ref().child("sales_days")),i.selectedRecord={id:"2039752"},i.testCustomers=["Beaverton","Orenco"],i.testSeasons=["2018","2017"],i.testTimes=["9:00 AM","9:15 AM","9:30 AM","9:45 AM"],i.scheduling_params={customer:"",season:"",bookend_dates:{first:"",last:""},repeats:"",event_days:{Mon:!1,Tue:!1,Wed:!1,Thu:!1,Fri:!1,Sat:!1,Sun:!1},same_day_load_in_out:!0,schedule:{load_in:"",load_out:"",open:"",close:"",sales_start:"",sales_end:""}},i.tempIterations=[],i.tempTimes={load_in:"",load_out:"",open:"",close:"",sales_start:"",sales_end:""},e.info("in the sales days controller"),i.updateRecord=function(e){console.log("got this id",e)},i.addSalesDay=function(){i.salesdaysList.$add({date:(new Date).toISOString(),schedule:{load_in:{datetime:"",sales_day_id:""},load_out:{datetime:"",sales_day_id:""},open:"",close:"",sales_start:"",sales_end:""},customer:"",season:{name:"",frequency:"",instance:0,total:0}}).then(function(e){console.log(e.key),i.selectedRecord=n(firebase.database().ref().child("sales_days").child(e.key)),console.log(i.selectedRecord)}).catch(function(e){console.log("error",e)})},i.generateSalesDays=function(){var e;(e=i.scheduling_params,new Promise(function(t,o){l.sales_days.compile_batch(e).then(function(e){t(e)}).catch(function(e){o(e)})})).then(function(e){console.log("successfully built",e),i.tempIterations=e,t.$apply()}).catch(function(e){console.log(e)})},i.foramtTime=function(e){console.log("formatting time",e);var t=new Date,o=t.getFullYear(),s=t.getMonth(),n=t.getDate(),r=i.tempTimes[e].split(":"),l=r[1].split(" "),c=parseInt(r[0]),a=l[0];"PM"==l[1]&&(c+=12).toString(),s<10&&(s="0"+s),n<10&&(n="0"+n),c<10&&(c="0"+c),i.scheduling_params.schedule[e]=o+"-"+s+"-"+n+"T"+c+":"+a+":00-07:00"}}function customerList(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/customer-list.directive.htm",replace:!0,scope:{},link:t,controller:o,controllerAs:"vm",bindToController:!0};function t(e,t,o,s){}function o(e,t){console.log("in costomer List controller")}return o.$inject=["$scope","$log"],e}function loginPassword(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/login-password.directive.htm",replace:!0,scope:{password:"=",active:"="},link:t,controller:o,controllerAs:"vm",bindToController:!0};function t(e,t,o,s){}function o(e,t){}return o.$inject=["$scope","$log"],e}function loginUsername(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/login-username.directive.htm",replace:!0,scope:{username:"=",active:"="},link:t,controller:o,controllerAs:"vm",bindToController:!0};function t(e,t,o,s){}function o(e,t){}return o.$inject=["$scope","$log"],e}function dataService(s){return{sales_days:{compile_batch:function(e){return new Promise(function(t,o){s({method:"POST",url:"/api/sales_days/compile_new_sales_days_batch",headers:{"Content-Type":"application/json"},data:e}).then(function(e){t(e.data)},function(e){o(e)})})}}}}function firebaseService(e,t,o){return{get:{customer_list:function(){return new Promise(function(e,t){e(["one","two","three"])})}},authUser:{email:function(e,o){return console.log("authenticating user"),new Promise(function(t,s){firebase.auth().signInWithEmailAndPassword(e,o).then(function(e){t(e)}).catch(function(e){var t=e.code,o=e.message;s({code:t,message:o})})})}},test:function(){return"good test from FB Service"}}}function config(e,t){t.hashPrefix(""),e.when("/",{templateUrl:"views/landingPage.htm",controller:"landingController",controllerAs:"vm"}).when("/customers",{templateUrl:"views/customersPage.htm",controller:"customersController",controllerAs:"vm",resolve:{customerList:customerList}}).when("/salesdays",{templateUrl:"views/salesDaysPage.htm",controller:"salesDaysController",controllerAs:"vm"}).when("/login",{templateUrl:"views/loginPage.htm",controller:"loginController",controllerAs:"vm"}).otherwise({redirectTo:"/"})}function customerList(){return new Promise(function(e,t){e("good test")})}angular.module("cne").controller("customersController",customersController),customersController.$inject=["$scope","$log","customerList","firebaseService","$firebase","$firebaseObject","$firebaseArray"],angular.module("cne").controller("landingController",landingController),landingController.$inject=["$scope","$log"],angular.module("cne").controller("loginController",loginController),loginController.$inject=["$scope","$log","firebaseService"],angular.module("cne").controller("salesDaysController",salesDaysController),salesDaysController.$inject=["$scope","$log","$firebase","$firebaseArray","$firebaseObject","$http","dataService"],angular.module("cne").directive("customerList",customerList),angular.module("cne").directive("loginPassword",loginPassword),angular.module("cne").directive("loginUsername",loginUsername),angular.module("cne").factory("dataService",dataService),dataService.$inject=["$http"],angular.module("cne").factory("firebaseService",firebaseService),firebaseService.$inject=["$firebase","$firebaseObject","$firebaseArray"],angular.module("cne").config(config);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMvd2ViYXBwLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9jdXN0b21lcnMtY29udHJvbGxlci5qcyIsInNjcmlwdHMvY29udHJvbGxlcnMvbGFuZGluZy1jb250cm9sbGVyLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9sb2dpbi1jb250cm9sbGVyLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9zYWxlc2RheXMtY29udHJvbGxlci5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9jdXN0b21lci1saXN0LmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL2xvZ2luLXBhc3N3b3JkLmRpcmVjdGl2ZS5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9sb2dpbi11c2VybmFtZS5kaXJlY3RpdmUuanMiLCJzY3JpcHRzL2ZhY3Rvcmllcy9kYXRhLnNlcnZpY2UuanMiLCJzY3JpcHRzL2ZhY3Rvcmllcy9maXJlYmFzZS5zZXJ2aWNlLmpzIiwic2NyaXB0cy9yb3V0ZXMvcm91dGVzLWNvbmZpZy5qcyJdLCJuYW1lcyI6WyJhaE51dHMiLCJhbmd1bGFyIiwibW9kdWxlIiwiY3VzdG9tZXJzQ29udHJvbGxlciIsIiRzY29wZSIsIiRsb2ciLCJjdXN0b21lckxpc3QiLCJmaXJlYmFzZVNlcnZpY2UiLCIkZmlyZWJhc2UiLCIkZmlyZWJhc2VPYmplY3QiLCIkZmlyZWJhc2VBcnJheSIsInZtIiwidGhpcyIsImZpcmViYXNlIiwiZGF0YWJhc2UiLCJyZWYiLCJjaGlsZCIsImN1c3RvbWVyU2FsZXNEYXlzIiwic2VsZWN0ZWRDdXN0b21lciIsInNlYXNvbnMiLCIyMDE4IiwiaWQiLCJ0ZXN0TGlzdCIsInN0YXRlIiwic2VsZWN0ZWQiLCJjdXN0b21lciIsIiRpbmRleCIsIiRpZCIsImluZm8iLCJzZWxlY3RDdXN0b21lciIsImluZGV4X2lkIiwic2FsZXNfZGF5cyIsInVwZGF0ZUN1c3RvbWVyIiwiJHNhdmUiLCJ0aGVuIiwicyIsImNvbnNvbGUiLCJsb2ciLCJjYXRjaCIsImUiLCJjaGFuZ2VSZWNvcmQiLCJzZWxlY3QiLCJwcmV2IiwibmV4dCIsImdlbmVyYXRlX2J1bGtfc2FsZXNkYXlzIiwibGFuZGluZ0NvbnRyb2xsZXIiLCJsb2dpbkNvbnRyb2xsZXIiLCJjcmVkZW50aWFscyIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJhY3RpdmUiLCJzdWJtaXRDcmVkcyIsInBhc3MiLCJhdXRoVXNlciIsImVtYWlsIiwic2FsZXNEYXlzQ29udHJvbGxlciIsIiRodHRwIiwiZGF0YVNlcnZpY2UiLCJzYWxlc2RheXNMaXN0Iiwic2VsZWN0ZWRSZWNvcmQiLCJ0ZXN0Q3VzdG9tZXJzIiwidGVzdFNlYXNvbnMiLCJ0ZXN0VGltZXMiLCJzY2hlZHVsaW5nX3BhcmFtcyIsInNlYXNvbiIsImJvb2tlbmRfZGF0ZXMiLCJmaXJzdCIsImxhc3QiLCJyZXBlYXRzIiwiZXZlbnRfZGF5cyIsIk1vbiIsIlR1ZSIsIldlZCIsIlRodSIsIkZyaSIsIlNhdCIsIlN1biIsInNhbWVfZGF5X2xvYWRfaW5fb3V0Iiwic2NoZWR1bGUiLCJsb2FkX2luIiwibG9hZF9vdXQiLCJvcGVuIiwiY2xvc2UiLCJzYWxlc19zdGFydCIsInNhbGVzX2VuZCIsInRlbXBJdGVyYXRpb25zIiwidGVtcFRpbWVzIiwidXBkYXRlUmVjb3JkIiwicmVjb3JkX2lkIiwiYWRkU2FsZXNEYXkiLCIkYWRkIiwiZGF0ZSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImRhdGV0aW1lIiwic2FsZXNfZGF5X2lkIiwibmFtZSIsImZyZXF1ZW5jeSIsImluc3RhbmNlIiwidG90YWwiLCJrZXkiLCJnZW5lcmF0ZVNhbGVzRGF5cyIsInBhcmFtcyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiY29tcGlsZV9iYXRjaCIsIiRhcHBseSIsImZvcmFtdFRpbWUiLCJzZWN0aW9uIiwidG9kYXkiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJtb250aCIsImdldE1vbnRoIiwiZGF5IiwiZ2V0RGF0ZSIsInRpbWVTcGxpdCIsInNwbGl0IiwibWluU3BsaXQiLCJob3VyIiwicGFyc2VJbnQiLCJtaW51dGUiLCJ0b1N0cmluZyIsImRpcmVjdGl2ZSIsInJlc3RyaWN0IiwidGVtcGxhdGVVcmwiLCJyZXBsYWNlIiwic2NvcGUiLCJsaW5rIiwibGlua0Z1bmMiLCJjb250cm9sbGVyIiwiY3VzdG9tZXJMaXN0Q29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsImJpbmRUb0NvbnRyb2xsZXIiLCJlbCIsImF0dHIiLCJjdHJsIiwiJGluamVjdCIsImxvZ2luUGFzc3dvcmQiLCJsb2dpblBhc3N3b3JkQ29udHJvbGxlciIsImxvZ2luVXNlcm5hbWUiLCJsb2dpblVzZXJuYW1lQ29udHJvbGxlciIsIm1ldGhvZCIsInVybCIsImhlYWRlcnMiLCJDb250ZW50LVR5cGUiLCJkYXRhIiwicmVzcG9uc2UiLCJlcnJvciIsImdldCIsImN1c3RvbWVyX2xpc3QiLCJhdXRoIiwic2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJlcnJvckNvZGUiLCJjb2RlIiwiZXJyb3JNZXNzYWdlIiwibWVzc2FnZSIsInRlc3QiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwiaGFzaFByZWZpeCIsIndoZW4iLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiZmFjdG9yeSJdLCJtYXBwaW5ncyI6InNEQUNBLElBQUFBLE9BQUFDLFFBQUFDLE9BQUEsTUFBQSxDQUFBLFVBQUEsV0FBQSxlQ01BLFNBQUFDLG9CQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUdBLElBQUFDLEVBQUFDLEtBQ0FELEVBQUFMLGFBQUFJLEVBQUFHLFNBQUFDLFdBQUFDLE1BQUFDLE1BQUEsY0FDQUwsRUFBQU0sa0JBQUEsR0FDQU4sRUFBQU8saUJBQUEsQ0FBQUMsUUFBQSxDQUFBQyxLQUFBLENBQUFDLEdBQUEsUUFDQVYsRUFBQVcsU0FBQSxDQUFBLElBQUEsSUFBQSxLQUNBWCxFQUFBWSxNQUFBLENBQ0FDLFNBQUEsQ0FDQUMsU0FBQSxDQUNB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QUFBLGtCQUNBRSxhQUFBLE9BRUErQixVQUFBLENBQ0FDLFdBQUEsTUFVQSxTQUFBL0osZUFHQSxPQUFBLElBQUFpRyxRQUFBLFNBQUFDLEVBQUFDLEdBRUFELEVBQUEsZVRyREF2RyxRQUNBQyxPQUFBLE9BQ0FpSSxXQUFBLHNCQUFBaEkscUJBRUFBLG9CQUFBdUksUUFBQSxDQUFBLFNBQUEsT0FBQSxlQUFBLGtCQUFBLFlBQUEsa0JBQUEsa0JDSkF6SSxRQUNBQyxPQUFBLE9BQ0FpSSxXQUFBLG9CQUFBdEYsbUJBRUFBLGtCQUFBNkYsUUFBQSxDQUFBLFNBQUEsUUNKQXpJLFFBQ0FDLE9BQUEsT0FDQWlJLFdBQUEsa0JBQUFyRixpQkFFQUEsZ0JBQUE0RixRQUFBLENBQUEsU0FBQSxPQUFBLG1CQ0pBekksUUFDQUMsT0FBQSxPQUNBaUksV0FBQSxzQkFBQTVFLHFCQUVBQSxvQkFBQW1GLFFBQUEsQ0FBQSxTQUFBLE9BQUEsWUFBQSxpQkFBQSxrQkFBQSxRQUFBLGVDRUF6SSxRQUNBQyxPQUFBLE9BQ0EwSCxVQUFBLGVBQUF0SCxjQ0RBTCxRQUNBQyxPQUFBLE9BQ0EwSCxVQUFBLGdCQUFBZSxlQ0ZBMUksUUFDQUMsT0FBQSxPQUNBMEgsVUFBQSxnQkFBQWlCLGVDSEE1SSxRQUNBQyxPQUFBLE9BQ0FvSyxRQUFBLGNBQUE3RyxhQUdBQSxZQUFBaUYsUUFBQSxDQUFBLFNDTEF6SSxRQUNBQyxPQUFBLE9BQ0FvSyxRQUFBLGtCQUFBL0osaUJBR0FBLGdCQUFBbUksUUFBQSxDQUFBLFlBQUEsa0JBQUEsa0JDTkF6SSxRQUNBQyxPQUFBLE9BQ0E2SixPQUFBQSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBNT0RVTEVcbnZhciBhaE51dHMgPSBhbmd1bGFyLm1vZHVsZSgnY25lJywgWyduZ1JvdXRlJywgJ2ZpcmViYXNlJywgJ25nU2FuaXRpemUnXSk7XG4iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnY25lJylcbiAgICAuY29udHJvbGxlcignY3VzdG9tZXJzQ29udHJvbGxlcicsIGN1c3RvbWVyc0NvbnRyb2xsZXIpO1xuXG5jdXN0b21lcnNDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsJyRsb2cnLCAnY3VzdG9tZXJMaXN0JywgJ2ZpcmViYXNlU2VydmljZScsICckZmlyZWJhc2UnLCAnJGZpcmViYXNlT2JqZWN0JywgJyRmaXJlYmFzZUFycmF5J107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gY3VzdG9tZXJzQ29udHJvbGxlcigkc2NvcGUsICRsb2csIGN1c3RvbWVyTGlzdCwgZmlyZWJhc2VTZXJ2aWNlLCAkZmlyZWJhc2UsICRmaXJlYmFzZU9iamVjdCwgJGZpcmViYXNlQXJyYXkpIHtcblxuXHQvL2RlZmluZSB2aWV3IG1vZGVsIHZhcmlhYmxlXG5cdHZhciB2bSA9IHRoaXM7XG5cdHZtLmN1c3RvbWVyTGlzdCA9ICRmaXJlYmFzZUFycmF5KGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCkuY2hpbGQoJ2N1c3RvbWVycycpKTtcblx0dm0uY3VzdG9tZXJTYWxlc0RheXMgPSBbXTtcblx0dm0uc2VsZWN0ZWRDdXN0b21lciA9IHsgc2Vhc29uczogeyBcIjIwMThcIjogeyBpZDogMjAxOH0gfSB9O1xuXHR2bS50ZXN0TGlzdCA9IFsnYScsICdiJywgJ2MnXTsgLy8kZmlyZWJhc2VBcnJheShmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigpLmNoaWxkKCdjdXN0b21lcnMnKS5jaGlsZCgnY3VzdG9tZXJfbGlzdCcpKTtcblx0dm0uc3RhdGUgPSB7XG5cdFx0c2VsZWN0ZWQ6IHtcblx0XHRcdGN1c3RvbWVyOiB7XG5cdFx0XHRcdCRpbmRleDogXCJcIixcblx0XHRcdFx0JGlkOiBcIlwiLFxuXG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdC8vaWRlbnRpZnkgd2hlcmUgd2UgYXJlXG5cdCRsb2cuaW5mbygnaW4gdGhlIGN1c3RvbWVycyBjb250cm9sbGVyJyk7XHQvL1RPRE86IFRBS0UgVEhJUyBPVVQgTEFURVJcblx0XG5cblx0Lypcblx0Klx0TE9DQUwgRlVOQ1RJT05TIEdPIEhFUkVcblx0KlxuXHQqL1xuXG5cdC8vXHRMT0FEIENVU1RPTUVSIExJU1Rcblx0ZnVuY3Rpb24gbG9hZF9jdXN0b21lcl9saXN0KCkge1xuXHRcdFxuXHRcdC8vdHJhY2sgc3RhcnRpbmcgZnVuY3Rpb25cblx0XHQvL2NvbnNvbGUubG9nKCdsb2FkaW5nIHRoZSBjdXN0b21lciBsaXN0Jyk7XG5cdFx0XG5cdFx0Ly9nYXRoZXIgdGhlIGRhdGFcblx0XHRmaXJlYmFzZVNlcnZpY2UuZ2V0LmN1c3RvbWVyX2xpc3QoKS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3Mocykge1xuXHRcdFx0XG5cdFx0XHQvL2NvbnNvbGUubG9nKCdnb3QgdGhpcyByZXNwb25zJywgcyk7XG5cdFx0XHRcblx0XHRcdC8vd2hlbiB0aGUgbGlzdCBoYXMgYmVlbiBsb2FkZWQgdXBkYXRlIHRoZSB2YXJpYWJsZXNcblx0XHRcdC8vdm0uY3VzdG9tZXJMaXN0ID0gcztcblx0XHRcdHZtLmN1c3RvbWVyTGlzdCA9ICRmaXJlYmFzZUFycmF5KGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCkuY2hpbGQoJ2N1c3RvbWVycycpLmNoaWxkKCdjdXN0b21lcl9saXN0JykpO1xuXG5cdFx0XHQvL3JlZmxlY3QgdGhlIGNoYW5nZXNcblx0XHRcdCRzY29wZS4kYXBwbHkoKTtcblxuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblx0XHRcdC8vaWYgdGhlcmUgd2FzIGFuIGVycm9yIHRocm93IHRoZSBlcnJvclxuXHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yJyk7XG5cdFx0fSk7XG5cdH07XG5cblx0Lypcblx0Klx0VklFVyBNT0RFTCBGVU5DVElPTlMgR08gSEVSRVxuXHQqXG5cdCovXHRcblx0Ly9cdFNFTEVDVCBDTElDS0VEIENVU1RPTUVSXG5cdHZtLnNlbGVjdEN1c3RvbWVyID0gZnVuY3Rpb24oaW5kZXhfaWQpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2bS5zdGF0ZS5zZWxlY3RlZC5jdXN0b21lci4kaW5kZXggPSBpbmRleF9pZDtcblx0XHR2bS5zdGF0ZS5zZWxlY3RlZC5jdXN0b21lci4kaWQgPSB2bS5jdXN0b21lckxpc3RbaW5kZXhfaWRdLiRpZDtcblx0XHR2bS5zZWxlY3RlZEN1c3RvbWVyID0gJGZpcmViYXNlT2JqZWN0KGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCkuY2hpbGQoJ2N1c3RvbWVycycpLmNoaWxkKHZtLmN1c3RvbWVyTGlzdFtpbmRleF9pZF0uJGlkKSk7XG5cdFx0dm0uY3VzdG9tZXJTYWxlc0RheXMgPSB2bS5zZWxlY3RlZEN1c3RvbWVyLnNhbGVzX2RheXM7XG5cdH07XG5cblx0Ly9cdFVQREFURSBUSEUgQ1VTVE9NRVIgUkVDT1JEXG5cdHZtLnVwZGF0ZUN1c3RvbWVyID0gZnVuY3Rpb24oKSB7XG5cdFx0dm0uc2VsZWN0ZWRDdXN0b21lci4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24gc3VjY2VzKHMpIHtcblx0XHRcdGNvbnNvbGUubG9nKCd1cGRhdGVkIHJlY29yZCBzdWNjZXNzZnVsbHknKTtcblx0XHR9KS5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnZXJyb3IgdXBkYXRpbmcgcmVjb3JkJywgZSk7XG5cdFx0fSk7XG5cdH07XG5cblx0Ly9cdE1PVkUgVE8gVEhFIE5FWFQgQ1VTVE9NRVJcblx0dm0uY2hhbmdlUmVjb3JkID0gZnVuY3Rpb24oc2VsZWN0KSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIG9wdG4gPSB7IFwicHJldlwiOiAwLCBcIm5leHRcIjogMSB9O1xuXHRcdHZhciBpbmRleF9pZCA9IHZtLnN0YXRlLnNlbGVjdGVkLmN1c3RvbWVyLiRpbmRleDtcblxuXHRcdC8vY29uc29sZS5sb2coaW5kZXhfaWQpO1xuXG5cdFx0c3dpdGNoKG9wdG5bc2VsZWN0XSkge1xuXHRcdFx0Y2FzZSAwOlxuXHRcdFx0XHQvL2NvbnNvbGUubG9nKCdwcmV2aW91cyByZWNvcmQnKTtcblx0XHRcdFx0dm0uc2VsZWN0Q3VzdG9tZXIodm0uc3RhdGUuc2VsZWN0ZWQuY3VzdG9tZXIuJGluZGV4IC0gMSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAxOlxuXHRcdFx0XHQvL2NvbnNvbGUubG9nKCduZXh0IHJlY29yZCcpO1xuXHRcdFx0XHR2bS5zZWxlY3RDdXN0b21lcih2bS5zdGF0ZS5zZWxlY3RlZC5jdXN0b21lci4kaW5kZXggKyAxKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cdH07XG5cblx0Ly9cdEdFTkVSQVRFIEJVTEsgU0FMRVMgREFZU1xuXHR2bS5nZW5lcmF0ZV9idWxrX3NhbGVzZGF5cyA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdGNvbnNvbGUubG9nKCdnZW5lcmF0aW5nIGJ1bGsgc2FsZXNkYXlzJywgdm0uc2VsZWN0ZWRDdXN0b21lci5zYWxlc19kYXlzKTtcblx0XHRcblx0XHQvKmlmKHZtLnNlbGVjdGVkQ3VzdG9tZXIuc2FsZXNfZGF5c1swXSA9PSB1bmRlZmluZWQpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdzYWxlcyBkYXlzIHVuZGVmaW5lZCcpXG5cdFx0XHR2bS5zZWxlY3RlZEN1c3RvbWVyLnNhbGVzX2RheXNbMF0gPSBcImFvaXNnb2kyM29ic29iMjNvaWhzc1wiXG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnNvbGUubG9nKCdzYWxlcyBkYXlzIGRlZmluZWQnKTtcblx0XHRcdHZhciBsYXN0a2V5ID0gMDtcblx0XHRcdE9iamVjdC5rZXlzKHZtLnNlbGVjdGVkQ3VzdG9tZXIuc2FsZXNfZGF5cykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0XHRcdGlmKGtleSAhPSAncGxhY2Vob2xkZXInKSBsYXN0a2V5ID0gcGFyc2VJbnQoa2V5KTtcblx0XHRcdH0pO1xuXHRcdFx0dm0uc2VsZWN0ZWRDdXN0b21lci5zYWxlc19kYXlzW2xhc3RrZXkgKyAxXSA9IFwiYW9zaWdoYW9pc2hnaW9oc2dcIlxuXHRcdH1cblxuXHRcdC8vc2F2ZSB2YWx1ZXNcblx0XHR2bS51cGRhdGVDdXN0b21lcigpOyovXG5cdH07XG5cblx0Ly9ydW4gdGhlIHRlc3RcblxuXHQvL29uIHBhZ2UgbG9hZFxuXHQvL2xvYWRfY3VzdG9tZXJfbGlzdCgpO1xuXG5cbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnY25lJylcbiAgICAuY29udHJvbGxlcignbGFuZGluZ0NvbnRyb2xsZXInLCBsYW5kaW5nQ29udHJvbGxlcik7XG5cbmxhbmRpbmdDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsJyRsb2cnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBsYW5kaW5nQ29udHJvbGxlcigkc2NvcGUsICRsb2cpIHtcblxuXHQvL2RlZmluZSB2aWV3IG1vZGVsIHZhcmlhYmxlXG5cdHZhciB2bSA9IHRoaXM7XG5cblx0JGxvZy5pbmZvKCdpbiB0aGUgbGFuZGluZyBjb250cm9sbGVyJyk7XHQvL1RPRE86IFRBS0UgVEhJUyBPVVQgTEFURVJcblxuXHQvL2RlZmluZSBsb2NhbCBmdW5jdGlvbnNcblxuXHQvL3J1biB0aGUgdGVzdFxuXG5cbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnY25lJylcbiAgICAuY29udHJvbGxlcignbG9naW5Db250cm9sbGVyJywgbG9naW5Db250cm9sbGVyKTtcblxubG9naW5Db250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsJyRsb2cnLCAnZmlyZWJhc2VTZXJ2aWNlJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gbG9naW5Db250cm9sbGVyKCRzY29wZSwgJGxvZywgZmlyZWJhc2VTZXJ2aWNlKSB7XG5cblx0Ly9kZWZpbmUgdmlldyBtb2RlbCB2YXJpYWJsZVxuXHR2YXIgdm0gPSB0aGlzO1xuXG5cdC8vZGVmaW5lIHZpZXcgbW9kZWwgdmFyaWFibGVzXG5cdHZtLmNyZWRlbnRpYWxzID0ge1xuXHRcdHVzZXJuYW1lOiBcIlwiLFxuXHRcdHBhc3N3b3JkOiBcIlwiXG5cdH07XG5cblx0dm0uYWN0aXZlID0ge1xuXHRcdHVzZXJuYW1lOiBmYWxzZSxcblx0XHRwYXNzd29yZDogZmFsc2Vcblx0fTtcblxuXHQvL2RlZmluZSB2aWV3IG1vZGVsIGZ1bmN0aW9uc1xuXHR2bS5zdWJtaXRDcmVkcyA9IGZ1bmN0aW9uKHVzZXJuYW1lLCBwYXNzKSB7XG5cdFx0XG5cdFx0Y29uc29sZS5sb2coJ3N1Ym1pdENyZWRzIGNsaWNrZWQnKTtcblx0XHRcblx0XHQvL3N1Ym1pdCBjcmVkZW50aWFsc1xuXHRcdGZpcmViYXNlU2VydmljZS5hdXRoVXNlci5lbWFpbCh1c2VybmFtZSwgcGFzcykudGhlbihmdW5jdGlvbiBzdWNjZXNzIChzKSB7XG5cblx0XHRcdGNvbnNvbGUubG9nKCd3YXMgc3VjY2VzcycsIHMpO1xuXG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xuXHRcdFx0Y29uc29sZS5sb2coXCJFcnJvcjpcIiwgZSk7XG5cdFx0fSk7XG5cblx0fTtcblxuXHQkbG9nLmluZm8oJ2luIHRoZSBsb2dpbiBjb250cm9sbGVyJyk7XHQvL1RPRE86IFRBS0UgVEhJUyBPVVQgTEFURVJcblxuXHQvL2RlZmluZSBsb2NhbCBmdW5jdGlvbnNcblxuXHQvL3J1biB0aGUgdGVzdFxuXG5cbn0iLCJhbmd1bGFyXG4gICAgLm1vZHVsZSgnY25lJylcbiAgICAuY29udHJvbGxlcignc2FsZXNEYXlzQ29udHJvbGxlcicsIHNhbGVzRGF5c0NvbnRyb2xsZXIpO1xuXG5zYWxlc0RheXNDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsJyRsb2cnLCAnJGZpcmViYXNlJywgJyRmaXJlYmFzZUFycmF5JywgJyRmaXJlYmFzZU9iamVjdCcsICckaHR0cCcsICdkYXRhU2VydmljZSddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIHNhbGVzRGF5c0NvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCAkZmlyZWJhc2UsICRmaXJlYmFzZUFycmF5LCAkZmlyZWJhc2VPYmplY3QsICRodHRwLCBkYXRhU2VydmljZSkge1xuXG5cdC8vZGVmaW5lIHZpZXcgbW9kZWwgdmFyaWFibGVcblx0dmFyIHZtID0gdGhpcztcblx0Lyp2YXIgaXRlcmF0aW9uID0ge1xuXHRcdGRhdGU6IFwiMjAxOC0wNS0wNVQwNjowMDowMFpcIixcblx0XHR3a19kYXk6IFwiU2F0XCIsXG5cdFx0aWQ6IFwiYmVhdmVydG9uX2ZtXzAwMVwiLFxuXHRcdHNjaGVkdWxlOiB7XG5cdFx0XHRsb2FkX2luOiBcIlwiLFxuXHRcdFx0bG9hZF9vdXQ6IFwiXCIsXG5cdFx0XHRvcGVuOiBcIjg6MDAgQU1cIixcblx0XHRcdGNsb3NlOiBcIjE6MzAgUE1cIixcblx0XHRcdHNhbGVzX3N0YXJ0OiBcIlwiLFxuXHRcdFx0c2FsZXNfZW5kOiBcIlwiXG5cdFx0fVxuXHR9OyovXG5cdHZtLnNhbGVzZGF5c0xpc3QgPSAkZmlyZWJhc2VBcnJheShmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigpLmNoaWxkKCdzYWxlc19kYXlzJykpO1xuXHR2bS5zZWxlY3RlZFJlY29yZCA9IHsgaWQ6IFwiMjAzOTc1MlwiIH07XG5cdHZtLnRlc3RDdXN0b21lcnMgPSBbIFwiQmVhdmVydG9uXCIsIFwiT3JlbmNvXCIgXTtcblx0dm0udGVzdFNlYXNvbnMgPSBbICcyMDE4JywgJzIwMTcnIF07XG5cdC8vdm0ucmVwZWF0cyA9IFsgJ25ldmVyJywgXCJldmVyeSB3ZWVrXCIsIFwiZXZlcnkgMiB3ZWVrc1wiLCBcImV2ZXJ5IDMgd2Vla3NcIiwgXCJldmVyeV80X3dlZWtzXCIsIFwiZXZlcnlfNV93ZWVrc1wiLCBcImV2ZXJ5XzZfd2Vla3NcIiwgXCJldmVyeV83X3dlZWtzXCIsIFwiZXZlcnlfOF93ZWVrc1wiIF07XG5cdHZtLnRlc3RUaW1lcyA9IFsgJzk6MDAgQU0nLCc5OjE1IEFNJywnOTozMCBBTScsJzk6NDUgQU0nICBdO1xuXHR2bS5zY2hlZHVsaW5nX3BhcmFtcyA9IHtcblx0XHRjdXN0b21lcjogXCJcIixcblx0XHRzZWFzb246IFwiXCIsXG5cdFx0Ym9va2VuZF9kYXRlczoge1xuXHRcdFx0Zmlyc3Q6IFwiXCIsXG5cdFx0XHRsYXN0OiBcIlwiXG5cdFx0fSxcblx0XHRyZXBlYXRzOiBcIlwiLFxuXHRcdGV2ZW50X2RheXM6IHtcblx0XHRcdE1vbjogZmFsc2UsXG5cdFx0XHRUdWU6IGZhbHNlLFxuXHRcdFx0V2VkOiBmYWxzZSxcblx0XHRcdFRodTogZmFsc2UsXG5cdFx0XHRGcmk6IGZhbHNlLFxuXHRcdFx0U2F0OiBmYWxzZSxcblx0XHRcdFN1bjogZmFsc2Vcblx0XHR9LFxuXHRcdHNhbWVfZGF5X2xvYWRfaW5fb3V0OiB0cnVlLFxuXHRcdHNjaGVkdWxlOiB7XG5cdFx0XHRsb2FkX2luOiBcIlwiLFxuXHRcdFx0bG9hZF9vdXQ6IFwiXCIsXG5cdFx0XHRvcGVuOiBcIlwiLFxuXHRcdFx0Y2xvc2U6IFwiXCIsXG5cdFx0XHRzYWxlc19zdGFydDogXCJcIixcblx0XHRcdHNhbGVzX2VuZDogXCJcIlxuXHRcdH1cblx0fTtcblx0dm0udGVtcEl0ZXJhdGlvbnMgPSBbXTtcblx0dm0udGVtcFRpbWVzID0ge1xuXHRcdGxvYWRfaW46IFwiXCIsXG5cdFx0bG9hZF9vdXQ6IFwiXCIsXG5cdFx0b3BlbjogXCJcIixcblx0XHRjbG9zZTogXCJcIixcblx0XHRzYWxlc19zdGFydDogXCJcIixcblx0XHRzYWxlc19lbmQ6IFwiXCJcblx0fVxuXG5cdC8vaWRlbnRpZnkgY29udHJvbGxlclxuXHQkbG9nLmluZm8oJ2luIHRoZSBzYWxlcyBkYXlzIGNvbnRyb2xsZXInKTtcdC8vVE9ETzogVEFLRSBUSElTIE9VVCBMQVRFUlxuXG5cdC8qXG5cdCpcdExPQ0FMIEZVTkNUSU9OUyBHTyBIRVJFXG5cdCpcblx0Ki9cblx0ZnVuY3Rpb24gYnVpbGRfc2FsZXNfZGF5c19hcnJheShwYXJhbXMpIHtcblx0XHQvL2xvY2FsIHZhcmlhYmxlc1xuXG5cdFx0Ly9jb25zb2xlLmxvZygnZ290IHRoZXNlIHBhcmFtcycsIHN0YXJ0LCBlbmQpO1xuXG5cdFx0Ly9yZXR1cm4gYXN5bmMgd29ya1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vYWNjZXNzIGRhdGEgc2VydmljZVxuXHRcdFx0ZGF0YVNlcnZpY2Uuc2FsZXNfZGF5cy5jb21waWxlX2JhdGNoKHBhcmFtcykudGhlbihmdW5jdGlvbiBzdWNjZXNzKHMpIHtcblx0XHRcdFx0Ly9jb25zb2xlLmxvZygnc3VjY2VzcycsIHMpO1xuXHRcdFx0XHRyZXNvbHZlKHMpO1xuXHRcdFx0fSkuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xuXHRcdFx0XHQvL2NvbnNvbGUubG9nKCdlcnJvcicsIGUpO1xuXHRcdFx0XHRyZWplY3QoZSk7XG5cdFx0XHR9KTtcblxuXHRcdH0pO1xuXG5cdH07XG5cblxuXHQvKlxuXHQqXHRWSUVXIE1PREVMIEZVTkNUSU9OUyBHTyBIRVJFXG5cdCpcblx0Ki9cblx0Ly9cdFVQREFURSBSRUNPUkRcblx0dm0udXBkYXRlUmVjb3JkID0gZnVuY3Rpb24ocmVjb3JkX2lkKSB7XG5cdFx0Y29uc29sZS5sb2coJ2dvdCB0aGlzIGlkJywgcmVjb3JkX2lkKTtcblx0XHQvKnZtLnNhbGVzZGF5c0xpc3QuJHNhdmUocmVjb3JkX2lkKS50aGVuKGZ1bmN0aW9uIHN1Y2NlcyhzKSB7XG5cdFx0XHRjb25zb2xlLmxvZygndXBkYXRlZCByZWNvcmQgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xuXHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yIHVwZGF0aW5nIHJlY29yZCcsIGUpO1xuXHRcdH0pOyovXG5cdH07XG5cblx0Ly8gQUREIE5FVyBTQUxFUyBEQVlcblx0dm0uYWRkU2FsZXNEYXkgPSBmdW5jdGlvbigpIHtcblxuXHRcdHZtLnNhbGVzZGF5c0xpc3QuJGFkZCh7XG5cdFx0XHRkYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG5cdFx0XHRzY2hlZHVsZToge1xuXHRcdFx0XHRsb2FkX2luOiB7XG5cdFx0XHRcdFx0ZGF0ZXRpbWU6IFwiXCIsXG5cdFx0XHRcdFx0c2FsZXNfZGF5X2lkOiBcIlwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGxvYWRfb3V0OiB7XG5cdFx0XHRcdFx0ZGF0ZXRpbWU6IFwiXCIsXG5cdFx0XHRcdFx0c2FsZXNfZGF5X2lkOiBcIlwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdG9wZW46IFwiXCIsXG5cdFx0XHRcdGNsb3NlOiBcIlwiLFxuXHRcdFx0XHRzYWxlc19zdGFydDogXCJcIixcblx0XHRcdFx0c2FsZXNfZW5kOiBcIlwiXG5cdFx0XHR9LFxuXHRcdFx0Y3VzdG9tZXI6IFwiXCIsXG5cdFx0XHRzZWFzb246IHtcblx0XHRcdFx0bmFtZTogXCJcIixcblx0XHRcdFx0ZnJlcXVlbmN5OiBcIlwiLFxuXHRcdFx0XHRpbnN0YW5jZTogMCxcblx0XHRcdFx0dG90YWw6IDBcblx0XHRcdH1cblx0XHR9KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3Mocykge1xuXHRcdFx0Ly9zZXQgdGhlIGZpcmViYXNlIG9iamVjdFxuXHRcdFx0Y29uc29sZS5sb2cocy5rZXkpO1xuXHRcdFx0dm0uc2VsZWN0ZWRSZWNvcmQgPSAkZmlyZWJhc2VPYmplY3QoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZCgnc2FsZXNfZGF5cycpLmNoaWxkKHMua2V5KSk7XG5cdFx0XHRjb25zb2xlLmxvZyh2bS5zZWxlY3RlZFJlY29yZCk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xuXHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yJywgZSk7XG5cdFx0fSk7XG5cblx0XHQvKnZtLnNhbGVzZGF5c0xpc3Quc2F2ZSgpLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhzKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnc3VjY2VzcycsIHMpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdlcnJvcicsIGUpO1xuXHRcdH0pOyovXG5cblx0fTtcblxuXHQvLyBHRU5FUkFURSBTQUxFUyBEQVlTXG5cdHZtLmdlbmVyYXRlU2FsZXNEYXlzID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cblx0XHQvL25vdGlmeSBvZiBsb2NhdGlvblxuXHRcdC8vY29uc29sZS5sb2coJ2dlbmVyYXRpbmcgU2FsZXMgZGF5cycsIHZtLnNjaGVkdWxpbmdfcGFyYW1zKTtcblxuXHRcdGJ1aWxkX3NhbGVzX2RheXNfYXJyYXkodm0uc2NoZWR1bGluZ19wYXJhbXMpLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhzKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnc3VjY2Vzc2Z1bGx5IGJ1aWx0Jywgcyk7XG5cdFx0XHR2bS50ZW1wSXRlcmF0aW9ucyA9IHM7XG5cdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xuXHRcdFx0Y29uc29sZS5sb2coZSk7XG5cdFx0fSk7XG5cblx0fTtcblxuXHQvL1x0Rk9STUFUIFRJTUVcblx0dm0uZm9yYW10VGltZSA9IGZ1bmN0aW9uKHNlY3Rpb24pIHtcblx0XHRcblx0XHQvL25vdGlmeSBvZiBwcm9ncmVzc1xuXHRcdGNvbnNvbGUubG9nKCdmb3JtYXR0aW5nIHRpbWUnLCBzZWN0aW9uKTtcblxuXHRcdC8vc3BsaXQgdGltZVxuXHRcdHZhciB0b2RheSA9IG5ldyBEYXRlKCk7XG5cdFx0dmFyIHllYXIgPSB0b2RheS5nZXRGdWxsWWVhcigpO1xuXHRcdHZhciBtb250aCA9IHRvZGF5LmdldE1vbnRoKCk7XG5cdFx0dmFyIGRheSA9IHRvZGF5LmdldERhdGUoKTtcblx0XHRcblxuXHRcdHZhciB0aW1lU3BsaXQgPSB2bS50ZW1wVGltZXNbc2VjdGlvbl0uc3BsaXQoXCI6XCIpO1xuXHRcdHZhciBtaW5TcGxpdCA9IHRpbWVTcGxpdFsxXS5zcGxpdChcIiBcIik7XG5cdFx0dmFyIGhvdXIgPSBwYXJzZUludCh0aW1lU3BsaXRbMF0pO1xuXHRcdHZhciBtaW51dGUgPSBtaW5TcGxpdFswXTtcblx0XHR2YXIgdGltZURheSA9IG1pblNwbGl0WzFdO1xuXG5cdFx0Ly9mb3JtYXQgYWNjb3JkaW5nbHlcblx0XHRpZih0aW1lRGF5ID09IFwiUE1cIikgeyBob3VyICs9IDEyOyBob3VyLnRvU3RyaW5nKCk7IH1cblx0XHRpZihtb250aCA8IDEwKSBtb250aCA9IFwiMFwiICsgbW9udGg7XG5cdFx0aWYoZGF5IDwgMTApIGRheSA9IFwiMFwiICsgZGF5O1xuXHRcdGlmKGhvdXIgPCAxMCkgaG91ciA9IFwiMFwiICsgaG91cjtcblx0XHQvL2lmKG1pbnV0ZSA8IDEwKSBtaW4gPSBcIjBcIiArIG1pbnV0ZTtcblx0XHRcblxuXHRcdC8vY29uc29sZS5sb2codG9kYXksICdob3VyJywgaG91ciwgJ21pbnV0ZScsIG1pbnV0ZSwgJ3RpbWVEYXknLCB0aW1lRGF5KTtcblxuXHRcdC8vdm0uc2NoZWR1bGluZ19wYXJhbXMuc2NoZWR1bGVbc2VjdGlvbl0gPSBcIjIwMTgtMDUtMDVUMDY6MDA6MDAtMDc6MDBcIlxuXHRcdHZtLnNjaGVkdWxpbmdfcGFyYW1zLnNjaGVkdWxlW3NlY3Rpb25dID0geWVhciArIFwiLVwiICsgbW9udGggKyBcIi1cIiArICBkYXkgKyBcIlRcIiArICBob3VyICsgXCI6XCIgKyBtaW51dGUgKyBcIjowMC0wNzowMFwiXG5cdH07XG5cblx0Ly9ydW4gdGhlIHRlc3RcblxuXG59IiwiLypcbipcdENVU1RPTUVSIExJU1RcbipcbipcdFRoaXMgbW9kdWxlIGlzIGRlc2lnbmVkIHRvIFxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdjbmUnKVxuXHQuZGlyZWN0aXZlKCdjdXN0b21lckxpc3QnLCBjdXN0b21lckxpc3QpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGN1c3RvbWVyTGlzdCgpIHtcblx0Ly9kZWZpbmUgdGhlIGRpcmVjdGl2ZVxuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiBcIkFFQ01cIixcblx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvY3VzdG9tZXItbGlzdC5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7XG5cdFx0fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBjdXN0b21lckxpc3RDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7fVxuXG5cdGN1c3RvbWVyTGlzdENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnXTtcblx0XG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBjdXN0b21lckxpc3RDb250cm9sbGVyKCRzY29wZSwgJGxvZykge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdGNvbnNvbGUubG9nKCdpbiBjb3N0b21lciBMaXN0IGNvbnRyb2xsZXInKTtcblx0fVxuXG5cdC8vcGFzcyBpdCBiYWNrXG5cdHJldHVybiBkaXJlY3RpdmU7XG59IiwiLypcbipcdEZMQVZPUiBNSVhFUlxuKlxuKlx0VGhpcyBtb2R1bGUgaXMgZGVzaWduZWQgdG8gYWxsb3cgY3VzdG9tZXJzIHRvIG1peCBhbmQgbWF0Y2hcbipcdG91ciBkZWxpY2lvdXMgZmxhdm9ycyBhbmQgdG8gcGljayB0aGllciBzaXppbmcuXG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ2NuZScpXG5cdC5kaXJlY3RpdmUoJ2xvZ2luUGFzc3dvcmQnLCBsb2dpblBhc3N3b3JkKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBsb2dpblBhc3N3b3JkKCkge1xuXHQvL2RlZmluZSB0aGUgZGlyZWN0aXZlXG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6IFwiQUVDTVwiLFxuXHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZGlyZWN0aXZlcy9sb2dpbi1wYXNzd29yZC5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7XG5cdFx0XHRwYXNzd29yZDogXCI9XCIsXG5cdFx0XHRhY3RpdmU6IFwiPVwiXG5cdFx0fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBsb2dpblBhc3N3b3JkQ29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge31cblxuXHRsb2dpblBhc3N3b3JkQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZyddO1xuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbG9naW5QYXNzd29yZENvbnRyb2xsZXIoJHNjb3BlLCAkbG9nKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHR9XG5cblx0Ly9wYXNzIGl0IGJhY2tcblx0cmV0dXJuIGRpcmVjdGl2ZTtcbn0iLCIvKlxuKlx0RkxBVk9SIE1JWEVSXG4qXG4qXHRUaGlzIG1vZHVsZSBpcyBkZXNpZ25lZCB0byBhbGxvdyBjdXN0b21lcnMgdG8gbWl4IGFuZCBtYXRjaFxuKlx0b3VyIGRlbGljaW91cyBmbGF2b3JzIGFuZCB0byBwaWNrIHRoaWVyIHNpemluZy5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnY25lJylcblx0LmRpcmVjdGl2ZSgnbG9naW5Vc2VybmFtZScsIGxvZ2luVXNlcm5hbWUpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGxvZ2luVXNlcm5hbWUoKSB7XG5cdC8vZGVmaW5lIHRoZSBkaXJlY3RpdmVcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogXCJBRUNNXCIsXG5cdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL2xvZ2luLXVzZXJuYW1lLmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdHVzZXJuYW1lOiBcIj1cIixcblx0XHRcdGFjdGl2ZTogXCI9XCJcblx0XHR9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IGxvZ2luVXNlcm5hbWVDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7fVxuXG5cdGxvZ2luVXNlcm5hbWVDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJ107XG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsb2dpblVzZXJuYW1lQ29udHJvbGxlcigkc2NvcGUsICRsb2cpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdH1cblxuXHQvL3Bhc3MgaXQgYmFja1xuXHRyZXR1cm4gZGlyZWN0aXZlO1xufSIsIi8qXG4qXHRCQUNLRU5EIERBVEEgU0VSVklDRVxuKlxuKi9cblxuLy9kZWZpbmUgbW9kdWxlXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnY25lJylcbiAgICAuZmFjdG9yeSgnZGF0YVNlcnZpY2UnLCBkYXRhU2VydmljZSk7XG5cbi8vZGVwZW5kZW5jeSBpbmplY3Rpb25zXG5kYXRhU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCddO1xuXG4vL2RlY2xhcmUgdGhlIHNlcnZpY2Vcbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gZGF0YVNlcnZpY2UoJGh0dHApIHtcblxuXHQvL2RlZmluZSBtZXRob2RzXG5cdHZhciBkYXRhU2VydmljZSA9IHtcblx0XHRzYWxlc19kYXlzOiB7XG5cdFx0XHRjb21waWxlX2JhdGNoOiBjb21waWxlX25ld19zYWxlc19kYXlfYmF0Y2hcblx0XHR9XG5cdH07XG5cblx0Ly9cdFRFU1QgRlVOQ1RJT05cblx0ZnVuY3Rpb24gY29tcGlsZV9uZXdfc2FsZXNfZGF5X2JhdGNoKHBhcmFtcykge1xuXHRcdFxuXHRcdC8vY29uc29sZS5sb2coJ3Rlc3RpbmcgZGF0YVNlcnZpY2UnKTtcblxuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdC8vdHJ5IFBPU1Rcblx0XHRcdCRodHRwKHtcblx0XHRcdFx0bWV0aG9kOiAnUE9TVCcsXG5cdFx0XHRcdHVybDogJy9hcGkvc2FsZXNfZGF5cy9jb21waWxlX25ld19zYWxlc19kYXlzX2JhdGNoJyxcblx0XHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHRcdCdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcblx0XHRcdFx0fSxcdFxuXHRcdFx0XHRkYXRhOiBwYXJhbXNcblx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRyZXNvbHZlKHJlc3BvbnNlLmRhdGEpO1xuXHRcdFx0XHRcblx0XHRcdH0sIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2soZXJyb3IpIHtcblx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdH07XG5cblx0Ly90dXJuIHRoZSBtZXRob2RcbiAgICByZXR1cm4gZGF0YVNlcnZpY2U7XHRcbn07XG5cbiIsIi8qXG4qXG4qXG4qL1xuXG4vL2RlZmluZSBtb2R1bGVcbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdjbmUnKVxuICAgIC5mYWN0b3J5KCdmaXJlYmFzZVNlcnZpY2UnLCBmaXJlYmFzZVNlcnZpY2UpO1xuXG4vL2RlcGVuZGVuY3kgaW5qZWN0aW9uc1xuZmlyZWJhc2VTZXJ2aWNlLiRpbmplY3QgPSBbJyRmaXJlYmFzZScsICckZmlyZWJhc2VPYmplY3QnLCAnJGZpcmViYXNlQXJyYXknXTtcblxuLy9kZWNsYXJlIHRoZSBzZXJ2aWNlXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGZpcmViYXNlU2VydmljZSgkZmlyZWJhc2UsICRmaXJlYmFzZU9iamVjdCwgJGZpcmViYXNlQXJyYXkpIHtcblxuXHQvL2RlZmluZSBtZXRob2RzXG5cdHZhciBGQlNlcnZpY2UgPSB7XG5cdFx0Z2V0OiB7XG5cdFx0XHRjdXN0b21lcl9saXN0OiBnZXRfY3VzdG9tZXJfbGlzdFxuXHRcdH0sXG5cdFx0YXV0aFVzZXI6IHtcblx0XHRcdGVtYWlsOiBhdXRoVXNlcl9lbWFpbFxuXHRcdH0sXG5cdFx0dGVzdDogdGVzdFxuXHR9O1xuXG5cdC8vXHRBVVRIRU5USUNBVEUgVVNFUlxuXHRmdW5jdGlvbiBhdXRoVXNlcl9lbWFpbChlbWFpbCwgcGFzc3dvcmQpIHtcblx0XHRcblx0XHRjb25zb2xlLmxvZygnYXV0aGVudGljYXRpbmcgdXNlcicpXG5cblx0XHQvL3JldHVybiBhc3luYyB3b3JrXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0ZmlyZWJhc2UuYXV0aCgpLnNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCkudGhlbihmdW5jdGlvbiBzdWNlc3Mocykge1xuXG5cdFx0XHRcdHJlc29sdmUocyk7XG5cblx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdC8vIEhhbmRsZSBFcnJvcnMgaGVyZS5cblx0XHRcdFx0dmFyIGVycm9yQ29kZSA9IGVycm9yLmNvZGU7XG5cdFx0XHRcdHZhciBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuXHRcdFx0XHRyZWplY3Qoe2NvZGU6IGVycm9yQ29kZSAsIG1lc3NhZ2U6IGVycm9yTWVzc2FnZX0pO1xuXG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHR9O1xuXG5cdC8vXHRHRVQgQ1VTVE9NRVIgTElTVFxuXHRmdW5jdGlvbiBnZXRfY3VzdG9tZXJfbGlzdCgpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblxuXHRcdC8vY29uc29sZS5sb2coJ2dldHRpbmcgY3VzdG9tZXIgbGlzdCcpO1xuXG5cdFx0Ly9yZXR1cm4gYXN5bmMgd29ya1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgICBcblx0ICAgICAgICAvL3ZhciB0ZXN0ID0gXG5cblx0ICAgICAgICAvL2hpdCB0aGUgc2VydmVyIGZvciB0aGUgXG5cdCAgICAgICAgcmVzb2x2ZShbXCJvbmVcIiwgXCJ0d29cIiwgJ3RocmVlJ10pO1xuXG5cdCAgICB9KTtcblx0fVxuXG5cdC8vXHRURVNUIEZVTkNUSU9OXG5cdGZ1bmN0aW9uIHRlc3QoKSB7IHJldHVybignZ29vZCB0ZXN0IGZyb20gRkIgU2VydmljZScpOyB9O1xuXG5cdC8vdHVybiB0aGUgbWV0aG9kXG4gICAgcmV0dXJuIEZCU2VydmljZTtcdFxufTtcblxuIiwiLypcbipcdFJPVVRFUy1DT05GSUdcbipcbipcdFRoaXMgbW9kdWxlIHNldHMgdXAgYWxsIHRoZSByZXF1aXJlZCBhbmd1bGFyIHJvdXRlcyBmb3IgdGhpcyB3ZWIgYXBwLlxuKi9cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdjbmUnKVxuICAgIC5jb25maWcoY29uZmlnKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjb25maWcoJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG5cdCRsb2NhdGlvblByb3ZpZGVyLmhhc2hQcmVmaXgoJycpO1xuICAgICRyb3V0ZVByb3ZpZGVyXG5cdC8vUFVCTElDIFJPVVRFU1xuICAgIC53aGVuKCcvJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2xhbmRpbmdQYWdlLmh0bScsICAgICAgLy8ndmlld3MvbWFpblBhZ2UuaHRtJ1xuICAgICAgICBjb250cm9sbGVyOiAnbGFuZGluZ0NvbnRyb2xsZXInLCAgICAgICAgICAgLy8nbWFpbkNvbnRyb2xsZXInXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgIH0pXG4gICAgLndoZW4oJy9jdXN0b21lcnMnLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvY3VzdG9tZXJzUGFnZS5odG0nLCAgICAgIC8vJ3ZpZXdzL21haW5QYWdlLmh0bSdcbiAgICAgICAgY29udHJvbGxlcjogJ2N1c3RvbWVyc0NvbnRyb2xsZXInLCAgICAgICAgICAgLy8nbWFpbkNvbnRyb2xsZXInXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIGN1c3RvbWVyTGlzdDogY3VzdG9tZXJMaXN0XG4gICAgICAgIH1cbiAgICB9KVxuICAgIC53aGVuKCcvc2FsZXNkYXlzJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3NhbGVzRGF5c1BhZ2UuaHRtJywgICAgICAvLyd2aWV3cy9tYWluUGFnZS5odG0nXG4gICAgICAgIGNvbnRyb2xsZXI6ICdzYWxlc0RheXNDb250cm9sbGVyJywgICAgICAgICAgIC8vJ21haW5Db250cm9sbGVyJ1xuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvbG9naW4nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvbG9naW5QYWdlLmh0bScsICAgICAgLy8ndmlld3MvbWFpblBhZ2UuaHRtJ1xuICAgICAgICBjb250cm9sbGVyOiAnbG9naW5Db250cm9sbGVyJywgICAgICAgICAgIC8vJ21haW5Db250cm9sbGVyJ1xuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuXHQub3RoZXJ3aXNlKHtcbiAgICAgICAgcmVkaXJlY3RUbzogJy8nXG4gICAgfSk7XG59XG5cbi8qXG4qICAgUkVRVUlSRUQgRlVOQ1RJT05TXG4qXG4qL1xuXG4vLyAgQ1VTVE9NRVJTIExJU1RcbmZ1bmN0aW9uIGN1c3RvbWVyTGlzdCgpIHtcbiAgICBcbiAgICAvL3JldHVybiB0aGUgcHJvbWlzZVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgLy9oaXQgdGhlIHNlcnZlciBmb3IgdGhlIFxuICAgICAgICByZXNvbHZlKCdnb29kIHRlc3QnKTtcbiAgICB9KTtcblxufTtcblxuIl19
