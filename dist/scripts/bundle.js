config.$inject=["$routeProvider","$locationProvider"];var ahNuts=angular.module("cne",["ngRoute","firebase","ngSanitize"]);function customersController(e,o,r,t,n,c,s){var i=this;i.customerList=s(firebase.database().ref().child("customers")),i.selectedCustomer="",i.testList=["a","b","c"],i.state={selected:{customer:{$index:"",$id:""}}},o.info("in the customers controller"),i.selectCustomer=function(e){i.state.selected.customer.$id=e,i.selectedCustomer=c(firebase.database().ref().child("customers").child(i.customerList[e].$id))},i.updateCustomer=function(){i.selectedCustomer.$save().then(function(e){console.log("updated record successfully")}).catch(function(e){console.log("error updating record",e)})},i.changeRecord=function(e){i.state.selected.customer.$id;switch({prev:0,next:1}[e]){case 0:i.selectCustomer(i.state.selected.customer.$id-1);break;case 1:i.selectCustomer(i.state.selected.customer.$id+1)}}}function landingController(e,o){o.info("in the landing controller")}function loginController(e,o,r){var t=this;t.credentials={username:"",password:""},t.active={username:!1,password:!1},t.submitCreds=function(e,o){console.log("submitCreds clicked"),r.authUser.email(e,o).then(function(e){console.log("was success",e)}).catch(function(e){console.log("Error:",e)})},o.info("in the login controller")}function customerList(){o.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/customer-list.directive.htm",replace:!0,scope:{},link:o,controller:r,controllerAs:"vm",bindToController:!0};function o(e,o,r,t){}function r(e,o){console.log("in costomer List controller")}return r.$inject=["$scope","$log"],e}function loginPassword(){o.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/login-password.directive.htm",replace:!0,scope:{password:"=",active:"="},link:o,controller:r,controllerAs:"vm",bindToController:!0};function o(e,o,r,t){}function r(e,o){}return r.$inject=["$scope","$log"],e}function loginUsername(){o.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/login-username.directive.htm",replace:!0,scope:{username:"=",active:"="},link:o,controller:r,controllerAs:"vm",bindToController:!0};function o(e,o,r,t){}function r(e,o){}return r.$inject=["$scope","$log"],e}function config(e,o){o.hashPrefix(""),e.when("/",{templateUrl:"views/landingPage.htm",controller:"landingController",controllerAs:"vm"}).when("/customers",{templateUrl:"views/customersPage.htm",controller:"customersController",controllerAs:"vm",resolve:{customerList:customerList}}).when("/login",{templateUrl:"views/loginPage.htm",controller:"loginController",controllerAs:"vm"}).otherwise({redirectTo:"/"})}function customerList(){return new Promise(function(e,o){e("good test")})}function firebaseService(e,o,r){return{get:{customer_list:function(){return new Promise(function(e,o){e(["one","two","three"])})}},authUser:{email:function(e,r){return console.log("authenticating user"),new Promise(function(o,t){firebase.auth().signInWithEmailAndPassword(e,r).then(function(e){o(e)}).catch(function(e){var o=e.code,r=e.message;t({code:o,message:r})})})}},test:function(){return"good test from FB Service"}}}angular.module("cne").controller("customersController",customersController),customersController.$inject=["$scope","$log","customerList","firebaseService","$firebase","$firebaseObject","$firebaseArray"],angular.module("cne").controller("landingController",landingController),landingController.$inject=["$scope","$log"],angular.module("cne").controller("loginController",loginController),loginController.$inject=["$scope","$log","firebaseService"],angular.module("cne").directive("customerList",customerList),angular.module("cne").directive("loginPassword",loginPassword),angular.module("cne").directive("loginUsername",loginUsername),angular.module("cne").config(config),angular.module("cne").factory("firebaseService",firebaseService),firebaseService.$inject=["$firebase","$firebaseObject","$firebaseArray"];
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMvd2ViYXBwLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9jdXN0b21lcnMtY29udHJvbGxlci5qcyIsInNjcmlwdHMvY29udHJvbGxlcnMvbGFuZGluZy1jb250cm9sbGVyLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9sb2dpbi1jb250cm9sbGVyLmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL2N1c3RvbWVyLWxpc3QuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvbG9naW4tcGFzc3dvcmQuZGlyZWN0aXZlLmpzIiwic2NyaXB0cy9kaXJlY3RpdmVzL2xvZ2luLXVzZXJuYW1lLmRpcmVjdGl2ZS5qcyIsInNjcmlwdHMvcm91dGVzL3JvdXRlcy1jb25maWcuanMiLCJzY3JpcHRzL2ZhY3Rvcmllcy9maXJlYmFzZS5zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImFoTnV0cyIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjdXN0b21lcnNDb250cm9sbGVyIiwiJHNjb3BlIiwiJGxvZyIsImN1c3RvbWVyTGlzdCIsImZpcmViYXNlU2VydmljZSIsIiRmaXJlYmFzZSIsIiRmaXJlYmFzZU9iamVjdCIsIiRmaXJlYmFzZUFycmF5Iiwidm0iLCJ0aGlzIiwiZmlyZWJhc2UiLCJkYXRhYmFzZSIsInJlZiIsImNoaWxkIiwic2VsZWN0ZWRDdXN0b21lciIsInRlc3RMaXN0Iiwic3RhdGUiLCJzZWxlY3RlZCIsImN1c3RvbWVyIiwiJGluZGV4IiwiJGlkIiwiaW5mbyIsInNlbGVjdEN1c3RvbWVyIiwiaW5kZXhfaWQiLCJ1cGRhdGVDdXN0b21lciIsIiRzYXZlIiwidGhlbiIsInMiLCJjb25zb2xlIiwibG9nIiwiY2F0Y2giLCJlIiwiY2hhbmdlUmVjb3JkIiwic2VsZWN0IiwicHJldiIsIm5leHQiLCJsYW5kaW5nQ29udHJvbGxlciIsImxvZ2luQ29udHJvbGxlciIsImNyZWRlbnRpYWxzIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImFjdGl2ZSIsInN1Ym1pdENyZWRzIiwicGFzcyIsImF1dGhVc2VyIiwiZW1haWwiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInRlbXBsYXRlVXJsIiwicmVwbGFjZSIsInNjb3BlIiwibGluayIsImxpbmtGdW5jIiwiY29udHJvbGxlciIsImN1c3RvbWVyTGlzdENvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJiaW5kVG9Db250cm9sbGVyIiwiZWwiLCJhdHRyIiwiY3RybCIsIiRpbmplY3QiLCJsb2dpblBhc3N3b3JkIiwibG9naW5QYXNzd29yZENvbnRyb2xsZXIiLCJsb2dpblVzZXJuYW1lIiwibG9naW5Vc2VybmFtZUNvbnRyb2xsZXIiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwiaGFzaFByZWZpeCIsIndoZW4iLCJyZXNvbHZlIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsIlByb21pc2UiLCJyZWplY3QiLCJnZXQiLCJjdXN0b21lcl9saXN0IiwiYXV0aCIsInNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkIiwiZXJyb3IiLCJlcnJvckNvZGUiLCJjb2RlIiwiZXJyb3JNZXNzYWdlIiwibWVzc2FnZSIsInRlc3QiLCJmYWN0b3J5Il0sIm1hcHBpbmdzIjoic0RBQ0EsSUFBQUEsT0FBQUMsUUFBQUMsT0FBQSxNQUFBLENBQUEsVUFBQSxXQUFBLGVDTUEsU0FBQUMsb0JBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBR0EsSUFBQUMsRUFBQUMsS0FDQUQsRUFBQUwsYUFBQUksRUFBQUcsU0FBQUMsV0FBQUMsTUFBQUMsTUFBQSxjQUNBTCxFQUFBTSxpQkFBQSxHQUNBTixFQUFBTyxTQUFBLENBQUEsSUFBQSxJQUFBLEtBQ0FQLEVBQUFRLE1BQUEsQ0FDQUMsU0FBQSxDQUNBQyxTQUFBLENBQ0FDLE9BQUEsR0FDQUMsSUFBQSxNQU9BbEIsRUFBQW1CLEtBQUEsK0JBcUNBYixFQUFBYyxlQUFBLFNBQUFDLEdBRUFmLEVBQUFRLE1BQUFDLFNBQUFDLFNBQUFFLElBQUFH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RVxudmFyIGFoTnV0cyA9IGFuZ3VsYXIubW9kdWxlKCdjbmUnLCBbJ25nUm91dGUnLCAnZmlyZWJhc2UnLCAnbmdTYW5pdGl6ZSddKTtcbiIsImFuZ3VsYXJcbiAgICAubW9kdWxlKCdjbmUnKVxuICAgIC5jb250cm9sbGVyKCdjdXN0b21lcnNDb250cm9sbGVyJywgY3VzdG9tZXJzQ29udHJvbGxlcik7XG5cbmN1c3RvbWVyc0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywnJGxvZycsICdjdXN0b21lckxpc3QnLCAnZmlyZWJhc2VTZXJ2aWNlJywgJyRmaXJlYmFzZScsICckZmlyZWJhc2VPYmplY3QnLCAnJGZpcmViYXNlQXJyYXknXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjdXN0b21lcnNDb250cm9sbGVyKCRzY29wZSwgJGxvZywgY3VzdG9tZXJMaXN0LCBmaXJlYmFzZVNlcnZpY2UsICRmaXJlYmFzZSwgJGZpcmViYXNlT2JqZWN0LCAkZmlyZWJhc2VBcnJheSkge1xuXG5cdC8vZGVmaW5lIHZpZXcgbW9kZWwgdmFyaWFibGVcblx0dmFyIHZtID0gdGhpcztcblx0dm0uY3VzdG9tZXJMaXN0ID0gJGZpcmViYXNlQXJyYXkoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZCgnY3VzdG9tZXJzJykpO1xuXHR2bS5zZWxlY3RlZEN1c3RvbWVyID0gJyc7XG5cdHZtLnRlc3RMaXN0ID0gWydhJywgJ2InLCAnYyddOyAvLyRmaXJlYmFzZUFycmF5KGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCkuY2hpbGQoJ2N1c3RvbWVycycpLmNoaWxkKCdjdXN0b21lcl9saXN0JykpO1xuXHR2bS5zdGF0ZSA9IHtcblx0XHRzZWxlY3RlZDoge1xuXHRcdFx0Y3VzdG9tZXI6IHtcblx0XHRcdFx0JGluZGV4OiBcIlwiLFxuXHRcdFx0XHQkaWQ6IFwiXCIsXG5cblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0Ly9pZGVudGlmeSB3aGVyZSB3ZSBhcmVcblx0JGxvZy5pbmZvKCdpbiB0aGUgY3VzdG9tZXJzIGNvbnRyb2xsZXInKTtcdC8vVE9ETzogVEFLRSBUSElTIE9VVCBMQVRFUlxuXHRcblxuXHQvKlxuXHQqXHRMT0NBTCBGVU5DVElPTlMgR08gSEVSRVxuXHQqXG5cdCovXG5cblx0Ly9cdExPQUQgQ1VTVE9NRVIgTElTVFxuXHRmdW5jdGlvbiBsb2FkX2N1c3RvbWVyX2xpc3QoKSB7XG5cdFx0XG5cdFx0Ly90cmFjayBzdGFydGluZyBmdW5jdGlvblxuXHRcdC8vY29uc29sZS5sb2coJ2xvYWRpbmcgdGhlIGN1c3RvbWVyIGxpc3QnKTtcblx0XHRcblx0XHQvL2dhdGhlciB0aGUgZGF0YVxuXHRcdGZpcmViYXNlU2VydmljZS5nZXQuY3VzdG9tZXJfbGlzdCgpLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhzKSB7XG5cdFx0XHRcblx0XHRcdC8vY29uc29sZS5sb2coJ2dvdCB0aGlzIHJlc3BvbnMnLCBzKTtcblx0XHRcdFxuXHRcdFx0Ly93aGVuIHRoZSBsaXN0IGhhcyBiZWVuIGxvYWRlZCB1cGRhdGUgdGhlIHZhcmlhYmxlc1xuXHRcdFx0Ly92bS5jdXN0b21lckxpc3QgPSBzO1xuXHRcdFx0dm0uY3VzdG9tZXJMaXN0ID0gJGZpcmViYXNlQXJyYXkoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZCgnY3VzdG9tZXJzJykuY2hpbGQoJ2N1c3RvbWVyX2xpc3QnKSk7XG5cblx0XHRcdC8vcmVmbGVjdCB0aGUgY2hhbmdlc1xuXHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xuXHRcdFx0Ly9pZiB0aGVyZSB3YXMgYW4gZXJyb3IgdGhyb3cgdGhlIGVycm9yXG5cdFx0XHRjb25zb2xlLmxvZygnZXJyb3InKTtcblx0XHR9KTtcblx0fTtcblxuXHQvKlxuXHQqXHRWSUVXIE1PREVMIEZVTkNUSU9OUyBHTyBIRVJFXG5cdCpcblx0Ki9cdFxuXHQvL1x0U0VMRUNUIENMSUNLRUQgQ1VTVE9NRVJcblx0dm0uc2VsZWN0Q3VzdG9tZXIgPSBmdW5jdGlvbihpbmRleF9pZCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZtLnN0YXRlLnNlbGVjdGVkLmN1c3RvbWVyLiRpZCA9IGluZGV4X2lkO1xuXHRcdHZtLnNlbGVjdGVkQ3VzdG9tZXIgPSAkZmlyZWJhc2VPYmplY3QoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZCgnY3VzdG9tZXJzJykuY2hpbGQodm0uY3VzdG9tZXJMaXN0W2luZGV4X2lkXS4kaWQpKTtcblx0fTtcblxuXHQvL1x0VVBEQVRFIFRIRSBDVVNUT01FUiBSRUNPUkRcblx0dm0udXBkYXRlQ3VzdG9tZXIgPSBmdW5jdGlvbigpIHtcblx0XHR2bS5zZWxlY3RlZEN1c3RvbWVyLiRzYXZlKCkudGhlbihmdW5jdGlvbiBzdWNjZXMocykge1xuXHRcdFx0Y29uc29sZS5sb2coJ3VwZGF0ZWQgcmVjb3JkIHN1Y2Nlc3NmdWxseScpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdlcnJvciB1cGRhdGluZyByZWNvcmQnLCBlKTtcblx0XHR9KTtcblx0fTtcblxuXHQvL1x0TU9WRSBUTyBUSEUgTkVYVCBDVVNUT01FUlxuXHR2bS5jaGFuZ2VSZWNvcmQgPSBmdW5jdGlvbihzZWxlY3QpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgb3B0biA9IHsgXCJwcmV2XCI6IDAsIFwibmV4dFwiOiAxIH07XG5cdFx0dmFyIGluZGV4X2lkID0gdm0uc3RhdGUuc2VsZWN0ZWQuY3VzdG9tZXIuJGlkO1xuXG5cdFx0c3dpdGNoKG9wdG5bc2VsZWN0XSkge1xuXHRcdFx0Y2FzZSAwOlxuXHRcdFx0XHQvL2NvbnNvbGUubG9nKCdwcmV2aW91cyByZWNvcmQnKTtcblx0XHRcdFx0dm0uc2VsZWN0Q3VzdG9tZXIodm0uc3RhdGUuc2VsZWN0ZWQuY3VzdG9tZXIuJGlkIC0gMSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAxOlxuXHRcdFx0XHQvL2NvbnNvbGUubG9nKCduZXh0IHJlY29yZCcpO1xuXHRcdFx0XHR2bS5zZWxlY3RDdXN0b21lcih2bS5zdGF0ZS5zZWxlY3RlZC5jdXN0b21lci4kaWQgKyAxKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cdH07XG5cblx0Ly9ydW4gdGhlIHRlc3RcblxuXHQvL29uIHBhZ2UgbG9hZFxuXHQvL2xvYWRfY3VzdG9tZXJfbGlzdCgpO1xuXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ2NuZScpXG4gICAgLmNvbnRyb2xsZXIoJ2xhbmRpbmdDb250cm9sbGVyJywgbGFuZGluZ0NvbnRyb2xsZXIpO1xuXG5sYW5kaW5nQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCckbG9nJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gbGFuZGluZ0NvbnRyb2xsZXIoJHNjb3BlLCAkbG9nKSB7XG5cblx0Ly9kZWZpbmUgdmlldyBtb2RlbCB2YXJpYWJsZVxuXHR2YXIgdm0gPSB0aGlzO1xuXG5cdCRsb2cuaW5mbygnaW4gdGhlIGxhbmRpbmcgY29udHJvbGxlcicpO1x0Ly9UT0RPOiBUQUtFIFRISVMgT1VUIExBVEVSXG5cblx0Ly9kZWZpbmUgbG9jYWwgZnVuY3Rpb25zXG5cblx0Ly9ydW4gdGhlIHRlc3RcblxuXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ2NuZScpXG4gICAgLmNvbnRyb2xsZXIoJ2xvZ2luQ29udHJvbGxlcicsIGxvZ2luQ29udHJvbGxlcik7XG5cbmxvZ2luQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCckbG9nJywgJ2ZpcmViYXNlU2VydmljZSddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGxvZ2luQ29udHJvbGxlcigkc2NvcGUsICRsb2csIGZpcmViYXNlU2VydmljZSkge1xuXG5cdC8vZGVmaW5lIHZpZXcgbW9kZWwgdmFyaWFibGVcblx0dmFyIHZtID0gdGhpcztcblxuXHQvL2RlZmluZSB2aWV3IG1vZGVsIHZhcmlhYmxlc1xuXHR2bS5jcmVkZW50aWFscyA9IHtcblx0XHR1c2VybmFtZTogXCJcIixcblx0XHRwYXNzd29yZDogXCJcIlxuXHR9O1xuXG5cdHZtLmFjdGl2ZSA9IHtcblx0XHR1c2VybmFtZTogZmFsc2UsXG5cdFx0cGFzc3dvcmQ6IGZhbHNlXG5cdH07XG5cblx0Ly9kZWZpbmUgdmlldyBtb2RlbCBmdW5jdGlvbnNcblx0dm0uc3VibWl0Q3JlZHMgPSBmdW5jdGlvbih1c2VybmFtZSwgcGFzcykge1xuXHRcdFxuXHRcdGNvbnNvbGUubG9nKCdzdWJtaXRDcmVkcyBjbGlja2VkJyk7XG5cdFx0XG5cdFx0Ly9zdWJtaXQgY3JlZGVudGlhbHNcblx0XHRmaXJlYmFzZVNlcnZpY2UuYXV0aFVzZXIuZW1haWwodXNlcm5hbWUsIHBhc3MpLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyAocykge1xuXG5cdFx0XHRjb25zb2xlLmxvZygnd2FzIHN1Y2Nlc3MnLCBzKTtcblxuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblx0XHRcdGNvbnNvbGUubG9nKFwiRXJyb3I6XCIsIGUpO1xuXHRcdH0pO1xuXG5cdH07XG5cblx0JGxvZy5pbmZvKCdpbiB0aGUgbG9naW4gY29udHJvbGxlcicpO1x0Ly9UT0RPOiBUQUtFIFRISVMgT1VUIExBVEVSXG5cblx0Ly9kZWZpbmUgbG9jYWwgZnVuY3Rpb25zXG5cblx0Ly9ydW4gdGhlIHRlc3RcblxuXG59IiwiLypcbipcdENVU1RPTUVSIExJU1RcbipcbipcdFRoaXMgbW9kdWxlIGlzIGRlc2lnbmVkIHRvIFxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdjbmUnKVxuXHQuZGlyZWN0aXZlKCdjdXN0b21lckxpc3QnLCBjdXN0b21lckxpc3QpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGN1c3RvbWVyTGlzdCgpIHtcblx0Ly9kZWZpbmUgdGhlIGRpcmVjdGl2ZVxuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiBcIkFFQ01cIixcblx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvY3VzdG9tZXItbGlzdC5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7XG5cdFx0fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBjdXN0b21lckxpc3RDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7fVxuXG5cdGN1c3RvbWVyTGlzdENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnXTtcblx0XG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBjdXN0b21lckxpc3RDb250cm9sbGVyKCRzY29wZSwgJGxvZykge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdGNvbnNvbGUubG9nKCdpbiBjb3N0b21lciBMaXN0IGNvbnRyb2xsZXInKTtcblx0fVxuXG5cdC8vcGFzcyBpdCBiYWNrXG5cdHJldHVybiBkaXJlY3RpdmU7XG59IiwiLypcbipcdEZMQVZPUiBNSVhFUlxuKlxuKlx0VGhpcyBtb2R1bGUgaXMgZGVzaWduZWQgdG8gYWxsb3cgY3VzdG9tZXJzIHRvIG1peCBhbmQgbWF0Y2hcbipcdG91ciBkZWxpY2lvdXMgZmxhdm9ycyBhbmQgdG8gcGljayB0aGllciBzaXppbmcuXG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ2NuZScpXG5cdC5kaXJlY3RpdmUoJ2xvZ2luUGFzc3dvcmQnLCBsb2dpblBhc3N3b3JkKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBsb2dpblBhc3N3b3JkKCkge1xuXHQvL2RlZmluZSB0aGUgZGlyZWN0aXZlXG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6IFwiQUVDTVwiLFxuXHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZGlyZWN0aXZlcy9sb2dpbi1wYXNzd29yZC5kaXJlY3RpdmUuaHRtJyxcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7XG5cdFx0XHRwYXNzd29yZDogXCI9XCIsXG5cdFx0XHRhY3RpdmU6IFwiPVwiXG5cdFx0fSxcblx0XHRsaW5rOiBsaW5rRnVuYyxcblx0XHRjb250cm9sbGVyOiBsb2dpblBhc3N3b3JkQ29udHJvbGxlcixcblx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZVxuXHR9XG5cblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxpbmtGdW5jKHNjb3BlLCBlbCwgYXR0ciwgY3RybCkge31cblxuXHRsb2dpblBhc3N3b3JkQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZyddO1xuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbG9naW5QYXNzd29yZENvbnRyb2xsZXIoJHNjb3BlLCAkbG9nKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHR9XG5cblx0Ly9wYXNzIGl0IGJhY2tcblx0cmV0dXJuIGRpcmVjdGl2ZTtcbn0iLCIvKlxuKlx0RkxBVk9SIE1JWEVSXG4qXG4qXHRUaGlzIG1vZHVsZSBpcyBkZXNpZ25lZCB0byBhbGxvdyBjdXN0b21lcnMgdG8gbWl4IGFuZCBtYXRjaFxuKlx0b3VyIGRlbGljaW91cyBmbGF2b3JzIGFuZCB0byBwaWNrIHRoaWVyIHNpemluZy5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnY25lJylcblx0LmRpcmVjdGl2ZSgnbG9naW5Vc2VybmFtZScsIGxvZ2luVXNlcm5hbWUpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGxvZ2luVXNlcm5hbWUoKSB7XG5cdC8vZGVmaW5lIHRoZSBkaXJlY3RpdmVcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogXCJBRUNNXCIsXG5cdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL2xvZ2luLXVzZXJuYW1lLmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdHVzZXJuYW1lOiBcIj1cIixcblx0XHRcdGFjdGl2ZTogXCI9XCJcblx0XHR9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IGxvZ2luVXNlcm5hbWVDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7fVxuXG5cdGxvZ2luVXNlcm5hbWVDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJ107XG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsb2dpblVzZXJuYW1lQ29udHJvbGxlcigkc2NvcGUsICRsb2cpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdH1cblxuXHQvL3Bhc3MgaXQgYmFja1xuXHRyZXR1cm4gZGlyZWN0aXZlO1xufSIsIi8qXG4qXHRST1VURVMtQ09ORklHXG4qXG4qXHRUaGlzIG1vZHVsZSBzZXRzIHVwIGFsbCB0aGUgcmVxdWlyZWQgYW5ndWxhciByb3V0ZXMgZm9yIHRoaXMgd2ViIGFwcC5cbiovXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnY25lJylcbiAgICAuY29uZmlnKGNvbmZpZyk7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gY29uZmlnKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuXHQkbG9jYXRpb25Qcm92aWRlci5oYXNoUHJlZml4KCcnKTtcbiAgICAkcm91dGVQcm92aWRlclxuXHQvL1BVQkxJQyBST1VURVNcbiAgICAud2hlbignLycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9sYW5kaW5nUGFnZS5odG0nLCAgICAgIC8vJ3ZpZXdzL21haW5QYWdlLmh0bSdcbiAgICAgICAgY29udHJvbGxlcjogJ2xhbmRpbmdDb250cm9sbGVyJywgICAgICAgICAgIC8vJ21haW5Db250cm9sbGVyJ1xuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvY3VzdG9tZXJzJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2N1c3RvbWVyc1BhZ2UuaHRtJywgICAgICAvLyd2aWV3cy9tYWluUGFnZS5odG0nXG4gICAgICAgIGNvbnRyb2xsZXI6ICdjdXN0b21lcnNDb250cm9sbGVyJywgICAgICAgICAgIC8vJ21haW5Db250cm9sbGVyJ1xuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IHsgLyogQG5nSW5qZWN0ICovXG4gICAgICAgICAgICBjdXN0b21lckxpc3Q6IGN1c3RvbWVyTGlzdFxuICAgICAgICB9XG4gICAgfSlcbiAgICAud2hlbignL2xvZ2luJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2xvZ2luUGFnZS5odG0nLCAgICAgIC8vJ3ZpZXdzL21haW5QYWdlLmh0bSdcbiAgICAgICAgY29udHJvbGxlcjogJ2xvZ2luQ29udHJvbGxlcicsICAgICAgICAgICAvLydtYWluQ29udHJvbGxlcidcbiAgICAgICAgY29udHJvbGxlckFzOiAndm0nXG4gICAgfSlcblx0Lm90aGVyd2lzZSh7XG4gICAgICAgIHJlZGlyZWN0VG86ICcvJ1xuICAgIH0pO1xufVxuXG4vKlxuKiAgIFJFUVVJUkVEIEZVTkNUSU9OU1xuKlxuKi9cblxuLy8gIENVU1RPTUVSUyBMSVNUXG5mdW5jdGlvbiBjdXN0b21lckxpc3QoKSB7XG4gICAgXG4gICAgLy9yZXR1cm4gdGhlIHByb21pc2VcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIC8vaGl0IHRoZSBzZXJ2ZXIgZm9yIHRoZSBcbiAgICAgICAgcmVzb2x2ZSgnZ29vZCB0ZXN0Jyk7XG4gICAgfSk7XG5cbn07XG5cbiIsIi8qXG4qXG4qXG4qL1xuXG4vL2RlZmluZSBtb2R1bGVcbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdjbmUnKVxuICAgIC5mYWN0b3J5KCdmaXJlYmFzZVNlcnZpY2UnLCBmaXJlYmFzZVNlcnZpY2UpO1xuXG4vL2RlcGVuZGVuY3kgaW5qZWN0aW9uc1xuZmlyZWJhc2VTZXJ2aWNlLiRpbmplY3QgPSBbJyRmaXJlYmFzZScsICckZmlyZWJhc2VPYmplY3QnLCAnJGZpcmViYXNlQXJyYXknXTtcblxuLy9kZWNsYXJlIHRoZSBzZXJ2aWNlXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGZpcmViYXNlU2VydmljZSgkZmlyZWJhc2UsICRmaXJlYmFzZU9iamVjdCwgJGZpcmViYXNlQXJyYXkpIHtcblxuXHQvL2RlZmluZSBtZXRob2RzXG5cdHZhciBGQlNlcnZpY2UgPSB7XG5cdFx0Z2V0OiB7XG5cdFx0XHRjdXN0b21lcl9saXN0OiBnZXRfY3VzdG9tZXJfbGlzdFxuXHRcdH0sXG5cdFx0YXV0aFVzZXI6IHtcblx0XHRcdGVtYWlsOiBhdXRoVXNlcl9lbWFpbFxuXHRcdH0sXG5cdFx0dGVzdDogdGVzdFxuXHR9O1xuXG5cdC8vXHRBVVRIRU5USUNBVEUgVVNFUlxuXHRmdW5jdGlvbiBhdXRoVXNlcl9lbWFpbChlbWFpbCwgcGFzc3dvcmQpIHtcblx0XHRcblx0XHRjb25zb2xlLmxvZygnYXV0aGVudGljYXRpbmcgdXNlcicpXG5cblx0XHQvL3JldHVybiBhc3luYyB3b3JrXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblxuXHRcdFx0ZmlyZWJhc2UuYXV0aCgpLnNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCkudGhlbihmdW5jdGlvbiBzdWNlc3Mocykge1xuXG5cdFx0XHRcdHJlc29sdmUocyk7XG5cblx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdC8vIEhhbmRsZSBFcnJvcnMgaGVyZS5cblx0XHRcdFx0dmFyIGVycm9yQ29kZSA9IGVycm9yLmNvZGU7XG5cdFx0XHRcdHZhciBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuXHRcdFx0XHRyZWplY3Qoe2NvZGU6IGVycm9yQ29kZSAsIG1lc3NhZ2U6IGVycm9yTWVzc2FnZX0pO1xuXG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHR9O1xuXG5cdC8vXHRHRVQgQ1VTVE9NRVIgTElTVFxuXHRmdW5jdGlvbiBnZXRfY3VzdG9tZXJfbGlzdCgpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblxuXHRcdC8vY29uc29sZS5sb2coJ2dldHRpbmcgY3VzdG9tZXIgbGlzdCcpO1xuXG5cdFx0Ly9yZXR1cm4gYXN5bmMgd29ya1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgICBcblx0ICAgICAgICAvL3ZhciB0ZXN0ID0gXG5cblx0ICAgICAgICAvL2hpdCB0aGUgc2VydmVyIGZvciB0aGUgXG5cdCAgICAgICAgcmVzb2x2ZShbXCJvbmVcIiwgXCJ0d29cIiwgJ3RocmVlJ10pO1xuXG5cdCAgICB9KTtcblx0fVxuXG5cdC8vXHRURVNUIEZVTkNUSU9OXG5cdGZ1bmN0aW9uIHRlc3QoKSB7IHJldHVybignZ29vZCB0ZXN0IGZyb20gRkIgU2VydmljZScpOyB9O1xuXG5cdC8vdHVybiB0aGUgbWV0aG9kXG4gICAgcmV0dXJuIEZCU2VydmljZTtcdFxufTtcblxuIl19
