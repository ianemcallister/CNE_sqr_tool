config.$inject=["$routeProvider","$locationProvider"];var ahNuts=angular.module("cne",["ngRoute","firebase","ngSanitize"]);function customersController(e,t,o,s,r,n,l){var c=this;c.customerList=l(firebase.database().ref().child("customers")),c.customerSalesDays=[],c.selectedCustomer={seasons:{2018:{id:2018}}},c.testList=["a","b","c"],c.state={selected:{customer:{$index:"",$id:""}}},t.info("in the customers controller"),c.selectCustomer=function(e){c.state.selected.customer.$index=e,c.state.selected.customer.$id=c.customerList[e].$id,c.selectedCustomer=n(firebase.database().ref().child("customers").child(c.customerList[e].$id)),c.customerSalesDays=c.selectedCustomer.sales_days},c.updateCustomer=function(){c.selectedCustomer.$save().then(function(e){console.log("updated record successfully")}).catch(function(e){console.log("error updating record",e)})},c.changeRecord=function(e){c.state.selected.customer.$index;switch({prev:0,next:1}[e]){case 0:c.selectCustomer(c.state.selected.customer.$index-1);break;case 1:c.selectCustomer(c.state.selected.customer.$index+1)}},c.generate_bulk_salesdays=function(){console.log("generating bulk salesdays",c.selectedCustomer.sales_days)}}function landingController(e,t){t.info("in the landing controller")}function loginController(e,t,o){var s=this;s.credentials={username:"",password:""},s.active={username:!1,password:!1},s.submitCreds=function(e,t){console.log("submitCreds clicked"),o.authUser.email(e,t).then(function(e){console.log("was success",e)}).catch(function(e){console.log("Error:",e)})},t.info("in the login controller")}function salesDaysController(e,t,o,s,r){var n=this;n.salesdaysList=s(firebase.database().ref().child("sales_days")),n.selectedRecord={id:"2039752"},n.testCustomers=["Beaverton","Orenco"],n.testSeasons=["2018","2017"],n.testTimes=["9:00 AM","9:15 AM","9:30 AM","9:45 AM"],n.scheduling_params={customer:"",season:"",bookend_dates:{first:"",last:""},repeats:"",event_days:{mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1,sun:!1},same_day_load_in_out:!0,schedule:{load_in:"",load_out:"",open:"",close:"",sales_start:"",sales_end:""}},t.info("in the sales days controller",(new Date).toISOString()),n.updateRecord=function(e){console.log("got this id",e)},n.addSalesDay=function(){n.salesdaysList.$add({date:(new Date).toISOString(),schedule:{load_in:{datetime:"",sales_day_id:""},load_out:{datetime:"",sales_day_id:""},open:"",close:"",sales_start:"",sales_end:""},customer:"",season:{name:"",frequency:"",instance:0,total:0}}).then(function(e){console.log(e.key),n.selectedRecord=r(firebase.database().ref().child("sales_days").child(e.key)),console.log(n.selectedRecord)}).catch(function(e){console.log("error",e)})},n.generateSalesDays=function(){console.log("generating Sales days",n.scheduling_params)}}function firebaseService(e,t,o){return{get:{customer_list:function(){return new Promise(function(e,t){e(["one","two","three"])})}},authUser:{email:function(e,o){return console.log("authenticating user"),new Promise(function(t,s){firebase.auth().signInWithEmailAndPassword(e,o).then(function(e){t(e)}).catch(function(e){var t=e.code,o=e.message;s({code:t,message:o})})})}},test:function(){return"good test from FB Service"}}}function customerList(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/customer-list.directive.htm",replace:!0,scope:{},link:t,controller:o,controllerAs:"vm",bindToController:!0};function t(e,t,o,s){}function o(e,t){console.log("in costomer List controller")}return o.$inject=["$scope","$log"],e}function loginPassword(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/login-password.directive.htm",replace:!0,scope:{password:"=",active:"="},link:t,controller:o,controllerAs:"vm",bindToController:!0};function t(e,t,o,s){}function o(e,t){}return o.$inject=["$scope","$log"],e}function loginUsername(){t.$inject=["scope","el","attr","ctrl"];var e={restrict:"AECM",templateUrl:"views/directives/login-username.directive.htm",replace:!0,scope:{username:"=",active:"="},link:t,controller:o,controllerAs:"vm",bindToController:!0};function t(e,t,o,s){}function o(e,t){}return o.$inject=["$scope","$log"],e}function config(e,t){t.hashPrefix(""),e.when("/",{templateUrl:"views/landingPage.htm",controller:"landingController",controllerAs:"vm"}).when("/customers",{templateUrl:"views/customersPage.htm",controller:"customersController",controllerAs:"vm",resolve:{customerList:customerList}}).when("/salesdays",{templateUrl:"views/salesDaysPage.htm",controller:"salesDaysController",controllerAs:"vm"}).when("/login",{templateUrl:"views/loginPage.htm",controller:"loginController",controllerAs:"vm"}).otherwise({redirectTo:"/"})}function customerList(){return new Promise(function(e,t){e("good test")})}angular.module("cne").controller("customersController",customersController),customersController.$inject=["$scope","$log","customerList","firebaseService","$firebase","$firebaseObject","$firebaseArray"],angular.module("cne").controller("landingController",landingController),landingController.$inject=["$scope","$log"],angular.module("cne").controller("loginController",loginController),loginController.$inject=["$scope","$log","firebaseService"],angular.module("cne").controller("salesDaysController",salesDaysController),salesDaysController.$inject=["$scope","$log","$firebase","$firebaseArray","$firebaseObject"],angular.module("cne").factory("firebaseService",firebaseService),firebaseService.$inject=["$firebase","$firebaseObject","$firebaseArray"],angular.module("cne").directive("customerList",customerList),angular.module("cne").directive("loginPassword",loginPassword),angular.module("cne").directive("loginUsername",loginUsername),angular.module("cne").config(config);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMvd2ViYXBwLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9jdXN0b21lcnMtY29udHJvbGxlci5qcyIsInNjcmlwdHMvY29udHJvbGxlcnMvbGFuZGluZy1jb250cm9sbGVyLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9sb2dpbi1jb250cm9sbGVyLmpzIiwic2NyaXB0cy9jb250cm9sbGVycy9zYWxlc2RheXMtY29udHJvbGxlci5qcyIsInNjcmlwdHMvZmFjdG9yaWVzL2ZpcmViYXNlLnNlcnZpY2UuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvY3VzdG9tZXItbGlzdC5qcyIsInNjcmlwdHMvZGlyZWN0aXZlcy9sb2dpbi1wYXNzd29yZC5kaXJlY3RpdmUuanMiLCJzY3JpcHRzL2RpcmVjdGl2ZXMvbG9naW4tdXNlcm5hbWUuZGlyZWN0aXZlLmpzIiwic2NyaXB0cy9yb3V0ZXMvcm91dGVzLWNvbmZpZy5qcyJdLCJuYW1lcyI6WyJhaE51dHMiLCJhbmd1bGFyIiwibW9kdWxlIiwiY3VzdG9tZXJzQ29udHJvbGxlciIsIiRzY29wZSIsIiRsb2ciLCJjdXN0b21lckxpc3QiLCJmaXJlYmFzZVNlcnZpY2UiLCIkZmlyZWJhc2UiLCIkZmlyZWJhc2VPYmplY3QiLCIkZmlyZWJhc2VBcnJheSIsInZtIiwidGhpcyIsImZpcmViYXNlIiwiZGF0YWJhc2UiLCJyZWYiLCJjaGlsZCIsImN1c3RvbWVyU2FsZXNEYXlzIiwic2VsZWN0ZWRDdXN0b21lciIsInNlYXNvbnMiLCIyMDE4IiwiaWQiLCJ0ZXN0TGlzdCIsInN0YXRlIiwic2VsZWN0ZWQiLCJjdXN0b21lciIsIiRpbmRleCIsIiRpZCIsImluZm8iLCJzZWxlY3RDdXN0b21lciIsImluZGV4X2lkIiwic2FsZXNfZGF5cyIsInVwZGF0ZUN1c3RvbWVyIiwiJHNhdmUiLCJ0aGVuIiwicyIsImNvbnNvbGUiLCJsb2ciLCJjYXRjaCIsImUiLCJjaGFuZ2VSZWNvcmQiLCJzZWxlY3QiLCJwcmV2IiwibmV4dCIsImdlbmVyYXRlX2J1bGtfc2FsZXNkYXlzIiwibGFuZGluZ0NvbnRyb2xsZXIiLCJsb2dpbkNvbnRyb2xsZXIiLCJjcmVkZW50aWFscyIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJhY3RpdmUiLCJzdWJtaXRDcmVkcyIsInBhc3MiLCJhdXRoVXNlciIsImVtYWlsIiwic2FsZXNEYXlzQ29udHJvbGxlciIsInNhbGVzZGF5c0xpc3QiLCJzZWxlY3RlZFJlY29yZCIsInRlc3RDdXN0b21lcnMiLCJ0ZXN0U2Vhc29ucyIsInRlc3RUaW1lcyIsInNjaGVkdWxpbmdfcGFyYW1zIiwic2Vhc29uIiwiYm9va2VuZF9kYXRlcyIsImZpcnN0IiwibGFzdCIsInJlcGVhdHMiLCJldmVudF9kYXlzIiwibW9uIiwidHVlIiwid2VkIiwidGh1IiwiZnJpIiwic2F0Iiwic3VuIiwic2FtZV9kYXlfbG9hZF9pbl9vdXQiLCJzY2hlZHVsZSIsImxvYWRfaW4iLCJsb2FkX291dCIsIm9wZW4iLCJjbG9zZSIsInNhbGVzX3N0YXJ0Iiwic2FsZXNfZW5kIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidXBkYXRlUmVjb3JkIiwicmVjb3JkX2lkIiwiYWRkU2FsZXNEYXkiLCIkYWRkIiwiZGF0ZSIsImRhdGV0aW1lIiwic2FsZXNfZGF5X2lkIiwibmFtZSIsImZyZXF1ZW5jeSIsImluc3RhbmNlIiwidG90YWwiLCJrZXkiLCJnZW5lcmF0ZVNhbGVzRGF5cyIsImdldCIsImN1c3RvbWVyX2xpc3QiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImF1dGgiLCJzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCIsImVycm9yIiwiZXJyb3JDb2RlIiwiY29kZSIsImVycm9yTWVzc2FnZSIsIm1lc3NhZ2UiLCJ0ZXN0IiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJ0ZW1wbGF0ZVVybCIsInJlcGxhY2UiLCJzY29wZSIsImxpbmsiLCJsaW5rRnVuYyIsImNvbnRyb2xsZXIiLCJjdXN0b21lckxpc3RDb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwiYmluZFRvQ29udHJvbGxlciIsImVsIiwiYXR0ciIsImN0cmwiLCIkaW5qZWN0IiwibG9naW5QYXNzd29yZCIsImxvZ2luUGFzc3dvcmRDb250cm9sbGVyIiwibG9naW5Vc2VybmFtZSIsImxvZ2luVXNlcm5hbWVDb250cm9sbGVyIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsImhhc2hQcmVmaXgiLCJ3aGVuIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImZhY3RvcnkiXSwibWFwcGluZ3MiOiJzREFDQSxJQUFBQSxPQUFBQyxRQUFBQyxPQUFBLE1BQUEsQ0FBQSxVQUFBLFdBQUEsZUNNQSxTQUFBQyxvQkFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FHQSxJQUFBQyxFQUFBQyxLQUNBRCxFQUFBTCxhQUFBSSxFQUFBRyxTQUFBQyxXQUFBQyxNQUFBQyxNQUFBLGNBQ0FMLEVBQUFNLGtCQUFBLEdBQ0FOLEVBQUFPLGlCQUFBLENBQUFDLFFBQUEsQ0FBQUMsS0FBQSxDQUFBQyxHQUFBLFFBQ0FWLEVBQUFXLFNBQUEsQ0FBQSxJQUFBLElBQUEsS0FDQVgsRUFBQVksTUFBQSxDQUNBQyxTQUFBLENBQ0FDLFNBQUEsQ0FDQUMsT0FBQSxHQUNBQyxJQUFBLE1BT0F0QixFQUFBdUIsS0FBQSwrQkFxQ0FqQixFQUFBa0IsZUFBQSxTQUFBQyxHQUVBbkIsRUFBQVksTUFBQUMsU0FBQUMsU0FBQUMsT0FBQUksRUFDQW5CLEVBQUFZLE1BQUFDLFNBQUFDLFNBQUFFLElBQUFoQixFQUFBTCxhQUFBd0IsR0FBQUgsSUFDQWhCLEVBQUFPLGlCQUFBVCxFQUFBSSxTQUFBQyxXQUFBQyxNQUFBQyxNQUFBLGFBQUFBLE1BQUFMLEVBQUFMLGFBQUF3QixHQUFBSCxNQUNBaEIsRUFBQU0sa0JBQUFOLEVBQUFPLGlCQUFBYSxZQUlBcEIsRUFBQXFCLGVBQUEsV0FDQXJCLEVBQUFPLGlCQUFBZSxRQUFBQyxLQUFBLFNBQUFDLEdBQ0FDLFFB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QUNBdUksUUFBQSxrQkFBQWxJLGlCQUdBQSxnQkFBQXNILFFBQUEsQ0FBQSxZQUFBLGtCQUFBLGtCQ0xBNUgsUUFDQUMsT0FBQSxPQUNBNkcsVUFBQSxlQUFBekcsY0NEQUwsUUFDQUMsT0FBQSxPQUNBNkcsVUFBQSxnQkFBQWUsZUNGQTdILFFBQ0FDLE9BQUEsT0FDQTZHLFVBQUEsZ0JBQUFpQixlQ0pBL0gsUUFDQUMsT0FBQSxPQUNBZ0ksT0FBQUEiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gTU9EVUxFXG52YXIgYWhOdXRzID0gYW5ndWxhci5tb2R1bGUoJ2NuZScsIFsnbmdSb3V0ZScsICdmaXJlYmFzZScsICduZ1Nhbml0aXplJ10pO1xuIiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ2NuZScpXG4gICAgLmNvbnRyb2xsZXIoJ2N1c3RvbWVyc0NvbnRyb2xsZXInLCBjdXN0b21lcnNDb250cm9sbGVyKTtcblxuY3VzdG9tZXJzQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCckbG9nJywgJ2N1c3RvbWVyTGlzdCcsICdmaXJlYmFzZVNlcnZpY2UnLCAnJGZpcmViYXNlJywgJyRmaXJlYmFzZU9iamVjdCcsICckZmlyZWJhc2VBcnJheSddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGN1c3RvbWVyc0NvbnRyb2xsZXIoJHNjb3BlLCAkbG9nLCBjdXN0b21lckxpc3QsIGZpcmViYXNlU2VydmljZSwgJGZpcmViYXNlLCAkZmlyZWJhc2VPYmplY3QsICRmaXJlYmFzZUFycmF5KSB7XG5cblx0Ly9kZWZpbmUgdmlldyBtb2RlbCB2YXJpYWJsZVxuXHR2YXIgdm0gPSB0aGlzO1xuXHR2bS5jdXN0b21lckxpc3QgPSAkZmlyZWJhc2VBcnJheShmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigpLmNoaWxkKCdjdXN0b21lcnMnKSk7XG5cdHZtLmN1c3RvbWVyU2FsZXNEYXlzID0gW107XG5cdHZtLnNlbGVjdGVkQ3VzdG9tZXIgPSB7IHNlYXNvbnM6IHsgXCIyMDE4XCI6IHsgaWQ6IDIwMTh9IH0gfTtcblx0dm0udGVzdExpc3QgPSBbJ2EnLCAnYicsICdjJ107IC8vJGZpcmViYXNlQXJyYXkoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZCgnY3VzdG9tZXJzJykuY2hpbGQoJ2N1c3RvbWVyX2xpc3QnKSk7XG5cdHZtLnN0YXRlID0ge1xuXHRcdHNlbGVjdGVkOiB7XG5cdFx0XHRjdXN0b21lcjoge1xuXHRcdFx0XHQkaW5kZXg6IFwiXCIsXG5cdFx0XHRcdCRpZDogXCJcIixcblxuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHQvL2lkZW50aWZ5IHdoZXJlIHdlIGFyZVxuXHQkbG9nLmluZm8oJ2luIHRoZSBjdXN0b21lcnMgY29udHJvbGxlcicpO1x0Ly9UT0RPOiBUQUtFIFRISVMgT1VUIExBVEVSXG5cdFxuXG5cdC8qXG5cdCpcdExPQ0FMIEZVTkNUSU9OUyBHTyBIRVJFXG5cdCpcblx0Ki9cblxuXHQvL1x0TE9BRCBDVVNUT01FUiBMSVNUXG5cdGZ1bmN0aW9uIGxvYWRfY3VzdG9tZXJfbGlzdCgpIHtcblx0XHRcblx0XHQvL3RyYWNrIHN0YXJ0aW5nIGZ1bmN0aW9uXG5cdFx0Ly9jb25zb2xlLmxvZygnbG9hZGluZyB0aGUgY3VzdG9tZXIgbGlzdCcpO1xuXHRcdFxuXHRcdC8vZ2F0aGVyIHRoZSBkYXRhXG5cdFx0ZmlyZWJhc2VTZXJ2aWNlLmdldC5jdXN0b21lcl9saXN0KCkudGhlbihmdW5jdGlvbiBzdWNjZXNzKHMpIHtcblx0XHRcdFxuXHRcdFx0Ly9jb25zb2xlLmxvZygnZ290IHRoaXMgcmVzcG9ucycsIHMpO1xuXHRcdFx0XG5cdFx0XHQvL3doZW4gdGhlIGxpc3QgaGFzIGJlZW4gbG9hZGVkIHVwZGF0ZSB0aGUgdmFyaWFibGVzXG5cdFx0XHQvL3ZtLmN1c3RvbWVyTGlzdCA9IHM7XG5cdFx0XHR2bS5jdXN0b21lckxpc3QgPSAkZmlyZWJhc2VBcnJheShmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigpLmNoaWxkKCdjdXN0b21lcnMnKS5jaGlsZCgnY3VzdG9tZXJfbGlzdCcpKTtcblxuXHRcdFx0Ly9yZWZsZWN0IHRoZSBjaGFuZ2VzXG5cdFx0XHQkc2NvcGUuJGFwcGx5KCk7XG5cblx0XHR9KS5jYXRjaChmdW5jdGlvbiBlcnJvcihlKSB7XG5cdFx0XHQvL2lmIHRoZXJlIHdhcyBhbiBlcnJvciB0aHJvdyB0aGUgZXJyb3Jcblx0XHRcdGNvbnNvbGUubG9nKCdlcnJvcicpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdC8qXG5cdCpcdFZJRVcgTU9ERUwgRlVOQ1RJT05TIEdPIEhFUkVcblx0KlxuXHQqL1x0XG5cdC8vXHRTRUxFQ1QgQ0xJQ0tFRCBDVVNUT01FUlxuXHR2bS5zZWxlY3RDdXN0b21lciA9IGZ1bmN0aW9uKGluZGV4X2lkKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dm0uc3RhdGUuc2VsZWN0ZWQuY3VzdG9tZXIuJGluZGV4ID0gaW5kZXhfaWQ7XG5cdFx0dm0uc3RhdGUuc2VsZWN0ZWQuY3VzdG9tZXIuJGlkID0gdm0uY3VzdG9tZXJMaXN0W2luZGV4X2lkXS4kaWQ7XG5cdFx0dm0uc2VsZWN0ZWRDdXN0b21lciA9ICRmaXJlYmFzZU9iamVjdChmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigpLmNoaWxkKCdjdXN0b21lcnMnKS5jaGlsZCh2bS5jdXN0b21lckxpc3RbaW5kZXhfaWRdLiRpZCkpO1xuXHRcdHZtLmN1c3RvbWVyU2FsZXNEYXlzID0gdm0uc2VsZWN0ZWRDdXN0b21lci5zYWxlc19kYXlzO1xuXHR9O1xuXG5cdC8vXHRVUERBVEUgVEhFIENVU1RPTUVSIFJFQ09SRFxuXHR2bS51cGRhdGVDdXN0b21lciA9IGZ1bmN0aW9uKCkge1xuXHRcdHZtLnNlbGVjdGVkQ3VzdG9tZXIuJHNhdmUoKS50aGVuKGZ1bmN0aW9uIHN1Y2NlcyhzKSB7XG5cdFx0XHRjb25zb2xlLmxvZygndXBkYXRlZCByZWNvcmQgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xuXHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yIHVwZGF0aW5nIHJlY29yZCcsIGUpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdC8vXHRNT1ZFIFRPIFRIRSBORVhUIENVU1RPTUVSXG5cdHZtLmNoYW5nZVJlY29yZCA9IGZ1bmN0aW9uKHNlbGVjdCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBvcHRuID0geyBcInByZXZcIjogMCwgXCJuZXh0XCI6IDEgfTtcblx0XHR2YXIgaW5kZXhfaWQgPSB2bS5zdGF0ZS5zZWxlY3RlZC5jdXN0b21lci4kaW5kZXg7XG5cblx0XHQvL2NvbnNvbGUubG9nKGluZGV4X2lkKTtcblxuXHRcdHN3aXRjaChvcHRuW3NlbGVjdF0pIHtcblx0XHRcdGNhc2UgMDpcblx0XHRcdFx0Ly9jb25zb2xlLmxvZygncHJldmlvdXMgcmVjb3JkJyk7XG5cdFx0XHRcdHZtLnNlbGVjdEN1c3RvbWVyKHZtLnN0YXRlLnNlbGVjdGVkLmN1c3RvbWVyLiRpbmRleCAtIDEpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgMTpcblx0XHRcdFx0Ly9jb25zb2xlLmxvZygnbmV4dCByZWNvcmQnKTtcblx0XHRcdFx0dm0uc2VsZWN0Q3VzdG9tZXIodm0uc3RhdGUuc2VsZWN0ZWQuY3VzdG9tZXIuJGluZGV4ICsgMSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9O1xuXG5cdC8vXHRHRU5FUkFURSBCVUxLIFNBTEVTIERBWVNcblx0dm0uZ2VuZXJhdGVfYnVsa19zYWxlc2RheXMgPSBmdW5jdGlvbigpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHRjb25zb2xlLmxvZygnZ2VuZXJhdGluZyBidWxrIHNhbGVzZGF5cycsIHZtLnNlbGVjdGVkQ3VzdG9tZXIuc2FsZXNfZGF5cyk7XG5cdFx0XG5cdFx0LyppZih2bS5zZWxlY3RlZEN1c3RvbWVyLnNhbGVzX2RheXNbMF0gPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnc2FsZXMgZGF5cyB1bmRlZmluZWQnKVxuXHRcdFx0dm0uc2VsZWN0ZWRDdXN0b21lci5zYWxlc19kYXlzWzBdID0gXCJhb2lzZ29pMjNvYnNvYjIzb2loc3NcIlxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLmxvZygnc2FsZXMgZGF5cyBkZWZpbmVkJyk7XG5cdFx0XHR2YXIgbGFzdGtleSA9IDA7XG5cdFx0XHRPYmplY3Qua2V5cyh2bS5zZWxlY3RlZEN1c3RvbWVyLnNhbGVzX2RheXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRcdFx0XHRpZihrZXkgIT0gJ3BsYWNlaG9sZGVyJykgbGFzdGtleSA9IHBhcnNlSW50KGtleSk7XG5cdFx0XHR9KTtcblx0XHRcdHZtLnNlbGVjdGVkQ3VzdG9tZXIuc2FsZXNfZGF5c1tsYXN0a2V5ICsgMV0gPSBcImFvc2lnaGFvaXNoZ2lvaHNnXCJcblx0XHR9XG5cblx0XHQvL3NhdmUgdmFsdWVzXG5cdFx0dm0udXBkYXRlQ3VzdG9tZXIoKTsqL1xuXHR9O1xuXG5cdC8vcnVuIHRoZSB0ZXN0XG5cblx0Ly9vbiBwYWdlIGxvYWRcblx0Ly9sb2FkX2N1c3RvbWVyX2xpc3QoKTtcblxuXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ2NuZScpXG4gICAgLmNvbnRyb2xsZXIoJ2xhbmRpbmdDb250cm9sbGVyJywgbGFuZGluZ0NvbnRyb2xsZXIpO1xuXG5sYW5kaW5nQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCckbG9nJ107XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gbGFuZGluZ0NvbnRyb2xsZXIoJHNjb3BlLCAkbG9nKSB7XG5cblx0Ly9kZWZpbmUgdmlldyBtb2RlbCB2YXJpYWJsZVxuXHR2YXIgdm0gPSB0aGlzO1xuXG5cdCRsb2cuaW5mbygnaW4gdGhlIGxhbmRpbmcgY29udHJvbGxlcicpO1x0Ly9UT0RPOiBUQUtFIFRISVMgT1VUIExBVEVSXG5cblx0Ly9kZWZpbmUgbG9jYWwgZnVuY3Rpb25zXG5cblx0Ly9ydW4gdGhlIHRlc3RcblxuXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ2NuZScpXG4gICAgLmNvbnRyb2xsZXIoJ2xvZ2luQ29udHJvbGxlcicsIGxvZ2luQ29udHJvbGxlcik7XG5cbmxvZ2luQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCckbG9nJywgJ2ZpcmViYXNlU2VydmljZSddO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGxvZ2luQ29udHJvbGxlcigkc2NvcGUsICRsb2csIGZpcmViYXNlU2VydmljZSkge1xuXG5cdC8vZGVmaW5lIHZpZXcgbW9kZWwgdmFyaWFibGVcblx0dmFyIHZtID0gdGhpcztcblxuXHQvL2RlZmluZSB2aWV3IG1vZGVsIHZhcmlhYmxlc1xuXHR2bS5jcmVkZW50aWFscyA9IHtcblx0XHR1c2VybmFtZTogXCJcIixcblx0XHRwYXNzd29yZDogXCJcIlxuXHR9O1xuXG5cdHZtLmFjdGl2ZSA9IHtcblx0XHR1c2VybmFtZTogZmFsc2UsXG5cdFx0cGFzc3dvcmQ6IGZhbHNlXG5cdH07XG5cblx0Ly9kZWZpbmUgdmlldyBtb2RlbCBmdW5jdGlvbnNcblx0dm0uc3VibWl0Q3JlZHMgPSBmdW5jdGlvbih1c2VybmFtZSwgcGFzcykge1xuXHRcdFxuXHRcdGNvbnNvbGUubG9nKCdzdWJtaXRDcmVkcyBjbGlja2VkJyk7XG5cdFx0XG5cdFx0Ly9zdWJtaXQgY3JlZGVudGlhbHNcblx0XHRmaXJlYmFzZVNlcnZpY2UuYXV0aFVzZXIuZW1haWwodXNlcm5hbWUsIHBhc3MpLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyAocykge1xuXG5cdFx0XHRjb25zb2xlLmxvZygnd2FzIHN1Y2Nlc3MnLCBzKTtcblxuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblx0XHRcdGNvbnNvbGUubG9nKFwiRXJyb3I6XCIsIGUpO1xuXHRcdH0pO1xuXG5cdH07XG5cblx0JGxvZy5pbmZvKCdpbiB0aGUgbG9naW4gY29udHJvbGxlcicpO1x0Ly9UT0RPOiBUQUtFIFRISVMgT1VUIExBVEVSXG5cblx0Ly9kZWZpbmUgbG9jYWwgZnVuY3Rpb25zXG5cblx0Ly9ydW4gdGhlIHRlc3RcblxuXG59IiwiYW5ndWxhclxuICAgIC5tb2R1bGUoJ2NuZScpXG4gICAgLmNvbnRyb2xsZXIoJ3NhbGVzRGF5c0NvbnRyb2xsZXInLCBzYWxlc0RheXNDb250cm9sbGVyKTtcblxuc2FsZXNEYXlzQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCckbG9nJywgJyRmaXJlYmFzZScsICckZmlyZWJhc2VBcnJheScsICckZmlyZWJhc2VPYmplY3QnXTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBzYWxlc0RheXNDb250cm9sbGVyKCRzY29wZSwgJGxvZywgJGZpcmViYXNlLCAkZmlyZWJhc2VBcnJheSwgJGZpcmViYXNlT2JqZWN0KSB7XG5cblx0Ly9kZWZpbmUgdmlldyBtb2RlbCB2YXJpYWJsZVxuXHR2YXIgdm0gPSB0aGlzO1xuXHR2bS5zYWxlc2RheXNMaXN0ID0gJGZpcmViYXNlQXJyYXkoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZCgnc2FsZXNfZGF5cycpKTtcblx0dm0uc2VsZWN0ZWRSZWNvcmQgPSB7IGlkOiBcIjIwMzk3NTJcIiB9O1xuXHR2bS50ZXN0Q3VzdG9tZXJzID0gWyBcIkJlYXZlcnRvblwiLCBcIk9yZW5jb1wiIF07XG5cdHZtLnRlc3RTZWFzb25zID0gWyAnMjAxOCcsICcyMDE3JyBdO1xuXHQvL3ZtLnJlcGVhdHMgPSBbICduZXZlcicsIFwiZXZlcnkgd2Vla1wiLCBcImV2ZXJ5IDIgd2Vla3NcIiwgXCJldmVyeSAzIHdlZWtzXCIsIFwiZXZlcnlfNF93ZWVrc1wiLCBcImV2ZXJ5XzVfd2Vla3NcIiwgXCJldmVyeV82X3dlZWtzXCIsIFwiZXZlcnlfN193ZWVrc1wiLCBcImV2ZXJ5Xzhfd2Vla3NcIiBdO1xuXHR2bS50ZXN0VGltZXMgPSBbICc5OjAwIEFNJywnOToxNSBBTScsJzk6MzAgQU0nLCc5OjQ1IEFNJyAgXTtcblx0dm0uc2NoZWR1bGluZ19wYXJhbXMgPSB7XG5cdFx0Y3VzdG9tZXI6IFwiXCIsXG5cdFx0c2Vhc29uOiBcIlwiLFxuXHRcdGJvb2tlbmRfZGF0ZXM6IHtcblx0XHRcdGZpcnN0OiBcIlwiLFxuXHRcdFx0bGFzdDogXCJcIlxuXHRcdH0sXG5cdFx0cmVwZWF0czogXCJcIixcblx0XHRldmVudF9kYXlzOiB7XG5cdFx0XHRtb246IGZhbHNlLFxuXHRcdFx0dHVlOiBmYWxzZSxcblx0XHRcdHdlZDogZmFsc2UsXG5cdFx0XHR0aHU6IGZhbHNlLFxuXHRcdFx0ZnJpOiBmYWxzZSxcblx0XHRcdHNhdDogZmFsc2UsXG5cdFx0XHRcInN1blwiOiBmYWxzZVxuXHRcdH0sXG5cdFx0c2FtZV9kYXlfbG9hZF9pbl9vdXQ6IHRydWUsXG5cdFx0c2NoZWR1bGU6IHtcblx0XHRcdGxvYWRfaW46IFwiXCIsXG5cdFx0XHRsb2FkX291dDogXCJcIixcblx0XHRcdG9wZW46IFwiXCIsXG5cdFx0XHRjbG9zZTogXCJcIixcblx0XHRcdHNhbGVzX3N0YXJ0OiBcIlwiLFxuXHRcdFx0c2FsZXNfZW5kOiBcIlwiXG5cdFx0fVxuXHR9XG5cblx0Ly9pZGVudGlmeSBjb250cm9sbGVyXG5cdCRsb2cuaW5mbygnaW4gdGhlIHNhbGVzIGRheXMgY29udHJvbGxlcicsIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSk7XHQvL1RPRE86IFRBS0UgVEhJUyBPVVQgTEFURVJcblxuXHQvL2RlZmluZSBsb2NhbCBmdW5jdGlvbnNcblxuXHQvKlxuXHQqXHRWSUVXIE1PREVMIEZVTkNUSU9OUyBHTyBIRVJFXG5cdCpcblx0Ki9cblx0Ly9cdFVQREFURSBSRUNPUkRcblx0dm0udXBkYXRlUmVjb3JkID0gZnVuY3Rpb24ocmVjb3JkX2lkKSB7XG5cdFx0Y29uc29sZS5sb2coJ2dvdCB0aGlzIGlkJywgcmVjb3JkX2lkKTtcblx0XHQvKnZtLnNhbGVzZGF5c0xpc3QuJHNhdmUocmVjb3JkX2lkKS50aGVuKGZ1bmN0aW9uIHN1Y2NlcyhzKSB7XG5cdFx0XHRjb25zb2xlLmxvZygndXBkYXRlZCByZWNvcmQgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xuXHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yIHVwZGF0aW5nIHJlY29yZCcsIGUpO1xuXHRcdH0pOyovXG5cdH07XG5cblx0Ly8gQUREIE5FVyBTQUxFUyBEQVlcblx0dm0uYWRkU2FsZXNEYXkgPSBmdW5jdGlvbigpIHtcblxuXHRcdHZtLnNhbGVzZGF5c0xpc3QuJGFkZCh7XG5cdFx0XHRkYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG5cdFx0XHRzY2hlZHVsZToge1xuXHRcdFx0XHRsb2FkX2luOiB7XG5cdFx0XHRcdFx0ZGF0ZXRpbWU6IFwiXCIsXG5cdFx0XHRcdFx0c2FsZXNfZGF5X2lkOiBcIlwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGxvYWRfb3V0OiB7XG5cdFx0XHRcdFx0ZGF0ZXRpbWU6IFwiXCIsXG5cdFx0XHRcdFx0c2FsZXNfZGF5X2lkOiBcIlwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdG9wZW46IFwiXCIsXG5cdFx0XHRcdGNsb3NlOiBcIlwiLFxuXHRcdFx0XHRzYWxlc19zdGFydDogXCJcIixcblx0XHRcdFx0c2FsZXNfZW5kOiBcIlwiXG5cdFx0XHR9LFxuXHRcdFx0Y3VzdG9tZXI6IFwiXCIsXG5cdFx0XHRzZWFzb246IHtcblx0XHRcdFx0bmFtZTogXCJcIixcblx0XHRcdFx0ZnJlcXVlbmN5OiBcIlwiLFxuXHRcdFx0XHRpbnN0YW5jZTogMCxcblx0XHRcdFx0dG90YWw6IDBcblx0XHRcdH1cblx0XHR9KS50aGVuKGZ1bmN0aW9uIHN1Y2Nlc3Mocykge1xuXHRcdFx0Ly9zZXQgdGhlIGZpcmViYXNlIG9iamVjdFxuXHRcdFx0Y29uc29sZS5sb2cocy5rZXkpO1xuXHRcdFx0dm0uc2VsZWN0ZWRSZWNvcmQgPSAkZmlyZWJhc2VPYmplY3QoZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoKS5jaGlsZCgnc2FsZXNfZGF5cycpLmNoaWxkKHMua2V5KSk7XG5cdFx0XHRjb25zb2xlLmxvZyh2bS5zZWxlY3RlZFJlY29yZCk7XG5cdFx0fSkuY2F0Y2goZnVuY3Rpb24gZXJyb3IoZSkge1xuXHRcdFx0Y29uc29sZS5sb2coJ2Vycm9yJywgZSk7XG5cdFx0fSk7XG5cblx0XHQvKnZtLnNhbGVzZGF5c0xpc3Quc2F2ZSgpLnRoZW4oZnVuY3Rpb24gc3VjY2VzcyhzKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnc3VjY2VzcycsIHMpO1xuXHRcdH0pLmNhdGNoKGZ1bmN0aW9uIGVycm9yKGUpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdlcnJvcicsIGUpO1xuXHRcdH0pOyovXG5cblx0fTtcblxuXHQvLyBHRU5FUkFURSBTQUxFUyBEQVlTXG5cdHZtLmdlbmVyYXRlU2FsZXNEYXlzID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cblx0XHQvL25vdGlmeSBvZiBsb2NhdGlvblxuXHRcdGNvbnNvbGUubG9nKCdnZW5lcmF0aW5nIFNhbGVzIGRheXMnLCB2bS5zY2hlZHVsaW5nX3BhcmFtcyk7XG5cdH07XG5cblx0Ly9ydW4gdGhlIHRlc3RcblxuXG59IiwiLypcbipcbipcbiovXG5cbi8vZGVmaW5lIG1vZHVsZVxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ2NuZScpXG4gICAgLmZhY3RvcnkoJ2ZpcmViYXNlU2VydmljZScsIGZpcmViYXNlU2VydmljZSk7XG5cbi8vZGVwZW5kZW5jeSBpbmplY3Rpb25zXG5maXJlYmFzZVNlcnZpY2UuJGluamVjdCA9IFsnJGZpcmViYXNlJywgJyRmaXJlYmFzZU9iamVjdCcsICckZmlyZWJhc2VBcnJheSddO1xuXG4vL2RlY2xhcmUgdGhlIHNlcnZpY2Vcbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gZmlyZWJhc2VTZXJ2aWNlKCRmaXJlYmFzZSwgJGZpcmViYXNlT2JqZWN0LCAkZmlyZWJhc2VBcnJheSkge1xuXG5cdC8vZGVmaW5lIG1ldGhvZHNcblx0dmFyIEZCU2VydmljZSA9IHtcblx0XHRnZXQ6IHtcblx0XHRcdGN1c3RvbWVyX2xpc3Q6IGdldF9jdXN0b21lcl9saXN0XG5cdFx0fSxcblx0XHRhdXRoVXNlcjoge1xuXHRcdFx0ZW1haWw6IGF1dGhVc2VyX2VtYWlsXG5cdFx0fSxcblx0XHR0ZXN0OiB0ZXN0XG5cdH07XG5cblx0Ly9cdEFVVEhFTlRJQ0FURSBVU0VSXG5cdGZ1bmN0aW9uIGF1dGhVc2VyX2VtYWlsKGVtYWlsLCBwYXNzd29yZCkge1xuXHRcdFxuXHRcdGNvbnNvbGUubG9nKCdhdXRoZW50aWNhdGluZyB1c2VyJylcblxuXHRcdC8vcmV0dXJuIGFzeW5jIHdvcmtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXG5cdFx0XHRmaXJlYmFzZS5hdXRoKCkuc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoZW1haWwsIHBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uIHN1Y2VzcyhzKSB7XG5cblx0XHRcdFx0cmVzb2x2ZShzKTtcblxuXHRcdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0Ly8gSGFuZGxlIEVycm9ycyBoZXJlLlxuXHRcdFx0XHR2YXIgZXJyb3JDb2RlID0gZXJyb3IuY29kZTtcblx0XHRcdFx0dmFyIGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG5cdFx0XHRcdHJlamVjdCh7Y29kZTogZXJyb3JDb2RlICwgbWVzc2FnZTogZXJyb3JNZXNzYWdlfSk7XG5cblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdH07XG5cblx0Ly9cdEdFVCBDVVNUT01FUiBMSVNUXG5cdGZ1bmN0aW9uIGdldF9jdXN0b21lcl9saXN0KCkge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXG5cdFx0Ly9jb25zb2xlLmxvZygnZ2V0dGluZyBjdXN0b21lciBsaXN0Jyk7XG5cblx0XHQvL3JldHVybiBhc3luYyB3b3JrXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgICAgIFxuXHQgICAgICAgIC8vdmFyIHRlc3QgPSBcblxuXHQgICAgICAgIC8vaGl0IHRoZSBzZXJ2ZXIgZm9yIHRoZSBcblx0ICAgICAgICByZXNvbHZlKFtcIm9uZVwiLCBcInR3b1wiLCAndGhyZWUnXSk7XG5cblx0ICAgIH0pO1xuXHR9XG5cblx0Ly9cdFRFU1QgRlVOQ1RJT05cblx0ZnVuY3Rpb24gdGVzdCgpIHsgcmV0dXJuKCdnb29kIHRlc3QgZnJvbSBGQiBTZXJ2aWNlJyk7IH07XG5cblx0Ly90dXJuIHRoZSBtZXRob2RcbiAgICByZXR1cm4gRkJTZXJ2aWNlO1x0XG59O1xuXG4iLCIvKlxuKlx0Q1VTVE9NRVIgTElTVFxuKlxuKlx0VGhpcyBtb2R1bGUgaXMgZGVzaWduZWQgdG8gXG4qL1xuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ2NuZScpXG5cdC5kaXJlY3RpdmUoJ2N1c3RvbWVyTGlzdCcsIGN1c3RvbWVyTGlzdCk7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gY3VzdG9tZXJMaXN0KCkge1xuXHQvL2RlZmluZSB0aGUgZGlyZWN0aXZlXG5cdHZhciBkaXJlY3RpdmUgPSB7XG5cdFx0cmVzdHJpY3Q6IFwiQUVDTVwiLFxuXHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZGlyZWN0aXZlcy9jdXN0b21lci1saXN0LmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHR9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IGN1c3RvbWVyTGlzdENvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHt9XG5cblx0Y3VzdG9tZXJMaXN0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGxvZyddO1xuXHRcblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGN1c3RvbWVyTGlzdENvbnRyb2xsZXIoJHNjb3BlLCAkbG9nKSB7XG5cdFx0Ly9kZWZpbmUgbG9jYWwgdmFyaWFibGVzXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0Y29uc29sZS5sb2coJ2luIGNvc3RvbWVyIExpc3QgY29udHJvbGxlcicpO1xuXHR9XG5cblx0Ly9wYXNzIGl0IGJhY2tcblx0cmV0dXJuIGRpcmVjdGl2ZTtcbn0iLCIvKlxuKlx0RkxBVk9SIE1JWEVSXG4qXG4qXHRUaGlzIG1vZHVsZSBpcyBkZXNpZ25lZCB0byBhbGxvdyBjdXN0b21lcnMgdG8gbWl4IGFuZCBtYXRjaFxuKlx0b3VyIGRlbGljaW91cyBmbGF2b3JzIGFuZCB0byBwaWNrIHRoaWVyIHNpemluZy5cbiovXG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnY25lJylcblx0LmRpcmVjdGl2ZSgnbG9naW5QYXNzd29yZCcsIGxvZ2luUGFzc3dvcmQpO1xuXG4vKiBAbmdJbmplY3QgKi9cbmZ1bmN0aW9uIGxvZ2luUGFzc3dvcmQoKSB7XG5cdC8vZGVmaW5lIHRoZSBkaXJlY3RpdmVcblx0dmFyIGRpcmVjdGl2ZSA9IHtcblx0XHRyZXN0cmljdDogXCJBRUNNXCIsXG5cdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL2xvZ2luLXBhc3N3b3JkLmRpcmVjdGl2ZS5odG0nLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdHBhc3N3b3JkOiBcIj1cIixcblx0XHRcdGFjdGl2ZTogXCI9XCJcblx0XHR9LFxuXHRcdGxpbms6IGxpbmtGdW5jLFxuXHRcdGNvbnRyb2xsZXI6IGxvZ2luUGFzc3dvcmRDb250cm9sbGVyLFxuXHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlXG5cdH1cblxuXHQvKiBAbmdJbmplY3QgKi9cblx0ZnVuY3Rpb24gbGlua0Z1bmMoc2NvcGUsIGVsLCBhdHRyLCBjdHJsKSB7fVxuXG5cdGxvZ2luUGFzc3dvcmRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckbG9nJ107XG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsb2dpblBhc3N3b3JkQ29udHJvbGxlcigkc2NvcGUsICRsb2cpIHtcblx0XHQvL2RlZmluZSBsb2NhbCB2YXJpYWJsZXNcblx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdH1cblxuXHQvL3Bhc3MgaXQgYmFja1xuXHRyZXR1cm4gZGlyZWN0aXZlO1xufSIsIi8qXG4qXHRGTEFWT1IgTUlYRVJcbipcbipcdFRoaXMgbW9kdWxlIGlzIGRlc2lnbmVkIHRvIGFsbG93IGN1c3RvbWVycyB0byBtaXggYW5kIG1hdGNoXG4qXHRvdXIgZGVsaWNpb3VzIGZsYXZvcnMgYW5kIHRvIHBpY2sgdGhpZXIgc2l6aW5nLlxuKi9cblxuYW5ndWxhclxuXHQubW9kdWxlKCdjbmUnKVxuXHQuZGlyZWN0aXZlKCdsb2dpblVzZXJuYW1lJywgbG9naW5Vc2VybmFtZSk7XG5cbi8qIEBuZ0luamVjdCAqL1xuZnVuY3Rpb24gbG9naW5Vc2VybmFtZSgpIHtcblx0Ly9kZWZpbmUgdGhlIGRpcmVjdGl2ZVxuXHR2YXIgZGlyZWN0aXZlID0ge1xuXHRcdHJlc3RyaWN0OiBcIkFFQ01cIixcblx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvbG9naW4tdXNlcm5hbWUuZGlyZWN0aXZlLmh0bScsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge1xuXHRcdFx0dXNlcm5hbWU6IFwiPVwiLFxuXHRcdFx0YWN0aXZlOiBcIj1cIlxuXHRcdH0sXG5cdFx0bGluazogbGlua0Z1bmMsXG5cdFx0Y29udHJvbGxlcjogbG9naW5Vc2VybmFtZUNvbnRyb2xsZXIsXG5cdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcblx0fVxuXG5cdC8qIEBuZ0luamVjdCAqL1xuXHRmdW5jdGlvbiBsaW5rRnVuYyhzY29wZSwgZWwsIGF0dHIsIGN0cmwpIHt9XG5cblx0bG9naW5Vc2VybmFtZUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRsb2cnXTtcblx0LyogQG5nSW5qZWN0ICovXG5cdGZ1bmN0aW9uIGxvZ2luVXNlcm5hbWVDb250cm9sbGVyKCRzY29wZSwgJGxvZykge1xuXHRcdC8vZGVmaW5lIGxvY2FsIHZhcmlhYmxlc1xuXHRcdHZhciBzZWxmID0gdGhpcztcblx0fVxuXG5cdC8vcGFzcyBpdCBiYWNrXG5cdHJldHVybiBkaXJlY3RpdmU7XG59IiwiLypcbipcdFJPVVRFUy1DT05GSUdcbipcbipcdFRoaXMgbW9kdWxlIHNldHMgdXAgYWxsIHRoZSByZXF1aXJlZCBhbmd1bGFyIHJvdXRlcyBmb3IgdGhpcyB3ZWIgYXBwLlxuKi9cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdjbmUnKVxuICAgIC5jb25maWcoY29uZmlnKTtcblxuLyogQG5nSW5qZWN0ICovXG5mdW5jdGlvbiBjb25maWcoJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG5cdCRsb2NhdGlvblByb3ZpZGVyLmhhc2hQcmVmaXgoJycpO1xuICAgICRyb3V0ZVByb3ZpZGVyXG5cdC8vUFVCTElDIFJPVVRFU1xuICAgIC53aGVuKCcvJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2xhbmRpbmdQYWdlLmh0bScsICAgICAgLy8ndmlld3MvbWFpblBhZ2UuaHRtJ1xuICAgICAgICBjb250cm9sbGVyOiAnbGFuZGluZ0NvbnRyb2xsZXInLCAgICAgICAgICAgLy8nbWFpbkNvbnRyb2xsZXInXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xuICAgIH0pXG4gICAgLndoZW4oJy9jdXN0b21lcnMnLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvY3VzdG9tZXJzUGFnZS5odG0nLCAgICAgIC8vJ3ZpZXdzL21haW5QYWdlLmh0bSdcbiAgICAgICAgY29udHJvbGxlcjogJ2N1c3RvbWVyc0NvbnRyb2xsZXInLCAgICAgICAgICAgLy8nbWFpbkNvbnRyb2xsZXInXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogeyAvKiBAbmdJbmplY3QgKi9cbiAgICAgICAgICAgIGN1c3RvbWVyTGlzdDogY3VzdG9tZXJMaXN0XG4gICAgICAgIH1cbiAgICB9KVxuICAgIC53aGVuKCcvc2FsZXNkYXlzJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3NhbGVzRGF5c1BhZ2UuaHRtJywgICAgICAvLyd2aWV3cy9tYWluUGFnZS5odG0nXG4gICAgICAgIGNvbnRyb2xsZXI6ICdzYWxlc0RheXNDb250cm9sbGVyJywgICAgICAgICAgIC8vJ21haW5Db250cm9sbGVyJ1xuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuICAgIC53aGVuKCcvbG9naW4nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvbG9naW5QYWdlLmh0bScsICAgICAgLy8ndmlld3MvbWFpblBhZ2UuaHRtJ1xuICAgICAgICBjb250cm9sbGVyOiAnbG9naW5Db250cm9sbGVyJywgICAgICAgICAgIC8vJ21haW5Db250cm9sbGVyJ1xuICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcbiAgICB9KVxuXHQub3RoZXJ3aXNlKHtcbiAgICAgICAgcmVkaXJlY3RUbzogJy8nXG4gICAgfSk7XG59XG5cbi8qXG4qICAgUkVRVUlSRUQgRlVOQ1RJT05TXG4qXG4qL1xuXG4vLyAgQ1VTVE9NRVJTIExJU1RcbmZ1bmN0aW9uIGN1c3RvbWVyTGlzdCgpIHtcbiAgICBcbiAgICAvL3JldHVybiB0aGUgcHJvbWlzZVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgLy9oaXQgdGhlIHNlcnZlciBmb3IgdGhlIFxuICAgICAgICByZXNvbHZlKCdnb29kIHRlc3QnKTtcbiAgICB9KTtcblxufTtcblxuIl19
